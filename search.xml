<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>npm analyzer project: part 3</title>
      <link href="/2019/11/05/npm-analyzer-project-part-3/"/>
      <url>/2019/11/05/npm-analyzer-project-part-3/</url>
      
        <content type="html"><![CDATA[<h2 id="RabbitMQ-is-the-most-widely-deployed-open-source-message-broker"><a href="#RabbitMQ-is-the-most-widely-deployed-open-source-message-broker" class="headerlink" title="RabbitMQ is the most widely deployed open source message broker."></a><a href="https://www.rabbitmq.com/" target="_blank" rel="noopener">RabbitMQ</a> is the most widely deployed open source message broker.</h2><p>At first I go to <a href="https://www.rabbitmq.com/" target="_blank" rel="noopener">RabbitMQ</a> to download and install it.<br>I use the shell script to install rabbitMQ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line"></span><br><span class="line">## If sudo is not available on the system,</span><br><span class="line">## uncomment the line below to install it</span><br><span class="line"># apt-get install -y sudo</span><br><span class="line"></span><br><span class="line">sudo apt-get update -y</span><br><span class="line"></span><br><span class="line">## Install prerequisites</span><br><span class="line">sudo apt-get install curl gnupg -y</span><br><span class="line"></span><br><span class="line">## Install RabbitMQ signing key</span><br><span class="line">curl -fsSL https://github.com/rabbitmq/signing-keys/releases/download/2.0/rabbitmq-release-signing-key.asc | sudo apt-key add -</span><br><span class="line"></span><br><span class="line">## Install apt HTTPS transport</span><br><span class="line">sudo apt-get install apt-transport-https</span><br><span class="line"></span><br><span class="line">## Add Bintray repositories that provision latest RabbitMQ and Erlang 21.x releases</span><br><span class="line">sudo tee /etc/apt/sources.list.d/bintray.rabbitmq.list &lt;&lt;EOF</span><br><span class="line">## Installs the latest Erlang 21.x release.</span><br><span class="line">## Change component to &quot;erlang&quot; to install the latest version (22.x or later).</span><br><span class="line">## &quot;bionic&quot; as distribution name should work for any later Ubuntu or Debian release.</span><br><span class="line">## See the release to distribution mapping table in RabbitMQ doc guides to learn more.</span><br><span class="line">deb https://dl.bintray.com/rabbitmq-erlang/debian bionic erlang-21.x</span><br><span class="line">deb https://dl.bintray.com/rabbitmq/debian bionic main</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">## Update package indices</span><br><span class="line">sudo apt-get update -y</span><br><span class="line"></span><br><span class="line">## Install rabbitmq-server and its dependencies</span><br><span class="line">sudo apt-get install rabbitmq-server -y --fix-missing</span><br></pre></td></tr></table></figure><p>after run this instll shell script, it doesn’t work. I try docker image.</p><h4 id="Install-rabbitMQ-docker-image"><a href="#Install-rabbitMQ-docker-image" class="headerlink" title="Install rabbitMQ docker image"></a>Install rabbitMQ docker image</h4><p>according to <a href="https://hub.docker.com/_/rabbitmq" target="_blank" rel="noopener">rabbitMQ</a>, run command</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d --hostname my-rabbit --name some-rabbit -p 8080:15672 rabbitmq:3-management</span><br></pre></td></tr></table></figure><a id="more"></a><img src="/2019/11/05/npm-analyzer-project-part-3/dockerrun.png" class=""><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker logs some-rabbit</span><br></pre></td></tr></table></figure><p>then I saw the logs like this:</p><img src="/2019/11/05/npm-analyzer-project-part-3/logs.png" class=""><h4 id="login-docker-rabbitmq-container-to-see-config-file"><a href="#login-docker-rabbitmq-container-to-see-config-file" class="headerlink" title="login docker rabbitmq container to see config file"></a>login docker rabbitmq container to see config file</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker exec -it some-rabbit bash</span><br></pre></td></tr></table></figure><img src="/2019/11/05/npm-analyzer-project-part-3/config.png" class=""><h4 id="login-localhost-15672-on-browser"><a href="#login-localhost-15672-on-browser" class="headerlink" title="login localhost:15672 on browser"></a>login localhost:15672 on browser</h4><img src="/2019/11/05/npm-analyzer-project-part-3/15672.png" class=""><p>using guest/guest log in</p><img src="/2019/11/05/npm-analyzer-project-part-3/login.png" class="">]]></content>
      
      
      
        <tags>
            
            <tag> npm </tag>
            
            <tag> rabbitMQ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>npm analyzer project: part 2</title>
      <link href="/2019/11/05/npm-analyzer-project-part-2/"/>
      <url>/2019/11/05/npm-analyzer-project-part-2/</url>
      
        <content type="html"><![CDATA[<h2 id="CouchDB"><a href="#CouchDB" class="headerlink" title="CouchDB"></a>CouchDB</h2><p><a href="https://couchdb.apache.org/" target="_blank" rel="noopener">Apache CouchDB</a> lets you access your data where you need it. The Couch Replication Protocol is implemented in a variety of projects and products that span every imaginable computing environment from globally distributed server-clusters, over mobile phones to web browsers.<br>Since I am working in treehouses/cli vagrant in which CouchDB docker already installed, I need to run couchDB docker.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 5984:984 --name=vmnet8 treehouses/couchdb:2.3.1</span><br></pre></td></tr></table></figure><p>then open localhost:5984 on my browser</p><img src="/2019/11/05/npm-analyzer-project-part-2/couch5984.png" class=""><p>It shows couchDB installed</p><h4 id="Create-a-new-database-named-npms"><a href="#Create-a-new-database-named-npms" class="headerlink" title="Create a new database named npms"></a>Create a new database named npms</h4><img src="/2019/11/05/npm-analyzer-project-part-2/database_npms.jpg" class=""><p>visit localhost:5984/_utils, you can see the new database npms is created</p><img src="/2019/11/05/npm-analyzer-project-part-2/npms.jpg" class=""><h4 id="Setup-npm-replication-from-https-replicate-npmjs-com-registry-to-npm-database-in-continuous-mode"><a href="#Setup-npm-replication-from-https-replicate-npmjs-com-registry-to-npm-database-in-continuous-mode" class="headerlink" title="Setup npm replication from https://replicate.npmjs.com/registry to npm database in continuous mode"></a>Setup npm replication from <a href="https://replicate.npmjs.com/registry" target="_blank" rel="noopener">https://replicate.npmjs.com/registry</a> to npm database in continuous mode</h4><img src="/2019/11/05/npm-analyzer-project-part-2/replication.jpg" class=""><a id="more"></a><p>waiting for a while, the replication will be done</p><img src="/2019/11/05/npm-analyzer-project-part-2/replication_done.jpg" class=""><h4 id="For-the-replication-to-work-I-might-need-to-add-some-CouchDB-config"><a href="#For-the-replication-to-work-I-might-need-to-add-some-CouchDB-config" class="headerlink" title="For the replication to work, I might need to add some CouchDB config:"></a>For the replication to work, I might need to add some CouchDB config:</h4><img src="/2019/11/05/npm-analyzer-project-part-2/create_plugin.jpg" class=""><p>you can see in the replication config file, the auth plugin added</p><img src="/2019/11/05/npm-analyzer-project-part-2/add_plugin.jpg" class=""><h4 id="Creating-the-document-design-npms-analyzer-in-the-npms-database-with-the-contents-of-https-github-com-npms-io-npms-analyzer-blob-master-config-couchdb-npms-analyzer-json"><a href="#Creating-the-document-design-npms-analyzer-in-the-npms-database-with-the-contents-of-https-github-com-npms-io-npms-analyzer-blob-master-config-couchdb-npms-analyzer-json" class="headerlink" title="Creating the document _design/npms-analyzer in the npms database with the contents of https://github.com/npms-io/npms-analyzer/blob/master/config/couchdb/npms-analyzer.json"></a>Creating the document _design/npms-analyzer in the npms database with the contents of <a href="https://github.com/npms-io/npms-analyzer/blob/master/config/couchdb/npms-analyzer.json" target="_blank" rel="noopener">https://github.com/npms-io/npms-analyzer/blob/master/config/couchdb/npms-analyzer.json</a></h4><img src="/2019/11/05/npm-analyzer-project-part-2/document.png" class="">]]></content>
      
      
      
        <tags>
            
            <tag> npm </tag>
            
            <tag> couchDB </tag>
            
            <tag> rabbitMQ </tag>
            
            <tag> Elasticsearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>npms analyzer project: part 1</title>
      <link href="/2019/11/02/npms-analyzer-project-part-1/"/>
      <url>/2019/11/02/npms-analyzer-project-part-1/</url>
      
        <content type="html"><![CDATA[<p>The npms-analyzer analyzes the npm ecosystem, collecting info, evaluating and scoring each package.In this project, I am going to create an experimental enviroment for treehouses cli package.</p><h2 id="Set-up-all-the-items-needed-for-this-project"><a href="#Set-up-all-the-items-needed-for-this-project" class="headerlink" title="Set up all the items needed for this project."></a>Set up all the items needed for this project.</h2><h3 id="Config-file"><a href="#Config-file" class="headerlink" title="Config file"></a>Config file</h3><p>Configure Node.js Applications</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i config</span><br></pre></td></tr></table></figure><h3 id="Programs-amp-utilities"><a href="#Programs-amp-utilities" class="headerlink" title="Programs &amp; utilities"></a>Programs &amp; utilities</h3><h4 id="node"><a href="#node" class="headerlink" title="node"></a>node</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vagrant@cli:~/npm_analyzer$ which node</span><br><span class="line">/usr/bin/node</span><br></pre></td></tr></table></figure><h4 id="git"><a href="#git" class="headerlink" title="git"></a>git</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vagrant@cli:~/npm_analyzer$ which git</span><br><span class="line">/usr/bin/git</span><br></pre></td></tr></table></figure><h4 id="rm-mkdir-chmod-wc"><a href="#rm-mkdir-chmod-wc" class="headerlink" title="rm mkdir chmod wc"></a>rm mkdir chmod wc</h4><p>They are already in Ubuntu.</p><h4 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vagrant@cli:~/npm_analyzer$ which tar</span><br><span class="line">/usr/bin/tar</span><br></pre></td></tr></table></figure><h4 id="pino"><a href="#pino" class="headerlink" title="pino"></a>pino</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install -g pino-prteey</span><br><span class="line">vagrant@cli:~/npm_analyzer$ which pino-pretty</span><br><span class="line">/usr/bin/pino-pretty</span><br><span class="line">vagrant@cli:~/npm_analyzer$ ls -l /usr/bin/pino-pretty</span><br><span class="line">lrwxrwxrwx 1 root root 38 Nov  1 17:25 /usr/bin/pino-pretty -&gt; ../lib/node_modules/pino-pretty/bin.js</span><br></pre></td></tr></table></figure><p>to be contiuned</p>]]></content>
      
      
      
        <tags>
            
            <tag> npm </tag>
            
            <tag> couchDB </tag>
            
            <tag> rabbitMQ </tag>
            
            <tag> Elasticsearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Create npm repo</title>
      <link href="/2019/10/19/Create-npm-repo/"/>
      <url>/2019/10/19/Create-npm-repo/</url>
      
        <content type="html"><![CDATA[<p>I need to simulate a npm repo to test codes. The following steps are how to create a npm repo.</p><h4 id="Create-a-npm-account"><a href="#Create-a-npm-account" class="headerlink" title="Create a npm account"></a>Create a npm account</h4><p>Go to <a href="npmjs.com">npmjs.com</a>, click “join for free”, then create your account. The weird thing is the password needs at least 10 characters!</p><h4 id="Create-a-npm-repo-on-your-local-terminal"><a href="#Create-a-npm-repo-on-your-local-terminal" class="headerlink" title="Create a npm repo on your local terminal"></a>Create a npm repo on your local terminal</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir npm_own</span><br></pre></td></tr></table></figure><h4 id="Copy-github-com-treehouses-cli-package-json-url-to-local"><a href="#Copy-github-com-treehouses-cli-package-json-url-to-local" class="headerlink" title="Copy github.com/treehouses/cli package.json url to local"></a>Copy github.com/treehouses/cli package.json url to local</h4><p>Because I want to test the code on github.com/treehouses/cli and don’t want to mess up the current repo, I copy the url to my local</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/treehouses/cli/blob/master/package.json</span><br></pre></td></tr></table></figure><h4 id="Create-your-own-package-json"><a href="#Create-your-own-package-json" class="headerlink" title="Create your own package.json"></a>Create your own package.json</h4><p>I try to create a repo named “flyingsaucer8”.<br>Using vim to make my own package.json based on treehouses package.json</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;flyingsaucer8&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;0.0.6&quot;,</span><br><span class="line">  &quot;description&quot;: &quot;flyingsaucer&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;cli.sh&quot;,</span><br><span class="line">  &quot;bin&quot;: &#123;</span><br><span class="line">    &quot;flyingsaucer&quot;: &quot;cli.sh&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;publishConfig&quot;: &#123;</span><br><span class="line">    &quot;access&quot;: &quot;public&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;repository&quot;: &#123;</span><br><span class="line">    &quot;type&quot;: &quot;git&quot;,</span><br><span class="line">    &quot;url&quot;: &quot;https://github.com/vmnet8/flyingsaucer.git&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;postinstall&quot;: &quot;if [ $(id -u) = 0 ]; then ln -sr _flyingsaucer /etc/bash_completion.d/_flyingsaucer; fi &amp;&amp; exit 0&quot;,</span><br><span class="line">    &quot;postuninstall&quot;: &quot;if [ $(id -u) = 0 ]; then rm /etc/bash_completion.d/_flyingsaucer; fi &amp;&amp; exit 0&quot;,</span><br><span class="line">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 0&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;keywords&quot;: [</span><br><span class="line">    &quot;flyingsaucer&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;author&quot;: &#123;</span><br><span class="line">    &quot;name&quot;: &quot;flyingsaucer team&quot;,</span><br><span class="line">    &quot;email&quot;: &quot;alien@flyingsaucer.io&quot;,</span><br><span class="line">    &quot;url&quot;: &quot;https://flyingsaucer.io&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;license&quot;: &quot;AGPL-3.0&quot;,</span><br><span class="line">  &quot;bugs&quot;: &#123;</span><br><span class="line">    &quot;url&quot;: &quot;https://github.com/vmnet8/flyingsaucer/issues&quot;,</span><br><span class="line">    &quot;email&quot;: &quot;alien@flyingsaucer.io&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;homepage&quot;: &quot;https://github.com/vmnet8/flyingsaucer&quot;,</span><br><span class="line">  &quot;dependencies&quot;: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="npm-publish"><a href="#npm-publish" class="headerlink" title="npm publish"></a>npm publish</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@treehouses:~/git_repo/npm_own:npm login</span><br><span class="line">Username:vmnet8</span><br><span class="line">password:</span><br><span class="line">Email:(This IS Public)vmnet8@gmail.com</span><br><span class="line">Logged in as vmnet8 on https://registry.npmjs.org/.</span><br></pre></td></tr></table></figure><p>then you can publish your repo to npm</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pi@treehouses:~/git_repo/npm_own:npm publish --access=public</span><br></pre></td></tr></table></figure><p>Right now, you know how to push your code to npmjs repo</p><h3 id="copy-other-code-from-github-com-treehouses-cli"><a href="#copy-other-code-from-github-com-treehouses-cli" class="headerlink" title="copy other code from github.com/treehouses/cli"></a>copy other code from github.com/treehouses/cli</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/treehouses/cli/blob/master/cli.sh</span><br><span class="line">wget https://github.com/treehouses/cli/blob/master/_treehouses</span><br></pre></td></tr></table></figure><p>I need to copy globals.sh and other modules, I only copied speedtest and detectpi.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/treehouses/cli/blob/master/modules/speedtest.sh</span><br><span class="line">wget https://github.com/treehouses/cli/blob/master/modules/globals.sh</span><br><span class="line">wget https:eehouses/cli/blob/master/modules/detectrpi.sh</span><br></pre></td></tr></table></figure><h4 id="change-the-cli-sh-and-treehouses-to-fit-my-situation"><a href="#change-the-cli-sh-and-treehouses-to-fit-my-situation" class="headerlink" title="change the cli.sh and _treehouses to fit my situation"></a>change the cli.sh and _treehouses to fit my situation</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">SCRIPTPATH=$(realpath &quot;$0&quot;)</span><br><span class="line">SCRIPTFOLDER=$(dirname &quot;$SCRIPTPATH&quot;)</span><br><span class="line"></span><br><span class="line">source &quot;$SCRIPTFOLDER/modules/globals.sh&quot; </span><br><span class="line">source &quot;$SCRIPTFOLDER/modules/detectrpi.sh&quot; </span><br><span class="line">source &quot;$SCRIPTFOLDER/modules/speedtest.sh&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">case $1 in</span><br><span class="line">  detectrpi)</span><br><span class="line">    detectrpi</span><br><span class="line">    ;;</span><br><span class="line">  speedtest)</span><br><span class="line">    shift</span><br><span class="line">    speedtest &quot;$@&quot;</span><br><span class="line">    ;;</span><br><span class="line">  help)</span><br><span class="line">    help &quot;$2&quot;</span><br><span class="line">    ;;</span><br><span class="line">  *)</span><br><span class="line">    help</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure><p>Notice: I am supposed to keep globals.sh</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">_treehouses_complete()</span><br><span class="line">&#123;</span><br><span class="line">  local cur prev</span><br><span class="line"></span><br><span class="line">  # Valid top-level completions</span><br><span class="line">  commands=&quot;detectpi speedtest&quot;</span><br><span class="line">  help_cmds=&quot;detectpi speedtest&quot;</span><br><span class="line"></span><br><span class="line"># services_cmds=&quot;&quot; Think about it, a little bit complicated</span><br><span class="line"></span><br><span class="line"># upgrade_cmds=&quot;&quot; I am not sure whether we should put autocompletion here.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  COMPREPLY=()</span><br><span class="line">  cur=$&#123;COMP_WORDS[COMP_CWORD]&#125;</span><br><span class="line">  prev=$&#123;COMP_WORDS[COMP_CWORD-1]&#125;</span><br><span class="line"></span><br><span class="line">  if [ $COMP_CWORD -eq 1 ]</span><br><span class="line">  then</span><br><span class="line">    COMPREPLY=( $(compgen -W &quot;$&#123;commands&#125;&quot; -- $cur) )</span><br><span class="line">  elif [ $COMP_CWORD -eq 2 ]</span><br><span class="line">  then</span><br><span class="line">    case &quot;$prev&quot; in</span><br><span class="line">      &quot;help&quot;)</span><br><span class="line">        COMPREPLY=( $(compgen -W &quot;$help_cmds&quot; -- $cur) )</span><br><span class="line">        ;;</span><br><span class="line">      &quot;*&quot;)</span><br><span class="line">        ;;</span><br><span class="line">    esac</span><br><span class="line">  elif [ $COMP_CWORD -eq 3 ]</span><br><span class="line">  then</span><br><span class="line">    case &quot;$prev&quot; in</span><br><span class="line">      &quot;console&quot;)</span><br><span class="line">        COMPREPLY=( $(compgen -W &quot;$bootoption_second_cmds&quot; -- $cur) )</span><br><span class="line">        ;;</span><br><span class="line">      &quot;desktop&quot;)</span><br><span class="line">        COMPREPLY=( $(compgen -W &quot;$bootoption_second_cmds&quot; -- $cur) )</span><br><span class="line">        ;;</span><br><span class="line">      &quot;notice&quot;)</span><br><span class="line">        COMPREPLY=( $(compgen -W &quot;$notice_cmds&quot; -- $cur) )</span><br><span class="line">        ;;</span><br><span class="line">      &quot;*&quot;)</span><br><span class="line">        ;;</span><br><span class="line">    esac</span><br><span class="line">  fi</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">complete -F _treehouses_complete treehouses</span><br></pre></td></tr></table></figure><p>then I need to add execute to cli.sh and _flyingsaucer</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pi@treehosues:~/git_repo/npm_own/ $chmod +x cli.sh</span><br><span class="line">pi@treehosues:~/git_repo/npm_own/ $chmod +x _flyingsaucer</span><br></pre></td></tr></table></figure><h4 id="install-npm-package"><a href="#install-npm-package" class="headerlink" title="install npm package"></a>install npm package</h4><p>Go to my local terminal to install npm package</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pi@treehosues:~/git_repo/npm_own/ $ sudo npm install -g flyingsaucer8</span><br></pre></td></tr></table></figure><h4 id="test"><a href="#test" class="headerlink" title="test"></a>test</h4><p>After npm installed, I can test on my local maching if the bash completion works</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">pi@treehouses:~/git_repo/npm_own/ $ cd /etc/bash_completion</span><br><span class="line">pi@treehouses:~/etc/bash_completion $ ls -al</span><br><span class="line">lrwxrwxrwx   1 root root    54 Oct 17 07:09 _treehouses -&gt; ../../usr/lib/node_modules/@treehouses/cli/_treehouses</span><br></pre></td></tr></table></figure><p>It shows the symbolic doesn’t work.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">pi@treehouses:~/git_repo/npm_own/ $ flyingsaucer speedtest</span><br><span class="line">pi@treehouses:~/git_repo/npm_own/ $ flyingsaucer detectpi</span><br></pre></td></tr></table></figure><p>It shows <code>speedtest</code> works well, but <code>detectpi</code> doesn’t</p>]]></content>
      
      
      
        <tags>
            
            <tag> npm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Convert markdown file to PDF file</title>
      <link href="/2019/10/14/Convert-markdown-file-to-PDF-file/"/>
      <url>/2019/10/14/Convert-markdown-file-to-PDF-file/</url>
      
        <content type="html"><![CDATA[<p>I keep my resume on github, and is going to update it with my working experience changing.Since resume is written in markdown format on github, I need a PDF format when applying job on line. How to convert markdown file to PDF file easily?</p><h2 id="Convert-markdown-file-to-html-format-first"><a href="#Convert-markdown-file-to-html-format-first" class="headerlink" title="Convert markdown file to html format first"></a>Convert markdown file to html format first</h2><p>You need to check markdown is already installed or not. If not, you need use <code>apt install markdown</code> to install it.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">anna@ubuntu1804:~$ which markdown</span><br><span class="line">/usr/bin/markdown</span><br></pre></td></tr></table></figure><p>Go to directory where your markdown file lies, run</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anna@ubuntu1804:~/git_repo/resume$ markdown resume.md resume.html</span><br></pre></td></tr></table></figure><p>you will convert resume.md markdown file to resume.html</p><p>then you can go to webbrowser to see this html file, to make sure it works.</p><h2 id="Convert-html-file-to-PDF-file"><a href="#Convert-html-file-to-PDF-file" class="headerlink" title="Convert html file to PDF file"></a>Convert html file to PDF file</h2><p>To convert PDF file, you need to use wkhtmltopdf tool</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt install wkhtmltopdf</span><br><span class="line">anna@ubuntu1804:~$ which wkhtmltopdf</span><br><span class="line">/usr/bin/wkhtmltopdf</span><br></pre></td></tr></table></figure><p>go to the same directory where the resume.md and resume.html lie, run</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wkhtmltopdf -s letter  -B 25mm -T 25mm -L 25mm -R 25mm resume.html resume.pdf</span><br></pre></td></tr></table></figure><p>then you can get the PDF format resume file.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">anna@ubuntu1804:~/git_repo/resume$ ll</span><br><span class="line">-rw-r--r-- 1 anna anna  4493 Oct 14 22:46 resume.html</span><br><span class="line">-rw-r--r-- 1 anna anna  3728 Oct 14 22:45 resume.md</span><br><span class="line">-rw-r--r-- 1 anna anna 34985 Oct 14 22:46 resume.pdf</span><br></pre></td></tr></table></figure><h2 id="Write-a-script-to-execute-convert-automaticly"><a href="#Write-a-script-to-execute-convert-automaticly" class="headerlink" title="Write a script to execute convert automaticly"></a>Write a script to execute convert automaticly</h2><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#/bin/bash</span><br><span class="line"></span><br><span class="line">md=$1</span><br><span class="line"></span><br><span class="line"># validate md</span><br><span class="line">if [ ! -f &quot;$md&quot; ]; then</span><br><span class="line">   echo &quot;Usage: $0 &lt;markdown file name&gt;&quot;</span><br><span class="line">   exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">html=&quot;$&#123;md%%.*&#125;.html&quot;</span><br><span class="line"></span><br><span class="line">pdf=&quot;$&#123;md%%.*&#125;.pdf&quot;</span><br><span class="line"></span><br><span class="line">markdown $md &gt; $html</span><br><span class="line"></span><br><span class="line">wkhtmltopdf -s letter  -B 25mm -T 25mm -L 25mm -R 25mm $html  $pdf</span><br></pre></td></tr></table></figure><p>after you update resume, you can run md2pdf.sh, then get the PDF file automaticlly</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">anna@ubuntu1804:~/git_repo/resume$ ./md2pdf.sh resume.md</span><br><span class="line">Loading page (1/2)</span><br><span class="line">Printing pages (2/2)                                               </span><br><span class="line">Done                                                           </span><br><span class="line">anna@ubuntu1804:~/git_repo/resume$ ll</span><br><span class="line">total 76</span><br><span class="line">drwxr-xr-x 3 anna anna  4096 Oct 15 00:17 ./</span><br><span class="line">drwxr-xr-x 3 anna anna  4096 Oct 14 21:38 ../</span><br><span class="line">drwxr-xr-x 8 anna anna  4096 Oct 15 00:09 .git/</span><br><span class="line">-rw-r--r-- 1 anna anna    12 Oct 14 22:48 .gitignore</span><br><span class="line">-rwxr-xr-x 1 anna anna   268 Oct 14 22:36 md2pdf.sh*</span><br><span class="line">-rw-r--r-- 1 anna anna    17 Oct 14 21:38 README.md</span><br><span class="line">-rw-r--r-- 1 anna anna  4774 Oct 15 00:18 resume.html</span><br><span class="line">-rw-r--r-- 1 anna anna  3974 Oct 15 00:17 resume.md</span><br><span class="line">-rw-r--r-- 1 anna anna 36063 Oct 15 00:18 resume.pdf</span><br><span class="line">-rw-r--r-- 1 anna anna   280 Oct 14 21:38 support.md</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> shell script </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ovirt-configuring-storage</title>
      <link href="/2019/10/04/Ovirt-configuring-storage/"/>
      <url>/2019/10/04/Ovirt-configuring-storage/</url>
      
        <content type="html"><![CDATA[<p>Last time we talked about adding a host to oVirt engine, it looks like following:</p><img src="/2019/10/04/Ovirt-configuring-storage/first.jpg" class=""><h2 id="configure-storage"><a href="#configure-storage" class="headerlink" title="configure storage"></a>configure storage</h2><p>Setting up storage is a prerequisite for a new data center because a data center cannot be initialized unless storage domains are attached and activated.<br>A storage domain is a collection of images that have a common storage domain contains complete images of templates and virtual machots), ISO files, and metadata about themselves. A storage domain can be made of either block devices (SAN - iSCSI or FCP) or a file system (NAS - NFS, GlusterFS, or other POSIX compliant file systems).</p><h2 id="configure-NFS-storage"><a href="#configure-NFS-storage" class="headerlink" title="configure NFS storage"></a>configure NFS storage</h2><p>First I use another centOS as a nfs server,then attached it to storage domain.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@cube4200 ~]# showmount -e</span><br><span class="line">Export list for cube4200:</span><br><span class="line">/export/hosted_vm 192.168.0.0/24</span><br></pre></td></tr></table></figure><img src="/2019/10/04/Ovirt-configuring-storage/create_nfs.jpg" class=""><p>It is attached successfully.</p><a id="more"></a><img src="/2019/10/04/Ovirt-configuring-storage/finish_nfs.jpg" class=""><h2 id="configure-iSCSI-storage"><a href="#configure-iSCSI-storage" class="headerlink" title="configure iSCSI storage"></a>configure iSCSI storage</h2><p>First I am going to use targetcli to create an iSCSI on my centOS.</p><p>after that, I go back to engine to attach it, but it said it can’t find the lun.I tried several times but failed.<br>After searching online, I found there is a specical user named vdsm whose user id is 36, group idis 36. This is a special user who supports engine to mount iSCSI to storage domain.Without this user the iSCSI can’t be found.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@cube4200 ~]# id vdsm</span><br><span class="line">uid=36(vdsm) gid=36(kvm) groups=36(kvm),179(sanlock),107(qemu)</span><br></pre></td></tr></table></figure><p>after adding user vdsm on iSCSI server, engine can find the lun.</p><img src="/2019/10/04/Ovirt-configuring-storage/create_lun.jpg" class=""><img src="/2019/10/04/Ovirt-configuring-storage/all_done.jpg" class="">]]></content>
      
      
      
        <tags>
            
            <tag> Ovirt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ovirt: installation -- using cockpit wizard</title>
      <link href="/2019/09/14/Ovirt-installation/"/>
      <url>/2019/09/14/Ovirt-installation/</url>
      
        <content type="html"><![CDATA[<h2 id="Ovirt"><a href="#Ovirt" class="headerlink" title="Ovirt"></a>Ovirt</h2><p>oVirt is an open-source distributed virtualization solution, designed to manage your entire enterprise infrastructure. oVirt uses the trusted KVM hypervisor and is built upon several other community projects, including libvirt, Gluster, PatternFly, and Ansible.<br>Go to <a href="https://www.ovirt.org/download/" target="_blank" rel="noopener">Ovirt</a>to see how to install Ovirt.<br>oVirt Engine and a Host are installed together with the Engine running as a Virtual Machine on that Host.I use cockpit wizard to install Ovirt on CentOS.<br>Two types hosts</p><ul><li>oVirt node, other name ‘thin host’, it is a minimal OS, contains the only packagesrequired for the machine to act as a host. </li><li>centOS or RHEL host<br>I use centOS 7 as a host.<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update -y</span><br></pre></td></tr></table></figure>Add the official oVirt repository:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install https://resources.ovirt.org/pub/yum-repo/ovirt-release43.rpm</span><br></pre></td></tr></table></figure>I use cockpit wizard to install Ovirt on CentOS.<br>Install Cockpit and the cockpit-ovirt-dashboard plugin:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install cockpit cockpit-ovirt-dashboard -y</span><br></pre></td></tr></table></figure>Enable Cockpit:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable --now cockpit.socket</span><br></pre></td></tr></table></figure>Open the firewall:<a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --add-service=cockpit</span><br><span class="line">firewall-cmd --add-service=cockpit --permanent</span><br></pre></td></tr></table></figure>Access the Administration Portal using a web browser,log in with user name ‘admin’ and password at https://[Host IP or FQDN]:9090.<br>click Virtualization → Hosted Engine to add a host</li></ul><p>To be continued…</p>]]></content>
      
      
      
        <tags>
            
            <tag> Ovirt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git and github</title>
      <link href="/2019/09/09/git-and-github/"/>
      <url>/2019/09/09/git-and-github/</url>
      
        <content type="html"><![CDATA[<h4 id="Git-is-a-software-and-be-installed-on-different-OS-such-as-Linux-Mac-Windows-Github-is-a-web-server-which-provide-a-tool-for-people-to-use-on-a-website"><a href="#Git-is-a-software-and-be-installed-on-different-OS-such-as-Linux-Mac-Windows-Github-is-a-web-server-which-provide-a-tool-for-people-to-use-on-a-website" class="headerlink" title="Git is a software and be installed on different OS, such as Linux, Mac, Windows. Github is a web server which provide a tool for people to use on a website."></a>Git is a software and be installed on different OS, such as Linux, Mac, Windows. Github is a web server which provide a tool for people to use on a website.</h4><h5 id="on-Github"><a href="#on-Github" class="headerlink" title="on  Github"></a>on  Github</h5><p>Create a repository<br>Create a new file<br>Commit (same as save)<br>Issue (like comments)<br>Create an organization<br>Create branch<br>Pull request<br>Merge</p><h4 id="Most-of-the-time-you-need-to-work-on-your-local-machine-to-use-git-You-can-clone-your-repo-from-github"><a href="#Most-of-the-time-you-need-to-work-on-your-local-machine-to-use-git-You-can-clone-your-repo-from-github" class="headerlink" title="Most of the time, you need to work on your local machine to use git. You can clone your repo from github."></a>Most of the time, you need to work on your local machine to use git. You can clone your repo from github.</h4><h5 id="On-local-computer"><a href="#On-local-computer" class="headerlink" title="On local computer"></a>On local computer</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:vmnet8/Hello-World.git</span><br><span class="line">Cloning into &apos;Hello-World&apos;...</span><br><span class="line">remote: Enumerating objects: 4, done.</span><br><span class="line">remote: Counting objects: 100% (4/4), done.</span><br><span class="line">remote: Compressing objects: 100% (3/3), done.</span><br><span class="line">remote: Total 14 (delta 0), reused 0 (delta 0), pack-reused 10</span><br><span class="line">Receiving objects: 100% (14/14), done.</span><br><span class="line">Resolving deltas: 100% (1/1), done.</span><br><span class="line">Checking connectivity... done.</span><br></pre></td></tr></table></figure><p>make this a repo located on your local OS<br>compare with github repo you clone</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br><span class="line">On branch master</span><br><span class="line">Your branch is up-to-date with &apos;origin/master&apos;.</span><br><span class="line">nothing to commit, working directory clean</span><br></pre></td></tr></table></figure><h5 id="After-you-make-some-changes-on-your-local-computer-you-need-to-save-it-into-repo-it-is-not-just-save-it-needs-two-steps-to-“save”-into-repo-for-example-add-a-new-line-in-“README”"><a href="#After-you-make-some-changes-on-your-local-computer-you-need-to-save-it-into-repo-it-is-not-just-save-it-needs-two-steps-to-“save”-into-repo-for-example-add-a-new-line-in-“README”" class="headerlink" title="After you make some changes on your local computer, you need to save it into repo, it is not just save, it needs two steps to “save” into repo.for example, add a new line in “README”"></a>After you make some changes on your local computer, you need to save it into repo, it is not just save, it needs two steps to “save” into repo.for example, add a new line in “README”</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br><span class="line">On branch master</span><br><span class="line">Your branch is up-to-date with &apos;origin/master&apos;.</span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">    modified:   README.md</span><br><span class="line"></span><br><span class="line">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add README.md</span><br></pre></td></tr></table></figure><p>put this changed file to a stage to wait to be saved in the future.<br>any changes if want to be saved should be added to this stage first!</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git commit README.md -m &quot;add new line under bottom&quot;</span><br><span class="line">[master 37c5b60] add new line under bottom</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure><p>only done this, the changed can be “saved” into repo</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br><span class="line">origin  git@github.com:vmnet8/Hello-World.git (fetch)</span><br><span class="line">origin  git@github.com:vmnet8/Hello-World.git (push)</span><br></pre></td></tr></table></figure><p>Then you can make the changes you made on your local computer to sync to github repo</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git push origin master</span><br><span class="line">Counting objects: 3, done.</span><br><span class="line">Delta compression using up to 2 threads.</span><br><span class="line">Compressing objects: 100% (2/2), done.</span><br><span class="line">Writing objects: 100% (3/3), 302 bytes | 0 bytes/s, done.</span><br><span class="line">Total 3 (delta 1), reused 0 (delta 0)</span><br><span class="line">remote: Resolving deltas: 100% (1/1), completed with 1 local object.</span><br><span class="line">To git@github.com:vmnet8/Hello-World.git</span><br><span class="line">   efdcef9..37c5b60  master -&gt; master</span><br></pre></td></tr></table></figure><p>If you made changes on github first, how to get your local to sync to github repo?</p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">git pull origin master </span><br><span class="line">remote: Enumerating objects: 4, done.</span><br><span class="line">remote: Counting objects: 100% (4/4), done.</span><br><span class="line">remote: Compressing objects: 100% (3/3), done.</span><br><span class="line">remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0</span><br><span class="line">Unpacking objects: 100% (3/3), done.</span><br><span class="line">From github.com:vmnet8/Hello-World</span><br><span class="line"> * branch            master     -&gt; FETCH_HEAD</span><br><span class="line">   37c5b60..c99e3a4  master     -&gt; origin/master</span><br><span class="line">Updating 37c5b60..c99e3a4</span><br><span class="line">Fast-forward</span><br><span class="line"> new file from github | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"> create mode 100644 new file from github</span><br></pre></td></tr></table></figure><h4 id="Using-other-person’s-repo"><a href="#Using-other-person’s-repo" class="headerlink" title="Using other person’s repo"></a>Using other person’s repo</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:RainbowCoder/Rainbow-Song.git</span><br><span class="line">Cloning into &apos;Rainbow-Song&apos;...</span><br><span class="line">remote: Enumerating objects: 9, done.</span><br><span class="line">remote: Total 9 (delta 0), reused 0 (delta 0), pack-reused 9</span><br><span class="line">Receiving objects: 100% (9/9), done.</span><br><span class="line">Resolving deltas: 100% (1/1), done.</span><br><span class="line">Checking connectivity... done.</span><br></pre></td></tr></table></figure><p>you can just make changes on your local, but can’t push it to others repo.<br>You can sync from other’s repo, but just one direction, from others to your local, not from your change to others.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git pull origin master </span><br><span class="line">From github.com:RainbowCoder/Rainbow-Song</span><br><span class="line"> * branch            master     -&gt; FETCH_HEAD</span><br><span class="line">Already up-to-date.</span><br></pre></td></tr></table></figure><p>If you first fork others’s  repo  to your github, then clone your github url to your local, you can make changes and pull or push to your github. On your github you can pull request to the original repo.</p><h4 id="about-branch"><a href="#about-branch" class="headerlink" title="about branch"></a>about branch</h4><p>show the present branch you are</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git branch </span><br><span class="line">  branch_newfile</span><br><span class="line">* master</span><br></pre></td></tr></table></figure><p>change to other branch</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git checkout branch_newfile</span><br><span class="line">Switched to branch &apos;branch_newfile&apos;</span><br><span class="line">Your branch is up-to-date with &apos;origin/branch_newfile&apos;.</span><br></pre></td></tr></table></figure><p>If you want to see the commit history on local</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br><span class="line">commit a43ab8dd9725911488d4e33f4518e9c03c8ee538</span><br><span class="line">Merge: 12021a5 99e5eb0</span><br><span class="line">Author: Anna X &lt;vmnet8@gmail.com&gt;</span><br><span class="line">Date:   Sat Sep 7 17:06:46 2019 -0700</span><br><span class="line"></span><br><span class="line">    all</span><br><span class="line"></span><br><span class="line">commit 12021a54f4ab8be1dad823cf428e9b57cac98e0b</span><br><span class="line">Merge: 9dce990 eb4ac1f</span><br><span class="line">Author: Anna X &lt;vmnet8@gmail.com&gt;</span><br><span class="line">Date:   Sat Sep 7 16:41:52 2019 -0700</span><br><span class="line"></span><br><span class="line">    commit all changes</span><br></pre></td></tr></table></figure><h5 id="Make-a-repo-on-your-local-computer"><a href="#Make-a-repo-on-your-local-computer" class="headerlink" title="Make a repo on your local computer"></a>Make a repo on your local computer</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mkdir new_repo</span><br><span class="line">git init</span><br><span class="line">Initialized empty Git repository in /home/anna/github_repo/new_repo/.git/</span><br><span class="line">ll</span><br><span class="line">total 12</span><br><span class="line">drwxrwxr-x  3 anna anna 4096 Sep  9 12:34 .</span><br><span class="line">drwxrwxr-x 16 anna anna 4096 Sep  9 12:34 ..</span><br><span class="line">drwxrwxr-x  7 anna anna 4096 Sep  9 12:34 .git</span><br></pre></td></tr></table></figure><p>create a .git file under this dir, it means it created a repo<br>If you want to sync to github, just login your github account, create an empty repo. Then bond the local and github repo together.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git remote  add origin git@github.com:vmnet8/new_repo.git</span><br><span class="line">git remote -v</span><br><span class="line">origin  git@github.com:vmnet8/new_repo.git (fetch)</span><br><span class="line">origin  git@github.com:vmnet8/new_repo.git (push)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cyber Security: Some pen tests in Kali-Linux in Virtualbox</title>
      <link href="/2019/04/10/Cyber-Security-Some-pen-tests-in-Kali-Linux-in-Virtualbox/"/>
      <url>/2019/04/10/Cyber-Security-Some-pen-tests-in-Kali-Linux-in-Virtualbox/</url>
      
        <content type="html"><![CDATA[<h4 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract:"></a>Abstract:</h4><p>Install Virtualbox in computer system, in which to install Kali Linux, then try wireshark, nmap and crunch application. It shows a lot of security tools can be implemented correctly in Virtualbox.</p><h4 id="Methods"><a href="#Methods" class="headerlink" title="Methods:"></a>Methods:</h4><ol><li><p>Go to <a href="www.virtualbox.org">virtualbox page</a> to download the virtual 5.2.18 version, then install it based on wizard.</p></li><li><p>Search “kali OVA”, then go to official kali linux download page, select the “Kali Linux 64 bit Vbox”, click “offensive security download page” icon to select “Kali Linux 64 bit Ova” which is for Virtualbox, download it.</p></li><li><p>Open Virtual box,click “file” button then select “import application”, input the “kali 2018.3 ova” into the frame, then select the fold where the “kali linux 64 bit” you have download before, then open it.</p></li><li><p>Select the “OS Redhat 64 bit”, choose all other items  as defaults, such as sound card, network adapter card etc, then click “import”. Waiting a couple minutes to finish installing. After installation, you can see “kali 2018.3” icon on the Virtualbox panel.</p></li><li><p>Double click the “kali 2018.3”, it will start to boot, just taking defaults. Input the username “root” and password “toor” to log in Kali.</p><a id="more"></a></li><li><p>Click the top panel of Kali, select firefox browser to input “google” to create some packets, then click No.9 sniffing and spoofing to select wireshark to open it. Ignore the Lua message,then click the “eth0”.</p></li><li><p>Using Kali terminal to input command “ping 192.168.0.1” to connect router.</p></li><li><p>Check the wireshark, stop it and capture the packets.</p></li><li><p>Input “ifconfig eth0” command in Kali terminal, get the information of ip address 10.2.0.15, then go to wireshark to capture the packets. Input the “ICMP” into wireshark frame to observe just ICMP packets. then save it and get a screenshot.</p></li><li><p>In Kali machine to click nmap application. Then in terminal command line to input “nmap -v -A scanme.nmap.org” command to do OS detection and version detection, script detection of “scanme.nmap.org”,  meanwhile in wireshark to start a new packet capture. using filter to limit the packets both to and from 45.33.32.156 in and out this virtual machine.  Get a screenshot from wireshark.</p></li><li><p>In Kali click the “crunch” application, which can create a wordlist based on your criteria, then you can use this wordlist to a file or a program.</p></li></ol><p>In terminal line, input “crunch 1 2 &gt; /tmp/wordlist” to test this application.</p><h4 id="Results"><a href="#Results" class="headerlink" title="Results:"></a>Results:</h4><img src="/2019/04/10/Cyber-Security-Some-pen-tests-in-Kali-Linux-in-Virtualbox/pic1.jpg" class=""><p>“Ping 192.168.0.1” command can get the response from router. It shows packets can successfully go through from virtual machine to out router.  After paused the wireshark, narrow down to ICMP, wireshark shows there are totally 98 bytes, displayed 98 bytes, no dropped between 192.168.0.1 and 10.0.2.15.It shows the packets to and from inside and outside.</p><img src="/2019/04/10/Cyber-Security-Some-pen-tests-in-Kali-Linux-in-Virtualbox/pic2.jpg" class=""><p>After filter the packets just between the 10.0.2.15 and 45.33.32.156 (scanme.nmap.org) it shows 99.6% displayed which are 2828 packets in the wireshark capture screenshot.It also shows using TCP protocol to visit the <a href="www.scanme.nmap.org">www.scanme.nmap.ogr</a> successfully.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crunch 1 2 &gt; /tmp/wordlisttest</span><br></pre></td></tr></table></figure><p>It  generated a wordlist starts from “a”, ends to “zz”, then save it as a file named “wordlisttest” in tmp folder in Kali linux.</p><img src="/2019/04/10/Cyber-Security-Some-pen-tests-in-Kali-Linux-in-Virtualbox/pic3.jpg" class=""><p>Virtualbox is a powerful application on which a lot of machine can run. In Kali, Nmap has command line interface, which is easy to use compared to GUI interface.</p>]]></content>
      
      
      
        <tags>
            
            <tag> cyber security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux: key points of raid</title>
      <link href="/2019/03/02/Linux-key-points-of-raid/"/>
      <url>/2019/03/02/Linux-key-points-of-raid/</url>
      
        <content type="html"><![CDATA[<p>RAID stands for “Redundant Array of Independent Disks”.</p><h4 id="The-RAID-levels"><a href="#The-RAID-levels" class="headerlink" title="The RAID levels"></a>The RAID levels</h4><p>Raid 0: stripe mode,no redundancy in this level,not safe for storage.<br>Raid 1: mirror mode,having redundancy and good at backup.<br>Raid 1+0:it is the combination of RAID-1 and RAID-0.<br>Raid 5: at least 3 disks, can stand max 1 disk broken<br>Raid 6:at least 4 disks, can stand max 2 disks broken</p><h4 id="config-file"><a href="#config-file" class="headerlink" title="config file"></a>config file</h4><p>/etc/mdadm.conf<br>/proc/mdstat </p><h4 id="Create"><a href="#Create" class="headerlink" title="Create"></a>Create</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@client ~]# mdadm --create /dev/md0 --auto=yes --level=5 --raid-devices=3 --chunk=64 /dev/sdb&#123;2,3,4&#125;</span><br><span class="line">mdadm: Defaulting to version 1.2 metadata</span><br><span class="line">mdadm: array /dev/md0 started.</span><br><span class="line">[root@client ~]# mkfs.xfs /dev/md0</span><br><span class="line">meta-data=/dev/md0               isize=512    agcount=8, agsize=65456 blks</span><br><span class="line">         =                       sectsz=512   attr=2, projid32bit=1</span><br><span class="line">         =                       crc=1        finobt=0, sparse=0</span><br><span class="line">data     =                       bsize=4096   blocks=523648, imaxpct=25</span><br><span class="line">         =                       sunit=16     swidth=32 blks</span><br><span class="line">naming   =version 2              bsize=4096   ascii-ci=0 ftype=1</span><br><span class="line">log      =internal log           bsize=4096   blocks=2560, version=2</span><br><span class="line">         =                       sectsz=512   sunit=16 blks, lazy-count=1</span><br><span class="line">realtime =none                   extsz=4096   blocks=0, rtextents=0</span><br><span class="line">[root@client mnt]# mkdir raid_md0</span><br><span class="line">[root@client mnt]# mount /dev/md0 /mnt/raid_md0/</span><br><span class="line">[root@client mnt]# df -h /dev/md0</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/md0        2.0G   33M  2.0G   2% /mnt/raid_md0</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="check-the-status"><a href="#check-the-status" class="headerlink" title="check the status"></a>check the status</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@client ~]# cat /proc/mdstat </span><br><span class="line">Personalities : [raid6] [raid5] [raid4] </span><br><span class="line">md0 : active raid5 sdb4[3] sdb3[1] sdb2[0]</span><br><span class="line">      2095104 blocks super 1.2 level 5, 64k chunk, algorithm 2 [3/3] [UUU]</span><br><span class="line">      </span><br><span class="line">unused devices: &lt;none&gt;</span><br><span class="line">[root@client ~]# mdadm --detail /dev/md0</span><br><span class="line">/dev/md0:</span><br><span class="line">        Version : 1.2</span><br><span class="line">     Raid Level : raid5</span><br><span class="line">     Array Size : 2095104 (2046.00 MiB 2145.39 MB)</span><br><span class="line">  Used Dev Size : 1047552 (1023.00 MiB 1072.69 MB)</span><br><span class="line">   Raid Devices : 3</span><br><span class="line">  Total Devices : 3</span><br><span class="line">    Persistence : Superblock is persistent</span><br><span class="line"></span><br><span class="line">          State : clean </span><br><span class="line"> Active Devices : 3</span><br><span class="line">Working Devices : 3</span><br><span class="line"> Failed Devices : 0</span><br><span class="line">  Spare Devices : 0</span><br><span class="line"></span><br><span class="line">         Layout : left-symmetric</span><br><span class="line">     Chunk Size : 64K</span><br><span class="line"></span><br><span class="line">           Name : client.centos7.study:0  (local to host client.centos7.study)</span><br><span class="line">           UUID : add4f325:d589a29e:1f234b1b:309885ff</span><br><span class="line">         Events : 18</span><br><span class="line"></span><br><span class="line">    Number   Major   Minor   RaidDevice State</span><br><span class="line">       0       8       18        0      active sync   /dev/sdb2</span><br><span class="line">       1       8       19        1      active sync   /dev/sdb3</span><br><span class="line">       3       8       20        2      active sync   /dev/sdb4</span><br></pre></td></tr></table></figure><p>If mount md0 permanently, need to know md0 UUID</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@client mnt]# mdadm  --detail /dev/md0  |grep -i uuid</span><br><span class="line">           UUID : add4f325:d589a29e:1f234b1b:309885ff</span><br><span class="line">[root@client mnt]# vim /etc/mdadm.conf</span><br><span class="line">ARRAY /dev/md0 UUID : add4f325:d589a29e:1f234b1b:309885ff</span><br><span class="line">[root@client mnt]# blkid /dev/md0</span><br><span class="line">/dev/md0: UUID=&quot;acf71d8f-8027-49fc-b3dd-fe6d89f3491f&quot; TYPE=&quot;xfs&quot;</span><br><span class="line">[root@client mnt]# vim /etc/fstab</span><br><span class="line">UUID=&quot;acf71d8f-8027-49fc-b3dd-fe6d89f3491f&quot;    /mnt/raid_md0  xfs defaults  0 0</span><br><span class="line">[root@client mnt]# mount -a</span><br></pre></td></tr></table></figure><h4 id="Close-raid"><a href="#Close-raid" class="headerlink" title="Close raid"></a>Close raid</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line">[root@client mnt]# umount /dev/md0</span><br><span class="line">[root@client ~]# mdadm --manage /dev/md0 --fail /dev/sdb2</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and UUID</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and :</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and add4f325:d589a29e:1f234b1b:309885ff</span><br><span class="line">mdadm: ARRAY line /dev/md0 has no identity information.</span><br><span class="line">mdadm: set /dev/sdb2 faulty in /dev/md0</span><br><span class="line">[root@client ~]# mdadm --manage /dev/md0 --fail /dev/sdb3</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and UUID</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and :</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and add4f325:d589a29e:1f234b1b:309885ff</span><br><span class="line">mdadm: ARRAY line /dev/md0 has no identity information.</span><br><span class="line">mdadm: set /dev/sdb3 faulty in /dev/md0</span><br><span class="line">[root@client ~]# mdadm --manage /dev/md0 --fail /dev/sdb4</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and UUID</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and :</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and add4f325:d589a29e:1f234b1b:309885ff</span><br><span class="line">mdadm: ARRAY line /dev/md0 has no identity information.</span><br><span class="line">mdadm: set /dev/sdb4 faulty in /dev/md0</span><br><span class="line">[root@client ~]# mdadm --detail /dev/md0</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and UUID</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and :</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and add4f325:d589a29e:1f234b1b:309885ff</span><br><span class="line">mdadm: ARRAY line /dev/md0 has no identity information.</span><br><span class="line">/dev/md0:</span><br><span class="line">        Version : 1.2</span><br><span class="line">  Creation Time : Wed Jul 17 11:37:14 2019</span><br><span class="line">     Raid Level : raid5</span><br><span class="line">     Array Size : 2095104 (2046.00 MiB 2145.39 MB)</span><br><span class="line">  Used Dev Size : 1047552 (1023.00 MiB 1072.69 MB)</span><br><span class="line">   Raid Devices : 3</span><br><span class="line">  Total Devices : 3</span><br><span class="line">    Persistence : Superblock is persistent</span><br><span class="line"></span><br><span class="line">    Update Time : Wed Jul 17 12:53:53 2019</span><br><span class="line">          State : clean, FAILED </span><br><span class="line"> Active Devices : 0</span><br><span class="line"> Failed Devices : 3</span><br><span class="line">  Spare Devices : 0</span><br><span class="line"></span><br><span class="line">         Layout : left-symmetric</span><br><span class="line">     Chunk Size : 64K</span><br><span class="line"></span><br><span class="line">    Number   Major   Minor   RaidDevice State</span><br><span class="line">       -       0        0        0      removed</span><br><span class="line">       -       0        0        1      removed</span><br><span class="line">       -       0        0        2      removed</span><br><span class="line"></span><br><span class="line">       0       8       18        -      faulty   /dev/sdb2</span><br><span class="line">       1       8       19        -      faulty   /dev/sdb3</span><br><span class="line">       3       8       20        -      faulty   /dev/sdb4</span><br><span class="line">[root@client ~]# mdadm --manage /dev/md0 --remove /dev/sdb2</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and UUID</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and :</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and add4f325:d589a29e:1f234b1b:309885ff</span><br><span class="line">mdadm: ARRAY line /dev/md0 has no identity information.</span><br><span class="line">mdadm: hot removed /dev/sdb2 from /dev/md0</span><br><span class="line">[root@client ~]# mdadm --manage /dev/md0 --remove /dev/sdb3</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and UUID</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and :</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and add4f325:d589a29e:1f234b1b:309885ff</span><br><span class="line">mdadm: ARRAY line /dev/md0 has no identity information.</span><br><span class="line">mdadm: hot removed /dev/sdb3 from /dev/md0</span><br><span class="line">[root@client ~]# mdadm --manage /dev/md0 --remove /dev/sdb4</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and UUID</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and :</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and add4f325:d589a29e:1f234b1b:309885ff</span><br><span class="line">mdadm: ARRAY line /dev/md0 has no identity information.</span><br><span class="line">mdadm: hot removed /dev/sdb4 from /dev/md0</span><br><span class="line">[root@client ~]# mdadm --detail /dev/md0</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and UUID</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and :</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and add4f325:d589a29e:1f234b1b:309885ff</span><br><span class="line">mdadm: ARRAY line /dev/md0 has no identity information.</span><br><span class="line">/dev/md0:</span><br><span class="line">        Version : 1.2</span><br><span class="line">  Creation Time : Wed Jul 17 11:37:14 2019</span><br><span class="line">     Raid Level : raid5</span><br><span class="line">     Array Size : 2095104 (2046.00 MiB 2145.39 MB)</span><br><span class="line">  Used Dev Size : 1047552 (1023.00 MiB 1072.69 MB)</span><br><span class="line">   Raid Devices : 3</span><br><span class="line">  Total Devices : 0</span><br><span class="line">    Persistence : Superblock is persistent</span><br><span class="line"></span><br><span class="line">    Update Time : Wed Jul 17 12:55:39 2019</span><br><span class="line">          State : clean, FAILED </span><br><span class="line"> Active Devices : 0</span><br><span class="line"> Failed Devices : 0</span><br><span class="line">  Spare Devices : 0</span><br><span class="line"></span><br><span class="line">         Layout : left-symmetric</span><br><span class="line">     Chunk Size : 64K</span><br><span class="line"></span><br><span class="line">    Number   Major   Minor   RaidDevice State</span><br><span class="line">       -       0        0        0      removed</span><br><span class="line">       -       0        0        1      removed</span><br><span class="line">       -       0        0        2      removed</span><br><span class="line">[root@client ~]# mdadm --stop /dev/md0</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and UUID</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and :</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and add4f325:d589a29e:1f234b1b:309885ff</span><br><span class="line">mdadm: ARRAY line /dev/md0 has no identity information.</span><br><span class="line">mdadm: stopped /dev/md0</span><br><span class="line">[root@client ~]# mdadm --detail /dev/md0</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and UUID</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and :</span><br><span class="line">mdadm: only give one device per ARRAY line: /dev/md0 and add4f325:d589a29e:1f234b1b:309885ff</span><br><span class="line">mdadm: ARRAY line /dev/md0 has no identity information.</span><br><span class="line">mdadm: cannot open /dev/md0: No such file or directory</span><br><span class="line">[root@client ~]# cat /proc/mdstat </span><br><span class="line">Personalities : [raid6] [raid5] [raid4] </span><br><span class="line">unused devices: &lt;none&gt;</span><br><span class="line">[root@client ~]# lsblk</span><br><span class="line">NAME                         MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sdb                            8:16   0 29.9G  0 disk </span><br><span class="line">├─sdb1                         8:17   0    2G  0 part </span><br><span class="line">│ ├─thin_vg-thinpool_tmeta   253:4    0    4M  0 lvm  </span><br><span class="line">│ │ └─thin_vg-thinpool-tpool 253:6    0    1G  0 lvm  </span><br><span class="line">│ │   ├─thin_vg-thinpool     253:7    0    1G  0 lvm  </span><br><span class="line">│ │   └─thin_vg-annathin1    253:8    0   10G  0 lvm  </span><br><span class="line">│ └─thin_vg-thinpool_tdata   253:5    0    1G  0 lvm  </span><br><span class="line">│   └─thin_vg-thinpool-tpool 253:6    0    1G  0 lvm  </span><br><span class="line">│     ├─thin_vg-thinpool     253:7    0    1G  0 lvm  </span><br><span class="line">│     └─thin_vg-annathin1    253:8    0   10G  0 lvm  </span><br><span class="line">├─sdb2                         8:18   0    1G  0 part </span><br><span class="line">├─sdb3                         8:19   0    1G  0 part </span><br><span class="line">└─sdb4                         8:20   0    1G  0 part </span><br><span class="line">sdc                            8:32   0   40G  0 disk </span><br><span class="line">sr0                           11:0    1 1024M  0 rom  </span><br><span class="line">[root@client ~]# vim /etc/mdadm.conf</span><br><span class="line">#ARRAY /dev/md0 UUID : add4f325:d589a29e:1f234b1b:309885ff</span><br><span class="line">[root@client ~]# vim /etc/fstab</span><br><span class="line">#UUID=&quot;acf71d8f-8027-49fc-b3dd-fe6d89f3491f&quot;    /mnt/raid_md0  xfs defaults  0 0</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cyber Security: Using Nmap-zenmap and Wireshark to do pen test</title>
      <link href="/2019/02/27/Cyber-Security-Using-Nmap-zenmap-and-Wireshark-to-do-pen-test/"/>
      <url>/2019/02/27/Cyber-Security-Using-Nmap-zenmap-and-Wireshark-to-do-pen-test/</url>
      
        <content type="html"><![CDATA[<h4 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract:"></a>Abstract:</h4><p>Using Zenmap, enumerating 2 IP address to scan, Using Wireshark to observe the TCP handshake process when enumerating 2 IP addresses with Zenmap.</p><h4 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction:"></a>Introduction:</h4><p>Scan 2 IP with Zenmap and use Wireshark to observe the TCP handshake.</p><h4 id="Methods"><a href="#Methods" class="headerlink" title="Methods:"></a>Methods:</h4><ol><li><p>Go to <a href="www.nmap.org">nmap page</a> to download zenmap application.</p></li><li><p>Open Wireshark to see the Wi_Fi wiggling wave, it shows capturing the packets, then click it.</p></li><li><p>Open Zenmap, input first IP address 192.168.227.187 into “target” frame, then select “quick scan” to see what will happen.</p></li><li><p>go to Wireshark to stop and save it for first IP scan.</p></li><li><p>go back to Zenmap to input other IP address into “target” frame, do quick scan again.</p></li><li><p>In Wireshark, select the source and destination IP address 192.168.0.1 to observe the captured packets, analyze the TCP handshake process.</p><a id="more"></a><h4 id="Results"><a href="#Results" class="headerlink" title="Results:"></a>Results:</h4></li></ol><p>For the 192.168.227.187 address, zenmap quickly scanned 100 ports, 98 ports are closed, port 22 and port 10000 are open.</p><img src="/2019/02/27/Cyber-Security-Using-Nmap-zenmap-and-Wireshark-to-do-pen-test/ports_open.jpg" class=""><p>For the 192.168.0.1, Zenmap shows there are 4 ports open, they are ports 53,80, 8080, 8443.</p><img src="/2019/02/27/Cyber-Security-Using-Nmap-zenmap-and-Wireshark-to-do-pen-test/4_ports_open.jpg" class=""><p>In Wireshark, observing the packets from 192.168.0.1, it  shows the synchronized three way handshake.</p><p>a. from the source 192.168.0.140 sent the request to 192.168.0.1, the flag is SYN<br>b. from the destination 192.168.0.1 to 192.168.0.140, it acknowledges that it receives the request and at the same time, closed the socket. The flag is RST ACK.</p><img src="/2019/02/27/Cyber-Security-Using-Nmap-zenmap-and-Wireshark-to-do-pen-test/two_way_shakehands.jpg" class=""><p>Also notice some requests from 192.168.0.140 to 192.168.0.1  didn’t get acknowledge from the destination port</p><h4 id="Discussion"><a href="#Discussion" class="headerlink" title="Discussion:"></a>Discussion:</h4><p>Sometimes there is no “three” handshakes, only “two” handshakes, because the host B is going to close the sockets after it acknowledge the packets that were sent from the host A.</p>]]></content>
      
      
      
        <tags>
            
            <tag> cyber security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cyber Security: using wireshark to trace packets</title>
      <link href="/2019/02/19/Cyber-Security-using-wireshark-to-trace-packets/"/>
      <url>/2019/02/19/Cyber-Security-using-wireshark-to-trace-packets/</url>
      
        <content type="html"><![CDATA[<p>Wireshark is a network packet analyzer. It will try to capture network packets and tries to display that packet data as detailed as possible.</p><h4 id="Abstract-Install-Wireshark-and-use-it-to-trace-the-packet-I-generated-find-my-IP-address"><a href="#Abstract-Install-Wireshark-and-use-it-to-trace-the-packet-I-generated-find-my-IP-address" class="headerlink" title="Abstract: Install Wireshark and use it to trace the packet I generated, find my IP address."></a>Abstract: Install Wireshark and use it to trace the packet I generated, find my IP address.</h4><h4 id="Methods"><a href="#Methods" class="headerlink" title="Methods:"></a>Methods:</h4><ol><li><p>Go to <a href="www.wireshark.org">wireshark pages</a>, read some basic knowledge of wireshark, then download <a href="https://1.na.dl.wireshark.org/win64/Wireshark-win64-3.0.2.exe" target="_blank" rel="noopener">wireshark Windows Installer(64-bit)</a>, according to the instructions to install it on my windows operating system.</p></li><li><p>go to desktop to open Wireshark up, double click “*Wi-Fi” link,it will show a “Capturing from my local area connection” to see the packets captured here.</p></li><li><p>Open a browser and input a website, such as <a href="http://www.qwerty.com" target="_blank" rel="noopener">www.qwerty.com</a> to generate the traffic.</p><a id="more"></a></li><li><p>Go back to wireshark to toolbar to click the red button “stop”.</p></li><li><p>Save this screen to my computer as “wireshark_1.pcapng”</p></li><li><p>go to wireshark tool bar to open “view-time display format” to choose “seconds since previous displayed packets”</p></li><li><p>go to the toolbar to open “edit-find packet” in search frame to input “qwerty”, select the “string” to narrow the search, or you can just input “dns” as search key to see what is the output is. I also click the Proctol HTTP to follow the stream.</p></li><li><p>take a screenshot</p><img src="/2019/02/19/Cyber-Security-using-wireshark-to-trace-packets/packets_captured.jpg" class=""></li><li><p>go to windows command to input “ipconfig /all “ command to get my ip address 192.168.0.140</p></li><li><p>take a screenshot</p><img src="/2019/02/19/Cyber-Security-using-wireshark-to-trace-packets/my_ip_address.jpg" class=""></li></ol><h4 id="Results"><a href="#Results" class="headerlink" title="Results:"></a>Results:</h4><p>I found my IP address in Wireshark trace<br>I also found the packets from the website I just visited and follow its HTTP stream.</p>]]></content>
      
      
      
        <tags>
            
            <tag> cyber security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux: LVM thin volume and snapshot</title>
      <link href="/2019/02/12/Linux-LVM-thin-volume-and-snapshot/"/>
      <url>/2019/02/12/Linux-LVM-thin-volume-and-snapshot/</url>
      
        <content type="html"><![CDATA[<p>LVM: logical volume manager</p><p>Advantage: give more flexible of space</p><h4 id="LVM-thin-volume"><a href="#LVM-thin-volume" class="headerlink" title="LVM thin volume"></a>LVM thin volume</h4><p>Create thin pool first</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@client ~]# lvcreate -L 1G -T thin_vg/thinpool</span><br><span class="line">  Using default stripesize 64.00 KiB.</span><br><span class="line">  Logical volume &quot;thinpool&quot; created.</span><br><span class="line">[root@client ~]# lvdisplay thin_vg/thinpool</span><br><span class="line">  --- Logical volume ---</span><br><span class="line">  LV Name                thinpool</span><br><span class="line">  VG Name                thin_vg</span><br><span class="line">  LV UUID                ncc3Kh-eZgD-WLQn-F4cq-pPJJ-rYjD-XsTx34</span><br><span class="line">  LV Write Access        read/write</span><br><span class="line">  LV Creation host, time client.centos7.study, 2019-07-12 13:02:42 -0700</span><br><span class="line">  LV Pool metadata       thinpool_tmeta</span><br><span class="line">  LV Pool data           thinpool_tdata</span><br><span class="line">  LV Status              available</span><br><span class="line">  # open                 0</span><br><span class="line">  LV Size                1.00 GiB</span><br><span class="line">  Allocated pool data    0.00%</span><br><span class="line">  Allocated metadata     0.98%</span><br><span class="line">  Current LE             256</span><br><span class="line">  Segments               1</span><br><span class="line">  Allocation             inherit</span><br><span class="line">  Read ahead sectors     auto</span><br><span class="line">  - currently set to     8192</span><br><span class="line">  Block device           253:6</span><br></pre></td></tr></table></figure><a id="more"></a><p>Create a thin1 on thinpool</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">[root@client ~]# lvcreate -V 10G -T thin_vg/thinpool -n annathin1</span><br><span class="line">  Using default stripesize 64.00 KiB.</span><br><span class="line">  WARNING: Sum of all thin volume sizes (10.00 GiB) exceeds the size of thin pool thin_vg/thinpool and the size of whole volume group (2.00 GiB)!</span><br><span class="line">  For thin pool auto extension activation/thin_pool_autoextend_threshold should be below 100.</span><br><span class="line">  Logical volume &quot;annathin1&quot; created.</span><br><span class="line">[root@client ~]# lvdisplay thin_vg</span><br><span class="line">  --- Logical volume ---</span><br><span class="line">  LV Name                thinpool</span><br><span class="line">  VG Name                thin_vg</span><br><span class="line">  LV UUID                ncc3Kh-eZgD-WLQn-F4cq-pPJJ-rYjD-XsTx34</span><br><span class="line">  LV Write Access        read/write</span><br><span class="line">  LV Creation host, time client.centos7.study, 2019-07-12 13:02:42 -0700</span><br><span class="line">  LV Pool metadata       thinpool_tmeta</span><br><span class="line">  LV Pool data           thinpool_tdata</span><br><span class="line">  LV Status              available</span><br><span class="line">  # open                 2</span><br><span class="line">  LV Size                1.00 GiB</span><br><span class="line">  Allocated pool data    0.00%</span><br><span class="line">  Allocated metadata     1.07%</span><br><span class="line">  Current LE             256</span><br><span class="line">  Segments               1</span><br><span class="line">  Allocation             inherit</span><br><span class="line">  Read ahead sectors     auto</span><br><span class="line">  - currently set to     8192</span><br><span class="line">  Block device           253:6</span><br><span class="line">   </span><br><span class="line">  --- Logical volume ---</span><br><span class="line">  LV Path                /dev/thin_vg/annathin1</span><br><span class="line">  LV Name                annathin1</span><br><span class="line">  VG Name                thin_vg</span><br><span class="line">  LV UUID                q47tG0-P2xf-CMsw-a2tE-SgWl-gjni-VJD1jA</span><br><span class="line">  LV Write Access        read/write</span><br><span class="line">  LV Creation host, time client.centos7.study, 2019-07-12 13:09:12 -0700</span><br><span class="line">  LV Pool name           thinpool</span><br><span class="line">  LV Status              available</span><br><span class="line">  # open                 0</span><br><span class="line">  LV Size                10.00 GiB</span><br><span class="line">  Mapped size            0.00%</span><br><span class="line">  Current LE             2560</span><br><span class="line">  Segments               1</span><br><span class="line">  Allocation             inherit</span><br><span class="line">  Read ahead sectors     auto</span><br><span class="line">  - currently set to     8192</span><br><span class="line">  Block device           253:8</span><br><span class="line">[root@client /]# mkfs.xfs /dev/thin_vg/annathin1 </span><br><span class="line">meta-data=/dev/thin_vg/annathin1 isize=512    agcount=16, agsize=163824 blks</span><br><span class="line">         =                       sectsz=512   attr=2, projid32bit=1</span><br><span class="line">         =                       crc=1        finobt=0, sparse=0</span><br><span class="line">data     =                       bsize=4096   blocks=2621184, imaxpct=25</span><br><span class="line">         =                       sunit=16     swidth=16 blks</span><br><span class="line">naming   =version 2              bsize=4096   ascii-ci=0 ftype=1</span><br><span class="line">log      =internal log           bsize=4096   blocks=2560, version=2</span><br><span class="line">         =                       sectsz=512   sunit=16 blks, lazy-count=1</span><br><span class="line">realtime =none                   extsz=4096   blocks=0, rtextents=0</span><br><span class="line">[root@client /]# mkdir /mnt/annathin1</span><br><span class="line">[root@client /]# mount /dev/thin_vg/annathin1 /mnt/annathin1/</span><br><span class="line">[root@client /]# df -Th /mnt/annathin1</span><br><span class="line">Filesystem                    Type      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/thin_vg-annathin1 xfs        10G   33M   10G   1% /mnt/annathin1</span><br></pre></td></tr></table></figure><p>copy some files to  annathin1</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@client ]# cp -a /etc/vsftpd/ /mnt/annathin1/</span><br><span class="line">[root@client ]# cp -a /usr/share/doc/man-db-2.6.3/  /mnt/annathin1/</span><br><span class="line">[root@client annathin1]# ll</span><br><span class="line">total 0</span><br><span class="line">drwxr-xr-x. 2 root root 113 Jun  2  2017 man-db-2.6.3</span><br><span class="line">drwxr-xr-x. 2 root root 128 Apr  4 12:46 vsftpd</span><br><span class="line">[root@client ~]# df -Th /mnt/annathin1/</span><br><span class="line">Filesystem                    Type  Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/thin_vg-annathin1 xfs    10G   34M   10G   1% /mnt/annathin1</span><br></pre></td></tr></table></figure><p>The vg thin_vg actually  only has 1G, but it shows 10G after create thinpool. That is the magical of LVM thinpool.<br>Note: users are not supposed to exceed actual 1G volume even though it shows having 10G volume, otherwise  it will destory the filesystem!</p><h4 id="LVM-snapshot"><a href="#LVM-snapshot" class="headerlink" title="LVM snapshot"></a>LVM snapshot</h4><p>create a snapshot for annathin1</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">[root@client ~]# lvcreate -s -l 99 -n  thinpool_snapshot  /dev/thin_vg/annathin1</span><br><span class="line">  Using default stripesize 64.00 KiB.</span><br><span class="line">  WARNING: Sum of all thin volume sizes (10.00 GiB) exceeds the size of thin pools and the size of whole volume group (2.00 GiB)!</span><br><span class="line">  For thin pool auto extension activation/thin_pool_autoextend_threshold should be below 100.</span><br><span class="line">  Logical volume &quot;thinpool_snapshot&quot; created.</span><br><span class="line">[root@client ~]# lvdisplay /dev/thin_vg/thinpool_snapshot </span><br><span class="line">  --- Logical volume ---</span><br><span class="line">  LV Path                /dev/thin_vg/thinpool_snapshot</span><br><span class="line">  LV Name                thinpool_snapshot</span><br><span class="line">  VG Name                thin_vg</span><br><span class="line">  LV UUID                4fYojx-SvHi-5IVX-aoIk-RxpD-8Nlb-1hHK3g</span><br><span class="line">  LV Write Access        read/write</span><br><span class="line">  LV Creation host, time client.centos7.study, 2019-07-14 17:01:32 -0700</span><br><span class="line">  LV snapshot status     active destination for annathin1</span><br><span class="line">  LV Status              available</span><br><span class="line">  # open                 0</span><br><span class="line">  LV Size                10.00 GiB</span><br><span class="line">  Current LE             2560</span><br><span class="line">  COW-table size         396.00 MiB</span><br><span class="line">  COW-table LE           99</span><br><span class="line">  Allocated to snapshot  0.02%</span><br><span class="line">  Snapshot chunk size    4.00 KiB</span><br><span class="line">  Segments               1</span><br><span class="line">  Allocation             inherit</span><br><span class="line">  Read ahead sectors     auto</span><br><span class="line">  - currently set to     8192</span><br><span class="line">  Block device           253:11</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@client ~]# lvdisplay /dev/thin_vg/annathin1 </span><br><span class="line">  --- Logical volume ---</span><br><span class="line">  LV Path                /dev/thin_vg/annathin1</span><br><span class="line">  LV Name                annathin1</span><br><span class="line">  VG Name                thin_vg</span><br><span class="line">  LV UUID                q47tG0-P2xf-CMsw-a2tE-SgWl-gjni-VJD1jA</span><br><span class="line">  LV Write Access        read/write</span><br><span class="line">  LV Creation host, time client.centos7.study, 2019-07-12 13:09:12 -0700</span><br><span class="line">  LV snapshot status     source of</span><br><span class="line">                         thinpool_snapshot [active]</span><br><span class="line">  LV Pool name           thinpool</span><br><span class="line">  LV Status              available</span><br><span class="line">  # open                 1</span><br><span class="line">  LV Size                10.00 GiB</span><br><span class="line">  Mapped size            0.12%</span><br><span class="line">  Current LE             2560</span><br><span class="line">  Segments               1</span><br><span class="line">  Allocation             inherit</span><br><span class="line">  Read ahead sectors     auto</span><br><span class="line">  - currently set to     8192</span><br><span class="line">  Block device           253:8</span><br></pre></td></tr></table></figure><p>Mount</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@client /]# mkdir  /mnt/snapshot</span><br><span class="line">[root@client snapshot]# blkid</span><br><span class="line">/dev/mapper/thin_vg-annathin1: UUID=&quot;93b48865-b28d-4e2e-b76e-893e804d944c&quot; TYPE=&quot;xfs&quot; </span><br><span class="line">/dev/mapper/thin_vg-thinpool_snapshot: UUID=&quot;93b48865-b28d-4e2e-b76e-893e804d944c&quot; TYPE=&quot;xfs&quot;</span><br><span class="line">[root@client /]# mount -o nouuid /dev/thin_vg/thinpool_snapshot  /mnt/snapshot</span><br><span class="line">[root@client /]# df -Th</span><br><span class="line">Filesystem                            Type      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/thin_vg-annathin1         xfs        10G   34M   10G   1% /mnt/annathin1</span><br><span class="line">/dev/mapper/thin_vg-thinpool_snapshot xfs        10G   34M   10G   1% /mnt/snapshot</span><br></pre></td></tr></table></figure><p>Due to snapshot, /dev/thin_vg/annathin1 and /dev/thin_vg/thinpool_snapshot have same uuid. When mount to  mount point, users need to use “nouuid” arguments.</p><h4 id="make-some-changes-on-the-mnt-annathin1-dir"><a href="#make-some-changes-on-the-mnt-annathin1-dir" class="headerlink" title="make some changes on the /mnt/annathin1 dir"></a>make some changes on the /mnt/annathin1 dir</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@client man-db-2.6.3]# rm ChangeLog</span><br><span class="line">rm: remove regular file ‘ChangeLog’?</span><br><span class="line">[root@client man-db-2.6.3]# df -Th /mnt/annathin1/ /mnt/snapshot/</span><br><span class="line">Filesystem                            Type  Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/thin_vg-annathin1         xfs    10G   33M   10G   1% /mnt/annathin1</span><br><span class="line">/dev/mapper/thin_vg-thinpool_snapshot xfs    10G   34M   10G   1% /mnt/snapshot</span><br></pre></td></tr></table></figure><p>check the status  of snapshot after doing the change on the original annathin1 dir</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@client man-db-2.6.3]# lvdisplay /dev/thin_vg/thinpool_snapshot </span><br><span class="line">  --- Logical volume ---</span><br><span class="line">  LV Path                /dev/thin_vg/thinpool_snapshot</span><br><span class="line">  LV Name                thinpool_snapshot</span><br><span class="line">  VG Name                thin_vg</span><br><span class="line">  LV UUID                eT1j03-4v5E-7fUi-BSV0-6dun-RCL1-fy9atx</span><br><span class="line">  LV Write Access        read/write</span><br><span class="line">  LV Creation host, time client.centos7.study, 2019-07-14 17:18:16 -0700</span><br><span class="line">  LV snapshot status     active destination for annathin1</span><br><span class="line">  LV Status              available</span><br><span class="line">  # open                 1</span><br><span class="line">  LV Size                10.00 GiB</span><br><span class="line">  Current LE             2560</span><br><span class="line">  COW-table size         396.00 MiB</span><br><span class="line">  COW-table LE           99</span><br><span class="line">  Allocated to snapshot  0.52%</span><br><span class="line">  Snapshot chunk size    4.00 KiB</span><br><span class="line">  Segments               1</span><br><span class="line">  Allocation             inherit</span><br><span class="line">  Read ahead sectors     auto</span><br><span class="line">  - currently set to     8192</span><br><span class="line">  Block device           253:11</span><br></pre></td></tr></table></figure><p>It shows the snapshot has been used 0.52%</p><p>next, we will restore annathin1 by snapshot, we will backup snapshot first.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@client ~]# xfsdump -l 0 -L lvm1 -M lvm1 -f /tmp/backup.lvm    /mnt/snapshot</span><br><span class="line">xfsdump: using file dump (drive_simple) strategy</span><br><span class="line">xfsdump: version 3.1.4 (dump format 3.0) - type ^C for status and control</span><br><span class="line">xfsdump: level 0 dump of client.centos7.study:/mnt/snapshot</span><br><span class="line">xfsdump: dump date: Sun Jul 14 17:31:38 2019</span><br><span class="line">xfsdump: session id: 5ea4e354-bf53-4069-8b63-ec4c2259c444</span><br><span class="line">xfsdump: session label: &quot;lvm1&quot;</span><br><span class="line">xfsdump: ino map phase 1: constructing initial dump list</span><br><span class="line">xfsdump: ino map phase 2: skipping (no pruning necessary)</span><br><span class="line">xfsdump: ino map phase 3: skipping (only one dump stream)</span><br><span class="line">xfsdump: ino map construction complete</span><br><span class="line">xfsdump: estimated dump size: 786816 bytes</span><br><span class="line">xfsdump: creating dump session media file 0 (media 0, file 0)</span><br><span class="line">xfsdump: dumping ino map</span><br><span class="line">xfsdump: dumping directories</span><br><span class="line">xfsdump: dumping non-directory files</span><br><span class="line">xfsdump: ending media file</span><br><span class="line">xfsdump: media file size 775272 bytes</span><br><span class="line">xfsdump: dump size (non-dir files) : 745816 bytes</span><br><span class="line">xfsdump: dump complete: 1 seconds elapsed</span><br><span class="line">xfsdump: Dump Summary:</span><br><span class="line">xfsdump:   stream 0 /tmp/backup.lvm OK (success)</span><br><span class="line">xfsdump: Dump Status: SUCCESS</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">[root@client ~]# umount /mnt/snapshot</span><br><span class="line">[root@client ~]# lvremove /dev/thin_vg/thinpool_snapshot </span><br><span class="line">Do you really want to remove active logical volume thin_vg/thinpool_snapshot? [y/n]: y</span><br><span class="line">  Logical volume &quot;thinpool_snapshot&quot; successfully removed</span><br><span class="line">[root@client ~]# umount /mnt/annathin1/</span><br><span class="line">[root@client ~]# mkfs.xfs -f /dev/thin_vg/annathin1 </span><br><span class="line">meta-data=/dev/thin_vg/annathin1 isize=512    agcount=16, agsize=163824 blks</span><br><span class="line">         =                       sectsz=512   attr=2, projid32bit=1</span><br><span class="line">         =                       crc=1        finobt=0, sparse=0</span><br><span class="line">data     =                       bsize=4096   blocks=2621184, imaxpct=25</span><br><span class="line">         =                       sunit=16     swidth=16 blks</span><br><span class="line">naming   =version 2              bsize=4096   ascii-ci=0 ftype=1</span><br><span class="line">log      =internal log           bsize=4096   blocks=2560, version=2</span><br><span class="line">         =                       sectsz=512   sunit=16 blks, lazy-count=1</span><br><span class="line">realtime =none                   extsz=4096   blocks=0, rtextents=0</span><br><span class="line">[root@client ~]# mount /dev/thin_vg/annathin1  /mnt/annathin1/</span><br><span class="line"></span><br><span class="line">[root@client ~]# xfsrestore -f /tmp/backup.lvm -L lvm1 /mnt/annathin1/</span><br><span class="line">xfsrestore: using file dump (drive_simple) strategy</span><br><span class="line">xfsrestore: version 3.1.4 (dump format 3.0) - type ^C for status and control</span><br><span class="line">xfsrestore: searching media for dump</span><br><span class="line">xfsrestore: examining media file 0</span><br><span class="line">xfsrestore: found dump matching specified label:</span><br><span class="line">xfsrestore: hostname: client.centos7.study</span><br><span class="line">xfsrestore: mount point: /mnt/snapshot</span><br><span class="line">xfsrestore: volume: /dev/mapper/thin_vg-thinpool_snapshot</span><br><span class="line">xfsrestore: session time: Sun Jul 14 17:31:38 2019</span><br><span class="line">xfsrestore: level: 0</span><br><span class="line">xfsrestore: session label: &quot;lvm1&quot;</span><br><span class="line">xfsrestore: media label: &quot;lvm1&quot;</span><br><span class="line">xfsrestore: file system id: 93b48865-b28d-4e2e-b76e-893e804d944c</span><br><span class="line">xfsrestore: session id: 5ea4e354-bf53-4069-8b63-ec4c2259c444</span><br><span class="line">xfsrestore: media id: e223f10b-7718-4801-bda7-7e066e59deb1</span><br><span class="line">xfsrestore: using online session inventory</span><br><span class="line">xfsrestore: searching media for directory dump</span><br><span class="line">xfsrestore: reading directories</span><br><span class="line">xfsrestore: 3 directories and 13 entries processed</span><br><span class="line">xfsrestore: directory post-processing</span><br><span class="line">xfsrestore: restoring non-directory files</span><br><span class="line">xfsrestore: restore complete: 0 seconds elapsed</span><br><span class="line">xfsrestore: Restore Summary:</span><br><span class="line">xfsrestore:   stream 0 /tmp/backup.lvm OK (success)</span><br><span class="line">xfsrestore: Restore Status: SUCCESS</span><br><span class="line"></span><br><span class="line">[root@client ~]# df -Th  /mnt/annathin1/</span><br><span class="line">Filesystem                    Type  Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/thin_vg-annathin1 xfs    10G   34M   10G   1% /mnt/annathin1</span><br></pre></td></tr></table></figure><p>It shows the annathins dir back from 33M to 34M, the original one.</p>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cyber Security: Risk Management Report</title>
      <link href="/2019/02/09/Cyber-Security-Risk-Management-Report/"/>
      <url>/2019/02/09/Cyber-Security-Risk-Management-Report/</url>
      
        <content type="html"><![CDATA[<p>Identify the potential risk or threat on computer\iPad\Phone, decide how the impact and likely of threat, deal the threat with the mitigation, using the risk chart to record the steps.</p><h4 id="Item-1-name-ThinkPad-laptop-2017"><a href="#Item-1-name-ThinkPad-laptop-2017" class="headerlink" title="Item 1 name: ThinkPad laptop 2017"></a>Item 1 name: ThinkPad laptop 2017</h4><p>Description: This is a laptop with a lot of important files on it.<br>Threat 1: Virus Attacks that can damage computer systems and data.<br>Mitigation: Install the anti-virus software, such as McAfee.</p><h4 id="Item-2-name-laptop-hard-drive"><a href="#Item-2-name-laptop-hard-drive" class="headerlink" title="Item 2 name: laptop hard drive"></a>Item 2 name: laptop hard drive</h4><p>Description: Hard drive is the most important part in laptop. With the damage hard drive, the laptop can’t even start.<br>Threat 2: HDD has unrecoverable failure and lost all data on laptop<br>Mitigation: Make extra copy on other computer or buy extra HDD for storing important files.</p><a id="more"></a><h4 id="Item-3-name-host-station"><a href="#Item-3-name-host-station" class="headerlink" title="Item 3 name: host station"></a>Item 3 name: host station</h4><p>Description: It should be a firewall between the internal and external net in order to keep the host station safe.<br>Threat 3:  Internet Hacks<br>Mitigation: Placed a firewall between trusted network and the untrusted network.</p><h4 id="Item-4-name-iPhone"><a href="#Item-4-name-iPhone" class="headerlink" title="Item 4 name: iPhone"></a>Item 4 name: iPhone</h4><p>Description: having a lot of important information on it, such as credit card, PayPal account, BOA bank account, it will be the target of malicious program by the third party.<br>Threat 4: The malicious third-party thief the information.<br>Mitigation: Keep the operating system and application update all the time and use encryption.</p><h4 id="Item-5-name-iPad"><a href="#Item-5-name-iPad" class="headerlink" title="Item 5 name: iPad"></a>Item 5 name: iPad</h4><p>Description: iPad uses Wi-Fi to connect to internet and is easy to be hacked.<br>Threat 5: Wireless hacker.<br>Mitigation: take penetration test. </p>]]></content>
      
      
      
        <tags>
            
            <tag> cyber security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python-using repetition structures nest loop to print patterns</title>
      <link href="/2019/01/08/Python-using-repetition-structures-to-draw-mode/"/>
      <url>/2019/01/08/Python-using-repetition-structures-to-draw-mode/</url>
      
        <content type="html"><![CDATA[<h4 id="Two-repetition-structures-in-python"><a href="#Two-repetition-structures-in-python" class="headerlink" title="Two repetition structures in python:"></a>Two repetition structures in python:</h4><ul><li>while loop</li><li>for loop<h4 id="Nest-loop"><a href="#Nest-loop" class="headerlink" title="Nest loop"></a>Nest loop</h4>For loop has a nest loop function. clock is a good example.<br>Nest loop can use to print some patterns.<br>Some examples:</li></ul><h6 id="pattern-1"><a href="#pattern-1" class="headerlink" title="pattern 1"></a>pattern 1</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rows = int(input(&apos;how many rows?&apos;))</span><br><span class="line">cols = int(input(&apos;how many columns?&apos;))</span><br><span class="line">for r in range(rows):</span><br><span class="line">    for  c in range(cols):</span><br><span class="line">        print(&apos;*&apos;,end=&apos;&apos;)</span><br><span class="line">    print()</span><br></pre></td></tr></table></figure><p>after input rows and clos value 6, runing code, it will show</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">******</span><br><span class="line">******</span><br><span class="line">******</span><br><span class="line">******</span><br><span class="line">******</span><br><span class="line">******</span><br></pre></td></tr></table></figure><h6 id="pattern-2"><a href="#pattern-2" class="headerlink" title="pattern 2"></a>pattern 2</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">*</span><br><span class="line">**</span><br><span class="line">***</span><br><span class="line">****</span><br><span class="line">*****</span><br><span class="line">******</span><br><span class="line">*******</span><br></pre></td></tr></table></figure><p>code as following:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">base_size = 7</span><br><span class="line">for r in range(base_size):</span><br><span class="line">    for c in range(r+1):</span><br><span class="line">        print(&apos;*&apos;,end=&apos;&apos;)</span><br><span class="line">        print()</span><br></pre></td></tr></table></figure><h6 id="pattern-3-up-side-down-triangle"><a href="#pattern-3-up-side-down-triangle" class="headerlink" title="pattern 3: up side down triangle:"></a>pattern 3: up side down triangle:</h6><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">*******</span><br><span class="line">******</span><br><span class="line">*****</span><br><span class="line">****</span><br><span class="line">***</span><br><span class="line">**</span><br><span class="line">*</span><br></pre></td></tr></table></figure><p>code like this:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">rows =7</span><br><span class="line">cols =7</span><br><span class="line"></span><br><span class="line">for i in range(rows):</span><br><span class="line">    #num_of_star = cols - i</span><br><span class="line">    #print(&apos;*&apos; * (cols - i))</span><br><span class="line">    for j in range(cols - i):</span><br><span class="line">        print(&apos;*&apos;, end=&apos;&apos;)</span><br><span class="line">    print()</span><br></pre></td></tr></table></figure><h6 id="pattern-4"><a href="#pattern-4" class="headerlink" title="pattern 4:"></a>pattern 4:</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">*</span><br><span class="line"> *</span><br><span class="line">  *</span><br><span class="line">   *</span><br><span class="line">    *</span><br><span class="line">     *</span><br></pre></td></tr></table></figure><p>code for  this  pattern is:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">num_step =6</span><br><span class="line">for r in range(num_steps):</span><br><span class="line">    for c in range(r):</span><br><span class="line">        print(&apos; &apos;,end=&apos;&apos;)</span><br><span class="line">    print(&apos;#&apos;)</span><br></pre></td></tr></table></figure><h6 id="pattern-5"><a href="#pattern-5" class="headerlink" title="pattern 5"></a>pattern 5</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">**</span><br><span class="line">* *</span><br><span class="line">*  *</span><br><span class="line">*   *</span><br><span class="line">*    *</span><br><span class="line">*     *</span><br></pre></td></tr></table></figure><p>code for this patter is:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">col = 6</span><br><span class="line">raw = 6</span><br><span class="line">for a in range(raw):</span><br><span class="line">    print(&apos;#&apos;,end=&apos;&apos;, sep=&apos;&apos;)</span><br><span class="line">    for b in range(a):</span><br><span class="line">        print(&apos; &apos;, end=&apos;&apos;, sep=&apos;&apos;)</span><br><span class="line">    print(&apos;#&apos;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cyber Security: Security Audit Report about Computer System</title>
      <link href="/2018/07/20/Cyber-Security-Security-Audit-Report-about-Computer-System/"/>
      <url>/2018/07/20/Cyber-Security-Security-Audit-Report-about-Computer-System/</url>
      
        <content type="html"><![CDATA[<h4 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract:"></a>Abstract:</h4><p>Using MBSA to audit computer to find 4 things need to be fixed, some missing update, some passwords are vulnerable. To fix these problems, update application and change the password policy to force users to change passwords.</p><h3 id="Methods"><a href="#Methods" class="headerlink" title="Methods:"></a>Methods:</h3><p>Got MBSA App 2.1 from Microsoft website and install it.</p><p>Get started to scam computer, it takes a little longer than expected to finish scan.</p><h3 id="Finding-1"><a href="#Finding-1" class="headerlink" title="Finding 1:"></a>Finding 1:</h3><p>Description: The Automatic Updates system service is not configured to be started as Automatic.</p><p>Mitigation: Since sometimes automatic updates is not always good to computer system and network, it is not necessary to update all the time. Keep this configuration not change, then   regularly check the system service to determine which needs to be updated.</p><h3 id="Finding-2"><a href="#Finding-2" class="headerlink" title="Finding 2:"></a>Finding 2:</h3><p>Description: Some user accounts (4 of 6) have blank or simple passwords, or could not be analyzed.</p><p>Mitigation: change password policy and inforce the password security, let the users change their passwords.</p><a id="more"></a><h3 id="Finding-3"><a href="#Finding-3" class="headerlink" title="Finding 3:"></a>Finding 3:</h3><p>Description: a Virtual Box software update installation was not completed.</p><p>Mitigation: restart the computer immediately following the installation of security updates, both for protection and stability of the system.</p><h3 id="Finding-4"><a href="#Finding-4" class="headerlink" title="Finding 4:"></a>Finding 4:</h3><p>Description: Some user accounts (4 of 6) have non-expiring passwords</p><p>Mitigation: Set the password expiring for the users.</p><p>Audit plan:</p><img src="/2018/07/20/Cyber-Security-Security-Audit-Report-about-Computer-System/audit.jpg" class=""><p>Citations:<br>Cybersecurity Analyst+: Scan for Vulnerabilities using Microsoft Baseline Security Analyzer By: Dan Lachance<br>Microsoft Security Fundamentals: Microsoft Baseline Security Analyzer (MBSA) By: Travis Welton<br>Baseline Security Evaluation Checklist  <a href="acm.org">acm.org</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> cyber security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cyber Security Policy Goals of Chabot College</title>
      <link href="/2018/07/11/Cyber-Security-Policy-Goals-of-Chabot-College/"/>
      <url>/2018/07/11/Cyber-Security-Policy-Goals-of-Chabot-College/</url>
      
        <content type="html"><![CDATA[<h4 id="Clean-Desk-Policy"><a href="#Clean-Desk-Policy" class="headerlink" title="Clean Desk Policy:"></a>Clean Desk Policy:</h4><h3 id="Goal"><a href="#Goal" class="headerlink" title="Goal:"></a>Goal:</h3><p>Establish the minimum requirements for maintaining a “clean desk” – where sensitive/critical information about  employees, intellectual property, students is secure in locked areas and out of site.</p><h3 id="Procedure"><a href="#Procedure" class="headerlink" title="Procedure:"></a>Procedure:</h3><p>  a.Employees are required to ensure that all sensitive/confidential information in hardcopy or electronic form is secure in their work area at the end of the day and when they are expected to be gone for an extended period.<br>  b.Computer workstations must be locked when workspace is unoccupied.<br>  c.Computer workstations must be shut completely down at the end of the work day.<br>  d.Any Restricted or Sensitive information must be removed from the desk and locked in a drawer when the desk is unoccupied and at the end of the work day.<br>  e.File cabinets containing Restricted or Sensitive information must be kept closed and locked when not in use or when not attended.<br>  f.Keys used for access to Restricted or Sensitive information must not be left at an unattended desk.<br>  g.Laptops must be either locked with a locking cable or locked away in a drawer.<br>  h.Passwords may not be left on sticky notes posted on or under a computer, nor may they be left written down in an accessible location.<br>  i.Printouts containing Restricted or Sensitive information should be immediately removed from the printer.<br>  j.Upon disposal Restricted and/or Sensitive documents should be shredded in the official shredder bins or placed in the lock confidential disposal bins.<br>  k.Whiteboards containing Restricted and/or Sensitive information should be erased.<br>  l.Lock away portable computing devices such as laptops and tablets.<br>  m.Treat mass storage devices such as CDROM, DVD or USB drives as sensitive and secure them in a locked drawer.</p><h4 id="Password-Policy"><a href="#Password-Policy" class="headerlink" title="Password Policy:"></a>Password Policy:</h4><h3 id="Goal-1"><a href="#Goal-1" class="headerlink" title="Goal:"></a>Goal:</h3><p> Passwords are a critical component of information security and serve to protect user accounts; however, a poorly constructed password may result in the compromise of individual systems, data, or network. This policy provides best practices for creating secure passwords.</p><a id="more"></a><h3 id="Procedure-1"><a href="#Procedure-1" class="headerlink" title="Procedure:"></a>Procedure:</h3><p>a.Strong passwords are long, the more characters you have the stronger the password.<br>b. We recommend a minimum of 14 characters in your password.<br>c. We highly encourage the use of passphrases, encourage the use of ‘password manager’ software,passwords made up of multiple words.</p><h4 id="Email-Policy"><a href="#Email-Policy" class="headerlink" title="Email Policy:"></a>Email Policy:</h4><h3 id="Goal-2"><a href="#Goal-2" class="headerlink" title="Goal:"></a>Goal:</h3><p>The purpose of this policy is to ensure the proper use of email system and make users aware of Chabot College deems as acceptable and unacceptable use of its email system. This policy outlines the minimum requirements for use of email within Chabot College Network.</p><h3 id="Procedure-2"><a href="#Procedure-2" class="headerlink" title="Procedure:"></a>Procedure:</h3><p>a. All use of email must be consistent with Chabot College policies and procedures of ethical conduct, safety, compliance with applicable laws and proper business practices.<br>b. Email account should be used primarily for Chabot College business-related purposes; personal communication is permitted on a limited basis.<br>c. All Chabot College data contained within an email message or an attachment must be secured according to the Data Protection Standard.<br>d.The Chabot College email system shall not to be used for the creation or distribution of any disruptive or offensive messages, including offensive comments about race, gender, hair color, disabilities, age, sexual orientation, pornography, religious beliefs and practice, political beliefs, or national origin.</p><p>Related Standards, Policies and Processes:<br>Data Protection Standard</p><h4 id="End-User-Encryption-Key-Protection-Policy"><a href="#End-User-Encryption-Key-Protection-Policy" class="headerlink" title="End User Encryption Key Protection Policy:"></a>End User Encryption Key Protection Policy:</h4><h3 id="Goal-3"><a href="#Goal-3" class="headerlink" title="Goal:"></a>Goal:</h3><p>This policy outlines the requirements for protecting encryption keys that are under the control of end users. These requirements are designed to prevent unauthorized disclosure and subsequent fraudulent use. The protection methods outlined will include operational and technical controls, such as key backup procedures, encryption under a separate key and use of tamper-resistant hardware.</p><h3 id="Procedure-3"><a href="#Procedure-3" class="headerlink" title="Procedure:"></a>Procedure:</h3><p>a.Keys used for secret key encryption, also called symmetric cryptography, must be protected as they are distributed to all parties that will use them. During distribution, the symmetric encryption keys must be encrypted using a stronger algorithm with a key of the longest key length for that algorithm authorized in Chabot College’s Acceptable Encryption Policy. If the keys are for the strongest algorithm, then the key must be split, each portion of the key encrypted with a different key that is the longest key length authorized and each encrypted portion is transmitted using different transmission mechanisms. The goal is to provide more stringent protection to the key than the data that is encrypted with that encryption key.</p><p>b.Public key cryptography, or asymmetric cryptography, uses public-private key pairs. The public key is passed to the certificate authority to be included in the digital certificate issued to the end user. The digital certificate is available to everyone once it issued. The private key should only be available to the end user to whom the corresponding digital certificate is issued.</p><p>c.Hardware tokens storing encryption keys will be treated as sensitive equipment, as described in Chabot College’s Physical Security policy. In addition, all hardware tokens, smartcards, USB tokens, etc.will not be stored or left connected to any end user’s computer when not in use. For end users traveling with hardware tokens, they will not be stored or carried in the same container or bag as any computer.</p><p>d.All PINs, passwords or passphrases used to protect encryption keys must meet complexity and length requirements described in Chabot College’s Password Policy.</p><p>e.The Infosec team will verify compliance to this policy through various methods, including but not limited to, periodic walkthroughs, video monitoring, business tool reports, internal and external audits, and feedback to the policy owner.</p><p>Related Standards, Policies and Processes:<br> a.Password Policy<br> b.Encryption Policy</p><h4 id="Lab-Anti-Virus-Policy"><a href="#Lab-Anti-Virus-Policy" class="headerlink" title="Lab Anti-Virus Policy:"></a>Lab Anti-Virus Policy:</h4><h3 id="Goal-4"><a href="#Goal-4" class="headerlink" title="Goal:"></a>Goal:</h3><p> To ensure effective virus detection and prevention in Chabot College lab.</p><h3 id="Procedure-4"><a href="#Procedure-4" class="headerlink" title="Procedure:"></a>Procedure:</h3><p>a. All Chabot College PC-based lab computers must have Chabot College’s standard, supported anti-virus software installed and scheduled to run at regular intervals. In addition, the anti-virus software and the virus pattern files must be kept up-to-date. b.Virus-infected computers must be removed from the network until they are verified as virus-free.<br>b.Lab Admins/Lab Managers are responsible for creating procedures that ensure anti-virus software is run at regular intervals, and computers are verified as virus-free. d.Any activities with the intention to create and/or distribute malicious programs into Chabot College’s networks (e.g., viruses, worms, Trojan horses, e-mail bombs, etc.) are prohibited, in accordance with the Acceptable Use Policy.</p><p>Related Standards, Policies and Processes:<br>•Acceptable Use Policy<br>•Anti-Virus Recommended Processes<br>The CmapTools Mind:</p><img src="/2018/07/11/Cyber-Security-Policy-Goals-of-Chabot-College/labantivirus.jpg" class=""><p>Ganttproject timeline:</p><img src="/2018/07/11/Cyber-Security-Policy-Goals-of-Chabot-College/gantt.jpg" class=""><p>Citation:<a href="https://www.sans.org/security-resources/policies" target="_blank" rel="noopener"> https://www.sans.org/security-resources/policies</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> cyber security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux: ACL, useradd and groupadd</title>
      <link href="/2018/04/02/Linux-ACL-useradd-and-groupadd/"/>
      <url>/2018/04/02/Linux-ACL-useradd-and-groupadd/</url>
      
        <content type="html"><![CDATA[<p>ACL means “access control list”.</p><h4 id="Config-file"><a href="#Config-file" class="headerlink" title="Config file"></a>Config file</h4><p>/etc/default/useradd<br>/etc/skel<br>note:this config will add subdir under /etc/skel, it will automatically create the same dir when using useradd command to create  a username</p><h4 id="useradd"><a href="#useradd" class="headerlink" title="useradd"></a>useradd</h4><p>-u    uid<br>-g    default group, initial login group<br>-a -G append extra group<br>-r    add a system users  (uid &lt; 100)<br>-s    shell     /bin/bash  or  /sbin/login  or /sbin/nologin<br>newgrp  username groupname        set the effective group for user</p><h4 id="userdel"><a href="#userdel" class="headerlink" title="userdel"></a>userdel</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel   anna</span><br></pre></td></tr></table></figure><p>only delete the username, keep the home dir and all other files</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel -r anna</span><br></pre></td></tr></table></figure><p>delete completely all the username’s file and dir, use “-r”</p><h4 id="gpasswd"><a href="#gpasswd" class="headerlink" title="gpasswd"></a>gpasswd</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpasswd group name</span><br></pre></td></tr></table></figure><p>create  a passwd for this group</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpasswd -A username groupname</span><br></pre></td></tr></table></figure><p>Let username to be the administrator of groupname<br>Then user can use  gpasswd to add new user to this group</p><a id="more"></a><h4 id="Access-control-list"><a href="#Access-control-list" class="headerlink" title="Access control list"></a>Access control list</h4><p>Aim to:<br>users   not the owner of file<br>groups    not the group of file<br>specific  to file or dir</p><p>check the file or dir’s acl status</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">getfacl filename</span><br><span class="line">getfacl dirname</span><br></pre></td></tr></table></figure><p>let user anna has rx rights to file /etc/shadow<br>“d:” means let anna has rx rights all the way down to /srv dir</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setfacl -m u:anna:rx     /etc/shadow</span><br><span class="line">setfacl -m d:u:anna:rx     /srv</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setfacl -x  u:anna  /etc/shadow</span><br><span class="line">setfacl -x  d:u:anna /srv</span><br></pre></td></tr></table></figure><p>delete user anna rights from ACL, doesn’t need to specific the rwx</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setfacl -b filename</span><br><span class="line">setfacl -b dir</span><br></pre></td></tr></table></figure><p>delete all acl config from file or dir</p><h4 id="Some-useful-command-to-check-the-state-of-id-or-password"><a href="#Some-useful-command-to-check-the-state-of-id-or-password" class="headerlink" title="Some useful command to check the state of id or password"></a>Some useful command to check the state of id or password</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">id</span><br><span class="line">groups</span><br></pre></td></tr></table></figure><p>check the password</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pwck</span><br></pre></td></tr></table></figure><p>check the group status</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grpck</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux: some very useful commands of rpm</title>
      <link href="/2018/03/29/Linux-some-very-useful-commands-of-rpm/"/>
      <url>/2018/03/29/Linux-some-very-useful-commands-of-rpm/</url>
      
        <content type="html"><![CDATA[<p>RPM (Red Hat Package Manager) is an default open source and most popular package management utility in Redhat Linux. The tool allows users to install, update, uninstall, query, verify and manage system software packages in Unix/Linux operating systems.<br>Here are some very useful commands</p><h4 id="You-want-to-know-whether-httpd-installed"><a href="#You-want-to-know-whether-httpd-installed" class="headerlink" title="You want to know whether httpd installed"></a>You want to know whether httpd installed</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@www 7]# rpm -qa |grep httpd</span><br><span class="line">httpd-tools-2.4.6-88.el7.centos.x86_64</span><br><span class="line">httpd-2.4.6-88.el7.centos.x86_64</span><br></pre></td></tr></table></figure><h4 id="Query-all-the-config-files-of-http"><a href="#Query-all-the-config-files-of-http" class="headerlink" title="Query all the config files of http"></a>Query all the config files of http</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@www 7]# rpm -qc httpd</span><br><span class="line">/etc/httpd/conf.d/autoindex.conf</span><br><span class="line">/etc/httpd/conf.d/userdir.conf</span><br><span class="line">/etc/httpd/conf.d/welcome.conf</span><br><span class="line">/etc/httpd/conf.modules.d/00-base.conf</span><br><span class="line">/etc/httpd/conf.modules.d/00-dav.conf</span><br><span class="line">/etc/httpd/conf.modules.d/00-lua.conf</span><br><span class="line">/etc/httpd/conf.modules.d/00-mpm.conf</span><br><span class="line">/etc/httpd/conf.modules.d/00-proxy.conf</span><br><span class="line">/etc/httpd/conf.modules.d/00-systemd.conf</span><br><span class="line">/etc/httpd/conf.modules.d/01-cgi.conf</span><br><span class="line">/etc/httpd/conf/httpd.conf</span><br><span class="line">/etc/httpd/conf/magic</span><br><span class="line">/etc/logrotate.d/httpd</span><br><span class="line">/etc/sysconfig/htcacheclean</span><br><span class="line">/etc/sysconfig/httpd</span><br></pre></td></tr></table></figure><h4 id="Query-all-the-files-about-httpd"><a href="#Query-all-the-files-about-httpd" class="headerlink" title="Query all the files about httpd"></a>Query all the files about httpd</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ql httpd</span><br></pre></td></tr></table></figure><h4 id="If-you-don’t-know-which-software-a-file-belongs-to-you-can-do"><a href="#If-you-don’t-know-which-software-a-file-belongs-to-you-can-do" class="headerlink" title="If you don’t know which software a file belongs to, you can do :"></a>If you don’t know which software a file belongs to, you can do :</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@www 7]# rpm -qf /etc/rpc</span><br><span class="line">glibc-2.17-260.el7_6.3.x86_64</span><br><span class="line">glibc-2.17-260.el7_6.3.i686</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="Show-all-changes-have-been-made-after-you-install-a-package"><a href="#Show-all-changes-have-been-made-after-you-install-a-package" class="headerlink" title="Show all changes have been made after you install a package."></a>Show all changes have been made after you install a package.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@www 7]# rpm -Va</span><br><span class="line">..5......    /usr/lib/firmware/vpu_d.bin</span><br><span class="line">S.5....T.  c /etc/yum/pluginconf.d/langpacks.conf</span><br><span class="line">S.5....T.  c /etc/ssh/sshd_config</span><br><span class="line">S.5....T.  c /etc/sysctl.conf</span><br><span class="line">.M.......  g /var/log/dmesg</span><br></pre></td></tr></table></figure><p>S T c g have different meanings</p><p>S ：(file Size differs)<br>M ：(Mode differs)<br>5 ：(MD5 sum differs)<br>D ：(Device major/minor number mis-match)<br>L ：(readLink(2) path mis-match)<br>U ：(User ownership differs)<br>G ：(Group ownership differs)<br>T ：(mTime differs)<br>c ：(config file)<br>d ：(documentation)<br>g ：(ghost file)<br>l ：(license file)<br>r ：(read me)<br>###To be specific, you want to know whether special file was changed</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@www 7]# rpm -Vf /etc/default/grub </span><br><span class="line">S.5....T.  c /etc/grub.d/40_custom</span><br></pre></td></tr></table></figure><p>It shows /etc/default/grub has been changed  S(size) 5 (MD5 sum differs), T (Mtime ).</p>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux: some useful command of yum</title>
      <link href="/2018/03/19/Linux-some-useful-command-of-yum/"/>
      <url>/2018/03/19/Linux-some-useful-command-of-yum/</url>
      
        <content type="html"><![CDATA[<p>Yum is a very powful tool in Redhat Linux, it can provide install and update software online.</p><h4 id="Some-very-useful-commands"><a href="#Some-very-useful-commands" class="headerlink" title="Some very useful commands"></a>Some very useful commands</h4><p>Quiry</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum list all</span><br></pre></td></tr></table></figure><p>query all softwares in repository</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum list installed</span><br></pre></td></tr></table></figure><p>softwares already installed on host</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum list available</span><br></pre></td></tr></table></figure><p>softwares not installed yet, you can install right now</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum list updates</span><br></pre></td></tr></table></figure><p>show the software that can be updated at once</p><p>The following two commands have same function</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum provides passwd</span><br><span class="line">rpm -qf /etc/passwd</span><br></pre></td></tr></table></figure><p>Both will tell you what software this command belong to</p><a id="more"></a><h4 id="Yum-config-documents-location"><a href="#Yum-config-documents-location" class="headerlink" title="Yum config documents location"></a>Yum config documents location</h4><p>/etc/yum.repo.d/<br>/etc/yum.conf</p><h4 id="About-groupinstall"><a href="#About-groupinstall" class="headerlink" title="About groupinstall"></a>About groupinstall</h4><p>If you want to install a group software, for example,</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum groupinfo &quot;Scientific Support&quot;</span><br><span class="line">Yum groupinstall &quot;Scientific Support&quot;</span><br></pre></td></tr></table></figure><p>It will show error</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Loaded plugins: fastestmirror, langpacks</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"> * base: mirror.fileplanet.com</span><br><span class="line"> * extras: mirror.fileplanet.com</span><br><span class="line"> * updates: mirror.fileplanet.com</span><br><span class="line">base                                                                              | 3.6 kB  00:00:00     </span><br><span class="line">extras                                                                            | 3.4 kB  00:00:00     </span><br><span class="line">ftp.ksu.edu.tw_FTP_CentOS_7_os_x86_64_                                            | 3.6 kB  00:00:00     </span><br><span class="line">updates                                                                           | 3.4 kB  00:00:00     </span><br><span class="line">Warning: Group scientific does not have any packages to install.</span><br><span class="line">Maybe run: yum groups mark install (see man yum)</span><br><span class="line">No packages in any requested group available to install or update</span><br></pre></td></tr></table></figure><p>You need to add “group_package_types=default,mandatory,optional” to configuration file.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/yum.conf</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">group_package_types=default,mandatory,optional</span><br></pre></td></tr></table></figure><p>After doing that,  you can install the group software successfully.</p><h4 id="Add-baseurl-to-your-yum-repository"><a href="#Add-baseurl-to-your-yum-repository" class="headerlink" title="Add baseurl to your yum repository"></a>Add baseurl to your yum repository</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum-config-manager --add-repo=http://www.centos.ann</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[centos.ann]</span><br><span class="line">name=added from: http://www.centos.ann</span><br><span class="line">baseurl=http://www.centos.ann</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure><p>It will appear to list /var/cache/yum/x86_64/7</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /var/cache/yum/x86_64/7</span><br><span class="line">ll</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drwxr-xr-x. 4 root root   33 Mar  8 11:13 centos.ann</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum repolist</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">repo id                                 repo name                                                  status</span><br><span class="line">base/7/x86_64                           CentOS-7 - Base                                            10,019</span><br><span class="line">centos.ann                              added from: http://www.centos.ann                               0</span><br></pre></td></tr></table></figure><p>It shows centos.ann is the default yum base. 0 means there is no software in it.</p><h4 id="Use-local-disk-or-CD-to-yum-software"><a href="#Use-local-disk-or-CD-to-yum-software" class="headerlink" title="Use local disk or CD to yum software"></a>Use local disk or CD to yum software</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/yum.repos.d/cdrom.repo</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[CDROM]</span><br><span class="line">name=cdrom</span><br><span class="line">baseurl=file:///mnt</span><br><span class="line">enable=1</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum --enablerepo=cdrom</span><br></pre></td></tr></table></figure><p>In case the rpm verify, you need to add pki</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux: Create a swap</title>
      <link href="/2018/03/15/Linux-Create-a-swap/"/>
      <url>/2018/03/15/Linux-Create-a-swap/</url>
      
        <content type="html"><![CDATA[<p>There are two ways to create a swap in Linux.</p><h4 id="Use-disk-partition"><a href="#Use-disk-partition" class="headerlink" title="Use disk partition"></a>Use disk partition</h4><p>Make a partition first</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fdisk /dev/sda1</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkswap /dev/sda1</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swapon /dev/sda1</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">blkid</span><br><span class="line">UUID=&quot;40a10328-63e5-4450-8bed-1739bc472d2d&quot;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/fstab</span><br><span class="line">UUID=&quot;40a10328-63e5-4450-8bed-1739bc472d2d&quot;   swap swap defaults 0 0</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -a</span><br></pre></td></tr></table></figure><h4 id="Use-a-file"><a href="#Use-a-file" class="headerlink" title="Use a file"></a>Use a file</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dd if=/dev/zero of=/tmp/swap bs=1M count=128</span><br><span class="line">mkswap /tmp/swap</span><br><span class="line">swapon /tmp/swap</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/fstab</span><br><span class="line">/tmp/swap swap swap defaults  0 0</span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux: config Grub2, adding more kernel menu, personality environment</title>
      <link href="/2018/03/08/Linux-Config-grub2/"/>
      <url>/2018/03/08/Linux-Config-grub2/</url>
      
        <content type="html"><![CDATA[<p>Linux provides a method to let users create personality boot menu.Doing as follows:</p><h4 id="Config-document-location"><a href="#Config-document-location" class="headerlink" title="Config document location"></a>Config document location</h4><p>/boot/grub2/grub.cfg<br>/etc/default/grub<br>/etc/grub.d/*</p><h4 id="Adding-more-than-one-kernel-boot-to-menu"><a href="#Adding-more-than-one-kernel-boot-to-menu" class="headerlink" title="Adding more than one kernel boot to menu"></a>Adding more than one kernel boot to menu</h4><p>Copy  first  menu from /boot/grub2/grub.cfg</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">menuentry &apos;CentOS Linux (3.10.0-957.10.1.el7.x86_64) 7 (Core)&apos; --class centos --class gnu-linux --class gnu --class os --unrestricted $menuentry_id_option &apos;gnulinux-3.10.0-957.10.1.el7.x86_64-advanced-51497437-886c-472c-9c74-8ef2e459214b&apos; &#123;</span><br><span class="line">        load_video</span><br><span class="line">        set gfxpayload=keep</span><br><span class="line">        insmod gzio</span><br><span class="line">        insmod part_msdos</span><br><span class="line">        insmod xfs</span><br><span class="line">        set root=&apos;hd0,msdos1&apos;</span><br><span class="line">        if [ x$feature_platform_search_hint = xy ]; then</span><br><span class="line">          search --no-floppy --fs-uuid --set=root --hint-bios=hd0,msdos1 --hint-efi=hd0,msdos1 --hint-baremetal=ahci0,msdos1 --hint=&apos;hd0,msdos1&apos;  cdbb3f80-2c48-4c5c-bc72-0f40023061b9</span><br><span class="line">        else</span><br><span class="line">          search --no-floppy --fs-uuid --set=root cdbb3f80-2c48-4c5c-bc72-0f40023061b9</span><br><span class="line">        fi</span><br><span class="line">        linux16 /vmlinuz-3.10.0-957.10.1.el7.x86_64 root=/dev/mapper/cl-root ro crashkernel=auto rd.lvm.lv=cl/root rd.lvm.lv=cl/swap ifname=enp0s3:08:00:27:37:8e:ba  elevator=deadline elevator=deadline</span><br><span class="line">        initrd16 /initramfs-3.10.0-957.10.1.el7.x86_64.img</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>then</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/grub.d</span><br><span class="line">vim 40_custom</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">menuentry &apos;my CentOS Linux (3.10.0-957.5.1.el7.x86_64) 7 (Core)&apos; --class centos --class gnu-linux --class gnu --class os --unrestricted --id &apos;mygraphical&apos; &#123;</span><br><span class="line">        load_video</span><br><span class="line">        set gfxpayload=keep</span><br><span class="line">        insmod gzio</span><br><span class="line">        insmod part_msdos</span><br><span class="line">        insmod xfs</span><br><span class="line">        set root=&apos;hd0,msdos1&apos;</span><br><span class="line">        if [ x$feature_platform_search_hint = xy ]; then</span><br><span class="line">          search --no-floppy --fs-uuid --set=root --hint-bios=hd0,msdos1 --hint-efi=hd0,msdos1 --hint-baremetal=ahci0,msdos1 --hint=&apos;hd0,msdos1&apos;  cdbb3f80-2c48-4c5c-bc72-0f40023061b9</span><br><span class="line">        else</span><br><span class="line">          search --no-floppy --fs-uuid --set=root cdbb3f80-2c48-4c5c-bc72-0f40023061b9</span><br><span class="line">        fi</span><br><span class="line">        linux16 /vmlinuz-3.10.0-957.5.1.el7.x86_64 root=/dev/mapper/cl-root ro crashkernel=auto rd.lvm.lv=cl/root rd.lvm.lv=cl/swap ifname=enp0s3:08:00:27:37:8e:ba rhgb elevator=deadline systemd.unit=graphical.target</span><br></pre></td></tr></table></figure><p>paste menuentry in 40_custom, then change name to “my centOS”  and config it to fit your requirement, creating a new menu.<br>Don’t forget mkconfig, after doing that, the new menu can be created.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub2-mkconfig -o /boot/grub2/grub.cfg</span><br></pre></td></tr></table></figure><p>The new menu will be created at the bottom of  /boot/grub.d/grub.cfg, when booting linux, it will show on the menu.</p><a id="more"></a><h3 id="Change-grub-timeout"><a href="#Change-grub-timeout" class="headerlink" title="Change grub timeout"></a>Change grub timeout</h3><p>Sometimes, the default timeout is too long, users can change it.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/default/grub</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GRUB_TIMEOUT=25</span><br><span class="line">GRUB_TIMEOUT_STYLE=menu</span><br><span class="line">GRUB_DISTRIBUTOR=&quot;$(sed &apos;s, release .*$,,g&apos; /etc/system-release)&quot;</span><br><span class="line">GRUB_DEFAULT=0</span><br><span class="line">GRUB_DISABLE_SUBMENU=true</span><br><span class="line">GRUB_TERMINAL_OUTPUT=&quot;console&quot;</span><br><span class="line">GRUB_CMDLINE_LINUX=&quot;crashkernel=auto rd.lvm.lv=cl/root rd.lvm.lv=cl/swap ifname=enp0s3:08:00:27:37:8e:ba  elevator=deadline elevator=deadline&quot;</span><br><span class="line">GRUB_DISABLE_RECOVERY=&quot;true&quot;</span><br></pre></td></tr></table></figure><p>change to what time you want</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRUB_TIMEOUT=5</span><br></pre></td></tr></table></figure><h3 id="Showing-process-during-booting"><a href="#Showing-process-during-booting" class="headerlink" title="Showing process during booting"></a>Showing process during booting</h3><p>If you want to see the process detail  during boot, delete the “rhgb quiet”</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">linux16 /vmlinuz-3.10.0-957.5.1.el7.x86_64 root=/dev/mapper/cl-root ro crashkernel=auto rd.lvm.lv=cl/root rd.lvm.lv=cl/swap ifname=enp0s3:08:00:27:37:8e:ba rhgb elevator=deadline systemd.unit=graphical.target</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux: backup</title>
      <link href="/2018/01/31/Linux-backup/"/>
      <url>/2018/01/31/Linux-backup/</url>
      
        <content type="html"><![CDATA[<h4 id="Important-directory-needed-to-backup"><a href="#Important-directory-needed-to-backup" class="headerlink" title="Important directory needed to backup"></a>Important directory needed to backup</h4><p>/etc<br>/home<br>/var/spool/mail<br>/var/spool/{at,cron}<br>/boot<br>/root<br>/usr/local<br>/var/www<br>/srv/www<br>/var/lib/mysql for apache server</p><h4 id="backup-methods"><a href="#backup-methods" class="headerlink" title="backup methods"></a>backup methods</h4><p>dd :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dd  if=/dev/sda of=/dev/sdb</span><br></pre></td></tr></table></figure><p>let /dev/sdb keep all the backup for /dev/sda</p><p>cpio:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -print |cpio -covB &gt; dev/st0</span><br></pre></td></tr></table></figure><p>backup all / to the tape</p><a id="more"></a><p>xfsdump:<br>Fully backup:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xfsdump -l 0 -L &apos;home_full&apos; -M &apos;home_full&apos; -f /backupdata/home.dump /home</span><br></pre></td></tr></table></figure><p>Incrementally backup:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xfsdump -l 1 -L &apos;full-1&apos; -M &apos;full-1&apos; -f /backupdata/home.dump1 /home</span><br></pre></td></tr></table></figure><p>it means backup /home to /backupdata<br>tar:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar --exclude /proc --exclude /mnt --exclude /tmp --exclude /backupdata -jcvp -f /backupdata/system.tar.bz2 /</span><br></pre></td></tr></table></figure><p>f: filename<br>v:verbose<br>c:create<br>p:preserve-permissions<br>Add date to backup file :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -jcvpf   filename.`date +%Y-%m-%d`.tar.bz2    /var/lib/mysql</span><br></pre></td></tr></table></figure><p>rsync:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -av /home /backupdata/</span><br></pre></td></tr></table></figure><p>Backup /home to /backupdata</p>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Making charts with python matplotlib</title>
      <link href="/2018/01/08/Making-charts-with-python-matplotlib/"/>
      <url>/2018/01/08/Making-charts-with-python-matplotlib/</url>
      
        <content type="html"><![CDATA[<h2 id="About-matplotlib"><a href="#About-matplotlib" class="headerlink" title="About matplotlib"></a>About matplotlib</h2><p><a href="https://matplotlib.org/" target="_blank" rel="noopener">Matplotlib</a> is a python plotting library which can help generate plots, and charts. </p><h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>Install python3 matplotlib on my Ubuntu 16.04 box</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install python3-matplotlib</span><br></pre></td></tr></table></figure><h2 id="Creating-a-simple-chart-in-python-shell"><a href="#Creating-a-simple-chart-in-python-shell" class="headerlink" title="Creating a simple chart in python shell"></a>Creating a simple chart in python shell</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ python3</span><br><span class="line">Python <span class="number">3.5</span><span class="number">.2</span> (default, Nov <span class="number">23</span> <span class="number">2017</span>, <span class="number">16</span>:<span class="number">37</span>:<span class="number">01</span>) </span><br><span class="line">[GCC <span class="number">5.4</span><span class="number">.0</span> <span class="number">20160609</span>] on linux</span><br><span class="line">Type <span class="string">"help"</span>, <span class="string">"copyright"</span>, <span class="string">"credits"</span> <span class="keyword">or</span> <span class="string">"license"</span> <span class="keyword">for</span> more information.</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>plt</span><br><span class="line">&lt;module <span class="string">'matplotlib.pyplot'</span> <span class="keyword">from</span> <span class="string">'/usr/lib/python3/dist-packages/matplotlib/pyplot.py'</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = range(<span class="number">10</span>) <span class="comment"># create X coordinate data</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = [ i*i <span class="keyword">for</span> i <span class="keyword">in</span> x ] <span class="comment"># create Y coordinate data with square of data on X.</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>plt.plot(x, y)</span><br><span class="line">[&lt;matplotlib.lines.Line2D object at <span class="number">0x7f4f7d4433c8</span>&gt;]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>plt.show()</span><br></pre></td></tr></table></figure><p>Then I got the chart</p><img src="/2018/01/08/Making-charts-with-python-matplotlib/plot_example.png" class=""><a id="more"></a><h2 id="Creating-a-bar-chart"><a href="#Creating-a-bar-chart" class="headerlink" title="Creating a bar chart"></a>Creating a bar chart</h2><p>Next I wrote a script to generate a bar chart of the <a href="https://www.currentresults.com/Weather/California/Places/san-francisco-temperatures-by-month-average.php" target="_blank" rel="noopener">average monthly high temperature of San Francisco</a>.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'This program will generate a bar chart of the monthly average high temperature of San Francisco'</span>)</span><br><span class="line">    <span class="comment"># Create the list of X and Y cordinate data</span></span><br><span class="line">    left_edges = [ i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">12</span>)]</span><br><span class="line">    temperature = [<span class="number">57</span>, <span class="number">60</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">70</span>, <span class="number">69</span>, <span class="number">63</span>, <span class="number">57</span>]</span><br><span class="line">    bar_width = <span class="number">0.3</span></span><br><span class="line">    plt.bar(left_edges, temperature, bar_width, color=(<span class="string">'r'</span>,<span class="string">'g'</span>,<span class="string">'b'</span>,<span class="string">'r'</span>,<span class="string">'k'</span>,<span class="string">'r'</span>,<span class="string">'g'</span>,<span class="string">'b'</span>,<span class="string">'r'</span>,<span class="string">'k'</span>,<span class="string">'r'</span>,<span class="string">'g'</span>))</span><br><span class="line">    <span class="comment"># Add a title</span></span><br><span class="line">    plt.title(<span class="string">'San Francisco Climate Graph-Chart'</span>)</span><br><span class="line">    <span class="comment"># Add the label to the axes</span></span><br><span class="line">    plt.xlabel(<span class="string">'Month'</span>)</span><br><span class="line">    plt.ylabel(<span class="string">'Average High Temperature'</span>)</span><br><span class="line">    <span class="comment"># Customize the tick marks</span></span><br><span class="line">    months = [<span class="string">'Jan'</span>, <span class="string">'Feb'</span>, <span class="string">'Mar'</span>, <span class="string">'Apr'</span>, <span class="string">'May'</span>, <span class="string">'Jun'</span>, <span class="string">'Jul'</span>, <span class="string">'Aug'</span>, <span class="string">'Sep'</span>, <span class="string">'Oct'</span>, <span class="string">'Nov'</span>, <span class="string">'Dec'</span>]</span><br><span class="line">    plt.xticks(left_edges, months)</span><br><span class="line">    plt.yticks([<span class="number">50</span>, <span class="number">55</span>, <span class="number">60</span>, <span class="number">65</span>, <span class="number">70</span>, <span class="number">75</span>], [<span class="string">'50F'</span>, <span class="string">'55F'</span>, <span class="string">'60F'</span>, <span class="string">'65F'</span>, <span class="string">'70F'</span>, <span class="string">'75F'</span>])</span><br><span class="line">    <span class="comment"># Add a grid</span></span><br><span class="line">    plt.grid(<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># Display the bar chart graph</span></span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">main()</span><br></pre></td></tr></table></figure><p>Then I got the bar chart</p><img src="/2018/01/08/Making-charts-with-python-matplotlib/bar_chart.png" class=""><h2 id="Creating-a-pie-chart"><a href="#Creating-a-pie-chart" class="headerlink" title="Creating a pie chart"></a>Creating a pie chart</h2><p>This script I wrote generates a pie chart of the <a href="https://suburbanstats.org/population/how-many-people-live-in-california" target="_blank" rel="noopener">Population for California by race in 2017 and 2016</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'This program will generate a pie chart of Population for California by race in 2017 and 2016'</span>)</span><br><span class="line">    values = [<span class="number">21454</span>, <span class="number">14014</span>, <span class="number">2299</span>, <span class="number">4861</span>, <span class="number">363</span>, <span class="number">8600</span>]</span><br><span class="line">    plt.pie(values)</span><br><span class="line">    slice_label = [<span class="string">'White'</span>, <span class="string">'Hispanic'</span>, <span class="string">'Black'</span>, <span class="string">'Asian'</span>, <span class="string">'American Indian'</span>, <span class="string">'Others'</span>]</span><br><span class="line">    <span class="comment"># Add a title</span></span><br><span class="line">    plt.title(<span class="string">'Population for California by race in 2017 and 2016'</span>)</span><br><span class="line">    <span class="comment"># Add the label to the axes</span></span><br><span class="line">    plt.pie(values, labels=slice_label)</span><br><span class="line">    <span class="comment"># save the chart image</span></span><br><span class="line">    plt.savefig(<span class="string">'pie_chart.png'</span>)</span><br><span class="line">    <span class="comment"># Display the pie chart graph</span></span><br><span class="line">    plt.show()</span><br><span class="line">main()</span><br></pre></td></tr></table></figure><p>The pie chart I got</p><img src="/2018/01/08/Making-charts-with-python-matplotlib/pie_chart.png" class=""><h2 id="Save-the-chart-to-a-image-file"><a href="#Save-the-chart-to-a-image-file" class="headerlink" title="Save the chart to a image file"></a>Save the chart to a image file</h2><p>Just use the savefig() method.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.savefig(<span class="string">'bar_chart.png'</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Decorating my blog with Hexo - theme, features, tips</title>
      <link href="/2017/12/21/Decorating-my-blog-with-Hexo-theme-and-more-featurs/"/>
      <url>/2017/12/21/Decorating-my-blog-with-Hexo-theme-and-more-featurs/</url>
      
        <content type="html"><![CDATA[<h3 id="Change-hexo-blog-theme-NexT"><a href="#Change-hexo-blog-theme-NexT" class="headerlink" title="Change hexo blog theme - NexT"></a>Change hexo blog theme - NexT</h3><p>Change to hexo blog theme <a href="http://theme-next.iissnan.com/" target="_blank" rel="noopener">NexT</a> which has neat look and supports a lot cool features.<br>Download the theme</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/iissnan/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure><p>Edit blog configuration file _config.yml, change to theme from the default langscape to next</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: next</span><br></pre></td></tr></table></figure><p>Edit theme configuration file themes/next/_config.yml, change list scheme from default Muse to Pisces, see more about <a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">NexT theme scheme</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Schemes</span><br><span class="line">#scheme: Muse</span><br><span class="line">#scheme: Mist</span><br><span class="line">scheme: Pisces</span><br></pre></td></tr></table></figure><p>I prefer the scheme Pisces because it has menu and links and other stuff showing on left side of the blog content.</p><a id="more"></a><h3 id="Add-blog-owner-avatar"><a href="#Add-blog-owner-avatar" class="headerlink" title="Add blog owner avatar"></a>Add blog owner avatar</h3><p>I’d like my avatar showing up in my blog, and I have avatar uploaded to my github account.<br>Locate the avatar image link of my github account, mine is <a href="https://avatars0.githubusercontent.com/u/34552097" target="_blank" rel="noopener">https://avatars0.githubusercontent.com/u/34552097</a></p><p>Edit blog configuration file _config.yml, add a line in # Site section</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">avatar: https://avatars0.githubusercontent.com/u/34552097</span><br></pre></td></tr></table></figure><h3 id="Create-categories-page-tags-page-and-about-page"><a href="#Create-categories-page-tags-page-and-about-page" class="headerlink" title="Create categories page, tags page, and about page"></a>Create categories page, tags page, and about page</h3><h4 id="create-categories-page"><a href="#create-categories-page" class="headerlink" title="create categories page"></a>create categories page</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new page &quot;categories&quot;</span><br><span class="line">INFO  Created: ~/vmnet8.github.io/source/categories/index.md</span><br></pre></td></tr></table></figure><p>Edit source/categories/index.md, set page type to “categories”, change title to “Categories”</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">title: Categories</span><br><span class="line">date: 2017-12-17 22:39:34</span><br><span class="line">type: categories</span><br></pre></td></tr></table></figure><h4 id="create-tags-page"><a href="#create-tags-page" class="headerlink" title="create tags page"></a>create tags page</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new page &quot;tags&quot;</span><br><span class="line">INFO  Created: ~/vmnet8.github.io/source/tags/index.md</span><br></pre></td></tr></table></figure><p>Edit source/tags/index.md, set type to “tags”, change title to “Tags”</p><h4 id="create-about-page"><a href="#create-about-page" class="headerlink" title="create about page"></a>create about page</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new page &quot;about&quot;</span><br><span class="line">INFO  Created: ~/vmnet8.github.io/source/about/index.md</span><br></pre></td></tr></table></figure><p>Edit source/about/index.md, change title to “About me”, and add description of about myself.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: About Me</span><br><span class="line">date: 2017-12-18 11:41:02</span><br><span class="line">---</span><br><span class="line">My name is Anna X.</span><br></pre></td></tr></table></figure><p>Edit theme configuration file themes/next/_config.yml, enable categories, tags, and about menu.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: / || home</span><br><span class="line">  about: /about/ || user</span><br><span class="line">  tags: /tags/ || tags</span><br><span class="line">  categories: /categories/ || th</span><br><span class="line">  archives: /archives/ || archive</span><br></pre></td></tr></table></figure><p>Edit the post source/_post/1st-blog.md, add categories and tags</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">title: 1st blog</span><br><span class="line">date: 2017-12-17 21:36:48</span><br><span class="line">tags:</span><br><span class="line">    - blog</span><br><span class="line">    - hexo</span><br><span class="line">categories:</span><br><span class="line">    - life</span><br></pre></td></tr></table></figure><h3 id="Enable-social-links"><a href="#Enable-social-links" class="headerlink" title="Enable social links"></a>Enable social links</h3><p>Edit theme configuration file, themes/next/_config.yml, enable social links, change icons_only from false to true.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">social:</span><br><span class="line">  GitHub: https://github.com/vmnet8 || github</span><br><span class="line">  E-Mail: mailto:vmnet8@gmail.com || envelope</span><br><span class="line">  #Google: https://plus.google.com/yourname || google</span><br><span class="line">  #Twitter: https://twitter.com/username || twitter</span><br><span class="line">  #FB Page: https://www.facebook.com/yourname || facebook</span><br><span class="line">  #VK Group: https://vk.com/yourname || vk</span><br><span class="line">  #StackOverflow: https://stackoverflow.com/yourname || stack-overflow</span><br><span class="line">  #YouTube: https://youtube.com/yourname || youtube</span><br><span class="line">  #Instagram: https://instagram.com/yourname || instagram</span><br><span class="line">  #Skype: skype:yourname?call|chat || skype</span><br><span class="line">  Linkedin: https://www.linkedin.com/in/anna_x/ || linkedin</span><br><span class="line"></span><br><span class="line">social_icons:</span><br><span class="line">  enable: true</span><br><span class="line">  icons_only: true</span><br><span class="line">  transition: false</span><br></pre></td></tr></table></figure><h3 id="Add-RSS"><a href="#Add-RSS" class="headerlink" title="Add RSS"></a>Add RSS</h3><p>Install hexo-generator-feed plugin</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure><p>Edit blog configuration file _config.yml</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">type: atom</span><br><span class="line">path: atom.xml</span><br><span class="line">limit: 20</span><br><span class="line">hub:</span><br><span class="line">content:</span><br><span class="line">content_limit: 140</span><br><span class="line">content_limit_delim: &apos; &apos;</span><br></pre></td></tr></table></figure><h3 id="Adding-image-to-blog-post"><a href="#Adding-image-to-blog-post" class="headerlink" title="Adding image to blog post"></a>Adding image to blog post</h3><p>I’d like the image for a blog post to be in a blog post specific folder, so I enabled the <a href="https://hexo.io/docs/asset-folders.html" target="_blank" rel="noopener">“post_asset_folder”</a><br>Edit blog configuration file _config.yml</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_asset_folder: true</span><br></pre></td></tr></table></figure><p>When I do “hexo new ‘My 1st blog’”, a blog specific asset folder named “My-1st-blog” will be created under source/_post along with the post markdown file My-1st-blog.md .</p><p>Copy the image file ‘penguins.png’ to source/_post/My-1st-blog<br>Edit source_post/My-1st-blog.md, reference the image in the markdown file like this</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">This is my first blog post.</span><br><span class="line">&#123;% asset_img example.png This is an example image %&#125;</span><br></pre></td></tr></table></figure><h3 id="Enable-post-comment-with-disqus"><a href="#Enable-post-comment-with-disqus" class="headerlink" title="Enable post comment with disqus"></a>Enable post comment with disqus</h3><p>Sign up <a href="https://disqus.com/" target="_blank" rel="noopener">https://disqus.com/</a>, you can sign up with twitter, facebook, or google account. On next step, choose “I want to install Disqus on my site”, mark the shortname of the site. My shortname is annax</p><p>NexT theme already supports disqus, edit theme configuration theme/next/_config.yml</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">disqus:</span><br><span class="line">  enable: true</span><br><span class="line">  shortname: annax</span><br><span class="line">  count: true</span><br></pre></td></tr></table></figure><p>Then each blog post, and about page, and tags page will have adding comment embeded below the content.<br>If you want to disable comment for specific page or post, add “comments: false” to post/page front-matter<br>For me, I disable comment for tags page.</p><h3 id="Page-and-site-view-count"><a href="#Page-and-site-view-count" class="headerlink" title="Page and site view count"></a>Page and site view count</h3><p>Enable busuanzi_count in theme next configuration file, edit theme/next/_config.yml</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">busuanzi_count:</span><br><span class="line">  # count values only if the other configs are false</span><br><span class="line">  enable: true</span><br></pre></td></tr></table></figure><p>Then the blog home page will have site view count at the bottom and each post page will have post view count at the bottom.</p><h3 id="Enable-local-search"><a href="#Enable-local-search" class="headerlink" title="Enable local search"></a>Enable local search</h3><p>Install hexo-generator-searchdb plugin</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure><p>Edit blog configuration file _config.yml, add</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br><span class="line">  format: html</span><br><span class="line">  limit: 10000</span><br></pre></td></tr></table></figure><p>Edit theme configuration file theme/next/_config.yml</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">local_search:</span><br><span class="line">  enable: true</span><br></pre></td></tr></table></figure><p>Then the blog menu will have a “search” button</p><h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><p>If the blog is too long and you don’t want the whole blog content show in the blog home page, add a line to blog post markdown file where you want to insert a “Read more” button.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--more--&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>First blog - Setting up my github pages blog with Hexo</title>
      <link href="/2017/12/21/First-blog-Setting-up-my-github-pages-blog-with-Hexo/"/>
      <url>/2017/12/21/First-blog-Setting-up-my-github-pages-blog-with-Hexo/</url>
      
        <content type="html"><![CDATA[<h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><h4 id="Github-pages"><a href="#Github-pages" class="headerlink" title="Github pages"></a>Github pages</h4><p><a href="https://pages.github.com/" target="_blank" rel="noopener">Github pages</a> is a github service that can host personal or project web pages directly from a github repository. This is ideal place to host my blog site because it is fast, and I will have a <username>github.io domain, and there are some really cool blog frameworks that support deploying blog site to Github Pages.</p><h4 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h4><p>The most popular blog framework that supports github pages is Jekyll It seems, because it is officially recommended by github.  But I found another framework <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>, which compared to Jekyll, is similar but much easier to use, I only need to know 4 commands,</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo n # new post</span><br><span class="line">hexo g # generate</span><br><span class="line">hexo s # server</span><br><span class="line">hexo d # deploy</span><br></pre></td></tr></table></figure><p>After I checked out some Hexo built blog sites, I decied to go with Hexo.  Hexo is wirtten in node.js, and it supports a lot powerfull plugins and has cool themes.</p><a id="more"></a><h3 id="Install-Hexo"><a href="#Install-Hexo" class="headerlink" title="Install Hexo"></a>Install Hexo</h3><p>Follow <a href="https://hexo.io/docs/index.html" target="_blank" rel="noopener">Hexo doc</a></p><h4 id="Set-up-Github-Pages"><a href="#Set-up-Github-Pages" class="headerlink" title="Set up Github Pages"></a>Set up Github Pages</h4><p>Create github pages repository on github.com, the repository name is vmnet8.github.io where vmnet8 is my github account.</p><h4 id="Install-and-configure-Git-which-Hexo-requires"><a href="#Install-and-configure-Git-which-Hexo-requires" class="headerlink" title="Install and configure Git which Hexo requires"></a>Install and configure Git which Hexo requires</h4><p>Install git. I am coding and will be blogging on my Ubuntu Linux, to use Hexo to deploy my blog site to github pages, I need to install and configure git first. Install:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install git</span><br></pre></td></tr></table></figure><p>Configure git with github</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name &quot;Anna X&quot;</span><br><span class="line">$ git config --global user.email &quot;vmnet8@gmail.com&quot;</span><br><span class="line">$ git config --list</span><br></pre></td></tr></table></figure><p>Add my <a href="https://github.com/settings/keys" target="_blank" rel="noopener">ssh public key to github</a>.  I will have Hexo deploy to github pages over ssh without asking username and password.</p><h4 id="Install-Node-js"><a href="#Install-Node-js" class="headerlink" title="Install Node.js"></a>Install Node.js</h4><p>Follow <a href="https://nodejs.org/en/download/package-manager/#debian-and-ubuntu-based-linux-distributions" target="_blank" rel="noopener">node.js doc</a><br>Install node.js using package manager - APT</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -</span><br><span class="line">$ sudo apt install -y nodejs</span><br></pre></td></tr></table></figure><p>As of 12/21/2017, node.js version is v8.9.3</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ node -v</span><br><span class="line">v8.9.3</span><br></pre></td></tr></table></figure><h4 id="Install-hexo-cli"><a href="#Install-hexo-cli" class="headerlink" title="Install hexo-cli"></a>Install hexo-cli</h4><p>Follow <a href="https://hexo.io/docs/index.html" target="_blank" rel="noopener">Hexo doc</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>As of 12/21/2017, hexo version 3.4.3</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ hexo version</span><br><span class="line">hexo: 3.4.3</span><br><span class="line">hexo-cli: 1.0.4</span><br><span class="line">os: Linux 4.4.0-103-generic linux x64</span><br><span class="line">http_parser: 2.7.0</span><br><span class="line">node: 8.9.3</span><br><span class="line">v8: 6.1.534.48</span><br><span class="line">uv: 1.15.0</span><br><span class="line">zlib: 1.2.11</span><br><span class="line">ares: 1.10.1-DEV</span><br><span class="line">modules: 57</span><br><span class="line">nghttp2: 1.25.0</span><br><span class="line">openssl: 1.0.2n</span><br><span class="line">icu: 59.1</span><br><span class="line">unicode: 9.0</span><br><span class="line">cldr: 31.0.1</span><br><span class="line">tz: 2017b</span><br></pre></td></tr></table></figure><h3 id="Build-my-blog-using-Hexo"><a href="#Build-my-blog-using-Hexo" class="headerlink" title="Build my blog using Hexo"></a>Build my blog using Hexo</h3><h4 id="Initialize-my-blog-folder"><a href="#Initialize-my-blog-folder" class="headerlink" title="Initialize my blog folder"></a>Initialize my blog folder</h4><p>Follow <a href="https://hexo.io/docs/setup.html" target="_blank" rel="noopener">Hexo setup doc</a>, I use “vmnet8.github.io” as my blog folder.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init vmnet8.github.io</span><br><span class="line">$ <span class="built_in">cd</span> vmnet.github.io/</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure><h4 id="Basic-blog-site-configuration"><a href="#Basic-blog-site-configuration" class="headerlink" title="Basic blog site configuration"></a>Basic blog site configuration</h4><p>Edit blog configuration file _config.yml in blog folder.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Site</span><br><span class="line">title: Anna&apos;s blog</span><br><span class="line">subtitle: My tech blog</span><br><span class="line">description:</span><br><span class="line">author: Anna X</span><br><span class="line">language: en</span><br><span class="line">timezone: America/Los_Angeles</span><br></pre></td></tr></table></figure><p>Note that when editing _config.yml file which is <a href="http://www.yaml.org/start.html" target="_blank" rel="noopener">YAML format file</a>, for key-value pairs format like “key: value”, there should be a space after “:”, same for sequence item, there should be a space after “-“</p><h3 id="Create-blog-post-using-Hexo"><a href="#Create-blog-post-using-Hexo" class="headerlink" title="Create blog post using Hexo"></a>Create blog post using Hexo</h3><h4 id="Create-my-first-blog-post"><a href="#Create-my-first-blog-post" class="headerlink" title="Create my first blog post"></a>Create my first blog post</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"1st blog"</span></span><br><span class="line">INFO  Created: ~/vmnet8.github.io/<span class="built_in">source</span>/_posts/1st-blog.md</span><br></pre></td></tr></table></figure><p> Edit the blog post file 1st-blog.md</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vi <span class="built_in">source</span>/_post/1st-blog.md</span><br></pre></td></tr></table></figure><p>The blog post .md file is <a href="https://en.wikipedia.org/wiki/Markdown" target="_blank" rel="noopener">markdown format</a>  file with a header called “Front matter”</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 1st blog</span><br><span class="line">date: 2017-12-21 12:44:07</span><br><span class="line">---</span><br><span class="line">This is my first blog post.</span><br></pre></td></tr></table></figure><p>The front matter is <a href="http://www.yaml.org/start.html" target="_blank" rel="noopener">YAML format</a> .<br>The blog content below front matter is <a href="https://en.wikipedia.org/wiki/Markdown" target="_blank" rel="noopener">markdown format</a> which is a lightweight markup language with plain text formatting syntax. It is designed so that it can be converted to HTML.</p><p>When creating blog folder using “hexo init”, a sample blog post source/_posts/hello-world.md will be created automatically, you can cat it for reference.</p><h4 id="Test-blog-post"><a href="#Test-blog-post" class="headerlink" title="Test blog post"></a>Test blog post</h4><p>Run “hexo g” to generate the static html files and “hexo server” to start http service on port 4000 for blog access.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g</span><br><span class="line">$ hexo s</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000/. Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure><p>Then go to <a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a> in browser.<br>Notes:</p><ul><li>Every time you run hexo command, you current dir should be the hexo blog folder.</li><li>Note: every time you make change to the configuration file or any page or post, you need to do “hexo g” to generate the new static html files.  If something wrong happens due to wrong syntax in yml configuration file or md markdown file, you may need to do “hexo clean” and then “hexo g” to re-generate all blog html files.</li></ul><h3 id="Deploy-blog-to-github-pages"><a href="#Deploy-blog-to-github-pages" class="headerlink" title="Deploy blog to github pages"></a>Deploy blog to github pages</h3><p>Follow <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Hexo deployment doc</a><br>Install git hexo deployer plugin.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>Note: When you install hexo module by “npm install <module> –save”, your current dir should also be the blog fold.<br> Configure deployment to higthub, edit blog configuration file _config.yml in blog folder</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git@github.com:vmnet8/vmnet8.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>I use ssh instead of https for my github pages repository access for Hexo, so I won’t need to enter username/password for deployment to github.<br> Deploy to github pages</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo d</span><br></pre></td></tr></table></figure><p>Then go to my github pages <a href="https://vmnet8.github.io">https://vmnet8.github.io</a> in browser.</p>]]></content>
      
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2017/12/19/hello-world/"/>
      <url>/2017/12/19/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> blog </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
