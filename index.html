<!DOCTYPE html>





<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.1">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.1" color="#222">
  <link rel="alternate" href="/atom.xml" title="Anna X" type="application/atom+xml">

<link rel="stylesheet" href="/css/main.css?v=7.4.1">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.4.1',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="Happy coding ...">
<meta property="og:type" content="website">
<meta property="og:title" content="Anna X">
<meta property="og:url" content="https:&#x2F;&#x2F;vmnet8.github.io&#x2F;index.html">
<meta property="og:site_name" content="Anna X">
<meta property="og:description" content="Happy coding ...">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
  <link rel="canonical" href="https://vmnet8.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Anna X</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Anna X</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Anna's Tech Blog</p>
      
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    
      
      
        
      
        
      
        
      
    

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    
      
      
        
      
        
      
        
      
    

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    
      
      
        
      
        
      
        
          
        
      
    

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags<span class="badge">20</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    
      
      
        
          
        
      
        
      
        
      
    

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives<span class="badge">45</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a href="javascript:;" target="_blank" rel="noopener" class="popup-trigger">
        
          <i class="fa fa-search fa-fw"></i>Search</a>
      </li>
    
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="Searching..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://vmnet8.github.io/2020/06/03/Ansible-part6-ansible-vault-encrypt-file/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anna X">
      <meta itemprop="description" content="Happy coding ...">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/34552097">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anna X">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2020/06/03/Ansible-part6-ansible-vault-encrypt-file/" class="post-title-link" itemprop="url">Ansible part6: ansible vault encrypt file</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2020-06-03 00:24:34 / Modified: 14:47:15" itemprop="dateCreated datePublished" datetime="2020-06-03T00:24:34-07:00">2020-06-03</time>
            </span>
          
            

            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/06/03/Ansible-part6-ansible-vault-encrypt-file/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/06/03/Ansible-part6-ansible-vault-encrypt-file/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Ansible Vault is a feature of ansible that allows you to keep sensitive data such as passwords or keys in encrypted files, rather than as plaintext in playbooks or roles. These vault files can then be distributed or placed in source control.</p>
<h4 id="encrypt-a-file-using-ansible-vault"><a href="#encrypt-a-file-using-ansible-vault" class="headerlink" title="encrypt a file using ansible-vault"></a>encrypt a file using ansible-vault</h4><p>I created a vars file to test ansible-vault command</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">port: 443</span><br><span class="line">greeting: &quot;greeting from vars file&quot;</span><br><span class="line">ansible_user: pi</span><br></pre></td></tr></table></figure>
          <!--noindex-->
          
            <div class="post-button">
              <a class="btn" href="/2020/06/03/Ansible-part6-ansible-vault-encrypt-file/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://vmnet8.github.io/2020/06/02/Ansible-part5-how-to-use-module/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anna X">
      <meta itemprop="description" content="Happy coding ...">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/34552097">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anna X">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2020/06/02/Ansible-part5-how-to-use-module/" class="post-title-link" itemprop="url">Ansible part5: how to use module - command module and register and return value of module</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2020-06-02 14:03:25" itemprop="dateCreated datePublished" datetime="2020-06-02T14:03:25-07:00">2020-06-02</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-06-03 00:16:11" itemprop="dateModified" datetime="2020-06-03T00:16:11-07:00">2020-06-03</time>
              </span>
            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/06/02/Ansible-part5-how-to-use-module/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/06/02/Ansible-part5-how-to-use-module/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>In this session, I am going to talk about command module.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tasks:</span><br><span class="line">    - name: test command module</span><br><span class="line">      command: cat /etc/hosts</span><br></pre></td></tr></table></figure>
<p>the playbook is pretty simple, let’s look at output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">anna@ansible-controller:~/Desktop/ansible-code/inventory/modules/command-modules$ ansible-playbook site.yml </span><br><span class="line"></span><br><span class="line">PLAY [test command module] ******************************************************</span><br><span class="line"></span><br><span class="line">TASK [test command module] ******************************************************</span><br><span class="line">changed: [ansible-node1]</span><br><span class="line">changed: [cube4200]</span><br><span class="line"></span><br><span class="line">PLAY RECAP **********************************************************************</span><br><span class="line">ansible-node1              : ok=1    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   </span><br><span class="line">cube4200                   : ok=1    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0</span><br></pre></td></tr></table></figure>
<p>It shows successfully exectute ansible tasks, but I didn’t see the context of /etc/hosts.</p>
<p>If I want to see the output, I am supposed to let output to be a variable, it looks like following:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tasks:</span><br><span class="line">    - name: test command module</span><br><span class="line">      command: cat /etc/hosts</span><br><span class="line">      register: output</span><br><span class="line">    - name: print the output of command</span><br><span class="line">      debug:</span><br><span class="line">        msg: &quot;&#123;&#123; output &#125;&#125;&quot;</span><br></pre></td></tr></table></figure>
<p>after adding register, I can see the /etc/hosts now.</p>
          <!--noindex-->
          
            <div class="post-button">
              <a class="btn" href="/2020/06/02/Ansible-part5-how-to-use-module/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://vmnet8.github.io/2020/06/02/Ansible-part4-how-to-use-modules-net-tools/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anna X">
      <meta itemprop="description" content="Happy coding ...">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/34552097">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anna X">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2020/06/02/Ansible-part4-how-to-use-modules-net-tools/" class="post-title-link" itemprop="url">Ansible part4: how to use modules - net tools get url</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2020-06-02 11:53:29 / Modified: 13:53:23" itemprop="dateCreated datePublished" datetime="2020-06-02T11:53:29-07:00">2020-06-02</time>
            </span>
          
            

            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/06/02/Ansible-part4-how-to-use-modules-net-tools/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/06/02/Ansible-part4-how-to-use-modules-net-tools/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>If I am going to download an python archived file from python.org, I need to use net tools and file module to achieve my goal.</p>
<h4 id="Net-tools-module-get-url"><a href="#Net-tools-module-get-url" class="headerlink" title="Net tools module: get_url"></a>Net tools module: get_url</h4><p>playbook:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tasks:</span><br><span class="line">   - name: mkdir</span><br><span class="line">     file:</span><br><span class="line">      path: /tmp/python-download/    # use file module to create directory name /tmp/python-download</span><br><span class="line">      state: directory</span><br><span class="line">   - name: get url</span><br><span class="line">     get_url:</span><br><span class="line">       url: https://www.python.org/ftp/python/3.8.3/Python-3.8.3.tgz    # the download url</span><br><span class="line">       dest: /tmp/python-download/</span><br></pre></td></tr></table></figure>
<p>output:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">anna@ansible-controller:~/Desktop/ansible-code/inventory/modules/net-tools-modules$ ansible-playbook site.yml </span><br><span class="line"></span><br><span class="line">PLAY [test net tool get_url] ****************************************************</span><br><span class="line"></span><br><span class="line">TASK [Gathering Facts] **********************************************************</span><br><span class="line">ok: [ansible-node1]</span><br><span class="line">ok: [cube4200]</span><br><span class="line"></span><br><span class="line">TASK [mkdir] ********************************************************************</span><br><span class="line">changed: [ansible-node1]</span><br><span class="line">changed: [cube4200]</span><br><span class="line"></span><br><span class="line">TASK [get url] ******************************************************************</span><br><span class="line">changed: [ansible-node1]</span><br><span class="line">changed: [cube4200]</span><br><span class="line"></span><br><span class="line">PLAY RECAP **********************************************************************</span><br><span class="line">ansible-node1              : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   </span><br><span class="line">cube4200                   : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0</span><br></pre></td></tr></table></figure>
<p>we can check if the python file  has been downloaded.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">anna@ansible-controller:~/Desktop/ansible-code/inventory/modules/net-tools-modules$ ansible all -m shell -a &quot;ls /tmp/python-download&quot;</span><br><span class="line">ansible-node1 | CHANGED | rc=0 &gt;&gt;</span><br><span class="line">Python-3.8.3.tgz</span><br><span class="line">cube4200 | CHANGED | rc=0 &gt;&gt;</span><br><span class="line">Python-3.8.3.tgz</span><br></pre></td></tr></table></figure>
<p>It shows Python-3.8.3.tgz already downloaded.</p>
<h4 id="file-modules-unarchive"><a href="#file-modules-unarchive" class="headerlink" title="file modules: unarchive"></a>file modules: unarchive</h4><p>In order to unarchive Python-3.8.3.tgz, I need to use unarchive module</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- name: unarchive compress file</span><br><span class="line">      unarchive:</span><br><span class="line">        src: /tmp/python-download/Python-3.8.3.tgz</span><br><span class="line">        dest: /etc/tmp</span><br><span class="line">        remote_src: yes   #indicate the archived file is already on the remote system and not local to the Ansible controller.</span><br></pre></td></tr></table></figure>
<p>Notice: <code>remote_src</code> default is no, which means ansible is going to find Python-3.8.3.tgz at my local machine, but actually this file already is in remote, so I need to switch to yes.</p>
<p>output is:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">anna@ansible-controller:~/Desktop/ansible-code/inventory/modules/net-tools-modules$ ansible-playbook site.yml </span><br><span class="line"></span><br><span class="line">TASK [unarchive compress file] *****************************************************************************************************************************************************************************************************************</span><br><span class="line">changed: [cube4200]</span><br><span class="line">changed: [ansible-node1]</span><br><span class="line"></span><br><span class="line">PLAY RECAP *************************************************************************************************************************************************************************************************************************************</span><br><span class="line">ansible-node1              : ok=4    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   </span><br><span class="line">cube4200                   : ok=4    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   </span><br><span class="line"></span><br><span class="line">anna@ansible-controller:~/Desktop/ansible-code/inventory/modules/net-tools-modules$ ansible all -m shell -a  &quot;ls /etc/tmp&quot;</span><br><span class="line">cube4200 | CHANGED | rc=0 &gt;&gt;</span><br><span class="line">Python-3.8.3</span><br><span class="line">ansible-node1 | CHANGED | rc=0 &gt;&gt;</span><br><span class="line">Python-3.8.3</span><br></pre></td></tr></table></figure>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://vmnet8.github.io/2020/05/27/Ansible-part3-how-to-use-modules/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anna X">
      <meta itemprop="description" content="Happy coding ...">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/34552097">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anna X">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2020/05/27/Ansible-part3-how-to-use-modules/" class="post-title-link" itemprop="url">Ansible-part3: how to use modules - yum apt package</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2020-05-27 00:17:59" itemprop="dateCreated datePublished" datetime="2020-05-27T00:17:59-07:00">2020-05-27</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-06-02 11:33:31" itemprop="dateModified" datetime="2020-06-02T11:33:31-07:00">2020-06-02</time>
              </span>
            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/05/27/Ansible-part3-how-to-use-modules/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/05/27/Ansible-part3-how-to-use-modules/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="packaging-module-yum"><a href="#packaging-module-yum" class="headerlink" title="packaging module: yum"></a>packaging module: yum</h4><p>yum is CentOS Linux package management tool.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tasks:</span><br><span class="line">    - name: upgrade all packages</span><br><span class="line">      yum:</span><br><span class="line">        name: &apos;*&apos;   # update all packages</span><br><span class="line">        state: latest</span><br><span class="line">    - name: install a package</span><br><span class="line">      yum:</span><br><span class="line">        name: git</span><br><span class="line">        state: latest</span><br></pre></td></tr></table></figure>
<p>output is:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">anna@ansible-controller:~/Desktop/ansible-code/inventory/modules/packaging_modules/inventory$ ansible-playbook site.yml </span><br><span class="line"></span><br><span class="line">PLAY [test packageing modules] **************************************************</span><br><span class="line"></span><br><span class="line">TASK [upgrade all packages] *****************************************************</span><br><span class="line">changed: [cube4200]</span><br><span class="line"></span><br><span class="line">TASK [install a package] ********************************************************</span><br><span class="line">changed: [cube4200]</span><br><span class="line"></span><br><span class="line">PLAY RECAP **********************************************************************</span><br><span class="line">cube4200                   : ok=2    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   </span><br><span class="line">[anna@cube4200 ~]$ which git</span><br><span class="line">/usr/bin/git</span><br><span class="line">[anna@cube4200 ~]$ git --version</span><br><span class="line">git version 1.8.3.1</span><br></pre></td></tr></table></figure>
<p>Notice: the update task took long time to update  all packages.</p>
<h4 id="packaging-module-apt"><a href="#packaging-module-apt" class="headerlink" title="packaging module: apt"></a>packaging module: apt</h4><p>apt is Ubuntu package management tool.</p>
<p>In this example, I am going to install git in two different linux, one use yum on CentOS, anther one use apt on Debian. So I need to add some condition to let ansible know which node should use yum or apt.<br>Before running site.yml  I can use <code>ansible web1 -m gather_facts |grep distribution</code> to see the OS of nodes.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">tasks:</span><br><span class="line">    - name: test yum module</span><br><span class="line">      yum:</span><br><span class="line">        name: git</span><br><span class="line">        state: latest</span><br><span class="line">      when: ansible_facts[&apos;distribution&apos;] == &quot;CentOS&quot;    # this is from gather_facts</span><br><span class="line">    - name: test apt module</span><br><span class="line">      apt:</span><br><span class="line">        name: git</span><br><span class="line">        state: latest</span><br><span class="line">      when: ansible_facts[&apos;distribution&apos;] == &quot;Debian&quot;</span><br></pre></td></tr></table></figure>

<p>During running, I can see ansible will judge which command (apt or yum) to use.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">anna@ansible-controller:~/Desktop/ansible-code/inventory/modules/packaging_modules/inventory$ ansible-playbook site.yml </span><br><span class="line"></span><br><span class="line">PLAY [test packageing modules] **************************************************</span><br><span class="line"></span><br><span class="line">TASK [Gathering Facts] **********************************************************</span><br><span class="line">ok: [ansible-node1]</span><br><span class="line">ok: [cube4200]</span><br><span class="line"></span><br><span class="line">TASK [test yum module] **********************************************************</span><br><span class="line">skipping: [ansible-node1]</span><br><span class="line">changed: [cube4200]</span><br><span class="line"></span><br><span class="line">TASK [test apt module] **********************************************************</span><br><span class="line">skipping: [cube4200]</span><br><span class="line">ok: [ansible-node1]</span><br><span class="line"></span><br><span class="line">PLAY RECAP **********************************************************************</span><br><span class="line">ansible-node1              : ok=2    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   </span><br><span class="line">cube4200                   : ok=2    changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0</span><br></pre></td></tr></table></figure>
<p>cube4200 uses CentOS, so when testing apt command, it is skipped; ansible_node1 uses Debian, which is skipped when testing yum.</p>
<h4 id="packaging-module-package"><a href="#packaging-module-package" class="headerlink" title="packaging module: package"></a>packaging module: package</h4><p>package module is more general and simplify the installing packages</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tasks:</span><br><span class="line">    - name: test package module</span><br><span class="line">      package:</span><br><span class="line">        name: git</span><br><span class="line">        state: latest</span><br></pre></td></tr></table></figure>

<p>Notice: sometime package will have different name in different OS, under this situation, package module will not work, I still need to use yum or apt with gather_facts conditon to install packages.</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://vmnet8.github.io/2020/05/23/Ansible-part-2-examples-of-how-to-use-modules/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anna X">
      <meta itemprop="description" content="Happy coding ...">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/34552097">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anna X">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2020/05/23/Ansible-part-2-examples-of-how-to-use-modules/" class="post-title-link" itemprop="url">Ansible part 2: how to use modules - debug copy file template ping gather-facts user group</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2020-05-23 23:04:19" itemprop="dateCreated datePublished" datetime="2020-05-23T23:04:19-07:00">2020-05-23</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-06-02 11:39:52" itemprop="dateModified" datetime="2020-06-02T11:39:52-07:00">2020-06-02</time>
              </span>
            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/05/23/Ansible-part-2-examples-of-how-to-use-modules/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/05/23/Ansible-part-2-examples-of-how-to-use-modules/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="Ansible-configuration"><a href="#Ansible-configuration" class="headerlink" title="Ansible configuration"></a>Ansible configuration</h4><p>Before running ansible,I am going to write a default inventory which will be used when I am running site.yml.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[defaults]</span><br><span class="line">inventory = hosts</span><br></pre></td></tr></table></figure>

<h4 id="Ansible-commands"><a href="#Ansible-commands" class="headerlink" title="Ansible commands"></a>Ansible commands</h4><p>Instead of using ansible playbook, I can also use ansible command to run automation, for example, I am going to check remote nodes directories, I can use ansible command to do that directly, no need to login romote node to check.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">anna@ansible-controller:~/Desktop/ansible-code/inventory/modules/files-modules/inventory$ ansible all -m shell -a &quot;ls /etc/tmp&quot;</span><br><span class="line">ansible-node1 | SUCCESS | rc=0 &gt;&gt;</span><br><span class="line">ansible-file-test.txt</span><br><span class="line">ansible-file-test.txt.16075.2020-05-24@22:58:43~</span><br><span class="line"></span><br><span class="line">cube4200 | SUCCESS | rc=0 &gt;&gt;</span><br><span class="line">ansible-file-test.txt</span><br><span class="line">ansible-file-test.txt.11629.2020-05-24@15:58:44~</span><br></pre></td></tr></table></figure>
<p>The command I used is  <code>ansible all -m shell -a &quot;ls /etc/tmp&quot;</code></p>
<h4 id="some-examples-of-how-to-use-modules"><a href="#some-examples-of-how-to-use-modules" class="headerlink" title="some examples of how to use modules"></a>some examples of how to use modules</h4><h5 id="Utilities-modules-gt-debug-gt-print-statements-during-execution"><a href="#Utilities-modules-gt-debug-gt-print-statements-during-execution" class="headerlink" title="Utilities modules -&gt; debug -&gt; print statements during execution"></a>Utilities modules -&gt; debug -&gt; print statements during execution</h5><p>In this module, only three parameters.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- name: hello world</span><br><span class="line">  hosts: localhost</span><br><span class="line">  tasks:</span><br><span class="line">   - name: hello world</span><br><span class="line">     debug:</span><br><span class="line">      msg: &quot;hello ansible&quot;</span><br><span class="line">      verbosity: 0     # 0 is default, 1-3 parameters will skip the message</span><br></pre></td></tr></table></figure>
          <!--noindex-->
          
            <div class="post-button">
              <a class="btn" href="/2020/05/23/Ansible-part-2-examples-of-how-to-use-modules/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://vmnet8.github.io/2020/05/21/Ansible-deploy-enviroment-and-concept/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anna X">
      <meta itemprop="description" content="Happy coding ...">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/34552097">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anna X">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2020/05/21/Ansible-deploy-enviroment-and-concept/" class="post-title-link" itemprop="url">Ansible part 1: deploy enviroment and most important concepts</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2020-05-21 17:31:05" itemprop="dateCreated datePublished" datetime="2020-05-21T17:31:05-07:00">2020-05-21</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-05-26 23:11:34" itemprop="dateModified" datetime="2020-05-26T23:11:34-07:00">2020-05-26</time>
              </span>
            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/05/21/Ansible-deploy-enviroment-and-concept/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/05/21/Ansible-deploy-enviroment-and-concept/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="what-is-Ansible"><a href="#what-is-Ansible" class="headerlink" title="what is Ansible"></a>what is Ansible</h2><p>Ansible is an IT automation tool. It can configure systems, deploy software, and orchestrate more advanced IT tasks such as continuous deployments or zero downtime rolling updates.</p>
<p>There are three main parts in Ansible: inventory, playbook and modules.</p>
<h3 id="Inventory"><a href="#Inventory" class="headerlink" title="Inventory"></a>Inventory</h3><p>Inventory is a list of managed nodes. An inventory file is also sometimes called a “hostfile”. Your inventory can specify information like IP address for each managed node. An inventory can also organize managed nodes, creating and nesting groups for easier scaling.</p>
<p>For my enviroment, there are two nodes:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[web1]</span><br><span class="line">ansible-node1 ansible_connection=ssh ansible_user=pi</span><br><span class="line">[web2]</span><br><span class="line">cube4200 ansible_connection=ssh ansible_user=anna</span><br></pre></td></tr></table></figure>


<h3 id="Playbooks"><a href="#Playbooks" class="headerlink" title="Playbooks"></a>Playbooks</h3><p>Playbooks are Ansible’s configuration, deployment and orchestration language. Each playbook is composed of one or more ‘plays’ in a list.</p>
<p>Playsbook is yaml file. there are listed tasks you want ansible to work.<br>Playbook is the most important file in ansible.</p>
<p>In playbooks, there are some important concepts, such as variables, variables files, loops.</p>
<h4 id="variables"><a href="#variables" class="headerlink" title="variables"></a>variables</h4><p><a href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_variables.html" target="_blank" rel="noopener">playbook variables</a> can be wrote directly in playbook or in variable files. all kinds variabls have their precendence during playbook exectued. </p>
          <!--noindex-->
          
            <div class="post-button">
              <a class="btn" href="/2020/05/21/Ansible-deploy-enviroment-and-concept/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://vmnet8.github.io/2020/05/11/Travis-CI-push-docker-manifest-to-dockerhub/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anna X">
      <meta itemprop="description" content="Happy coding ...">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/34552097">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anna X">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2020/05/11/Travis-CI-push-docker-manifest-to-dockerhub/" class="post-title-link" itemprop="url">Travis CI: push docker manifest to dockerhub</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2020-05-11 18:01:57" itemprop="dateCreated datePublished" datetime="2020-05-11T18:01:57-07:00">2020-05-11</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-06-03 15:12:35" itemprop="dateModified" datetime="2020-06-03T15:12:35-07:00">2020-06-03</time>
              </span>
            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/05/11/Travis-CI-push-docker-manifest-to-dockerhub/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/05/11/Travis-CI-push-docker-manifest-to-dockerhub/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>I am going to use Travis to continue create docker multiarch images, then push back to dockerhub repo.</p>
<h2 id="create-a-repo-in-my-github-account-named-travis-CICD-and-add-it-to-Travis-GitHub-Apps-Integration"><a href="#create-a-repo-in-my-github-account-named-travis-CICD-and-add-it-to-Travis-GitHub-Apps-Integration" class="headerlink" title="create a repo in my github account named travis-CICD and add it to Travis GitHub Apps Integration"></a>create a repo in my github account named <code>travis-CICD</code> and add it to <a href="http://travis-ci.com" target="_blank" rel="noopener">Travis</a> GitHub Apps Integration</h2><img src="/2020/05/11/Travis-CI-push-docker-manifest-to-dockerhub/travis1.png" class="">


<h2 id="under-the-travis-CICD-repo-create-a-travis-yml-file"><a href="#under-the-travis-CICD-repo-create-a-travis-yml-file" class="headerlink" title="under the travis-CICD repo, create a .travis.yml file"></a>under the travis-CICD repo, create a .travis.yml file</h2><p>Since github uses ruby, I don’t need to specify the language. For this project, I am going to work on docker, so I need to start docker.<br>I am going to use two docker images to create a multiarch using <code>docker manifest create</code> command.<br>Note: Because manifest is an experimental feature, I need to add <code>DOCKER_CLI_EXPERIMENTAL=enabled</code> in .travis.yml file.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">sudo: required</span><br><span class="line">addons:</span><br><span class="line">  apt:</span><br><span class="line">    update: true</span><br><span class="line">    packages:</span><br><span class="line">    - docker-ce</span><br><span class="line">services:</span><br><span class="line">- docker</span><br><span class="line">before_install:</span><br><span class="line">script:</span><br><span class="line">- docker pull treehouses/turtleblocksjs-tags:nginx-x86</span><br><span class="line">- docker pull treehouses/turtleblocksjs-tags:nginx-rpi</span><br><span class="line">- export DOCKER_CLI_EXPERIMENTAL=enabled</span><br><span class="line">- docker manifest create vmnet8/turtleblocksjs:annarocks2 treehouses/turtleblocksjs-tags:nginx-x86</span><br><span class="line">  treehouses/turtleblocksjs-tags:nginx-rpi</span><br><span class="line">- echo &quot;$DOCKER_PASSWORD&quot; | docker login -u &quot;$DOCKER_USERNAME&quot; --password-stdin</span><br><span class="line">- docker manifest push vmnet8/turtleblocksjs:annarocks2</span><br><span class="line">env:</span><br><span class="line">  global:</span><br></pre></td></tr></table></figure>

<h2 id="Go-to-dockerhub-to-get-a-new-token"><a href="#Go-to-dockerhub-to-get-a-new-token" class="headerlink" title="Go to dockerhub to get a new token"></a>Go to dockerhub to get a new token</h2><img src="/2020/05/11/Travis-CI-push-docker-manifest-to-dockerhub/travis2.png" class="">
          <!--noindex-->
          
            <div class="post-button">
              <a class="btn" href="/2020/05/11/Travis-CI-push-docker-manifest-to-dockerhub/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://vmnet8.github.io/2020/02/12/Using-docker-compose-yml-to-run-netdata/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anna X">
      <meta itemprop="description" content="Happy coding ...">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/34552097">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anna X">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2020/02/12/Using-docker-compose-yml-to-run-netdata/" class="post-title-link" itemprop="url">Using docker compose yml to run netdata</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2020-02-12 12:25:41" itemprop="dateCreated datePublished" datetime="2020-02-12T12:25:41-08:00">2020-02-12</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-06-03 15:12:50" itemprop="dateModified" datetime="2020-06-03T15:12:50-07:00">2020-06-03</time>
              </span>
            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/02/12/Using-docker-compose-yml-to-run-netdata/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/02/12/Using-docker-compose-yml-to-run-netdata/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Want to monitor your system and applications, Netdata is distributed, real-time performance and health monitoring for these. It is a highly-optimized monitoring agent you install on all your systems and containers.</p>
<p>I tried to use docker image to use netdata.</p>
<h2 id="Install-netdata-docker-image-and-run-it"><a href="#Install-netdata-docker-image-and-run-it" class="headerlink" title="Install netdata docker image and run it"></a>Install netdata docker image and run it</h2><p>It simply straightforward, just run docker command:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name=netdata \</span><br><span class="line">  -p 19999:19999 \</span><br><span class="line">  -v /etc/passwd:/host/etc/passwd:ro \</span><br><span class="line">  -v /etc/group:/host/etc/group:ro \</span><br><span class="line">  -v /proc:/host/proc:ro \</span><br><span class="line">  -v /sys:/host/sys:ro \</span><br><span class="line">  -v /etc/os-release:/host/etc/os-release:ro \</span><br><span class="line">  --cap-add SYS_PTRACE \</span><br><span class="line">  --security-opt apparmor=unconfined \</span><br><span class="line">  netdata/netdata</span><br></pre></td></tr></table></figure>
<p>then go to your browser, <a href="http://yourip:19999" target="_blank" rel="noopener">http://yourip:19999</a>, you can see netdata works.</p>
<h2 id="use-docker-compose-yml-file-to-run-netdata-service"><a href="#use-docker-compose-yml-file-to-run-netdata-service" class="headerlink" title="use docker compose yml file to run netdata service"></a>use docker compose yml file to run netdata service</h2><h3 id="write-a-shell-script-to-create-a-docker-yml-file-under-srv"><a href="#write-a-shell-script-to-create-a-docker-yml-file-under-srv" class="headerlink" title="write a shell script to create  a docker yml file under /srv"></a>write a shell script to create  a docker yml file under /srv</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">#create netdata.yml</span><br><span class="line">mkdir -p /srv/netdata/</span><br><span class="line">&#123;</span><br><span class="line">  echo &quot;version: &apos;3&apos;&quot;</span><br><span class="line">  echo &quot;services:&quot;</span><br><span class="line">  echo &quot;  netdata:&quot;</span><br><span class="line">  echo &quot;    image: netdata/netdata&quot;</span><br><span class="line">  echo &quot;    ports:&quot;</span><br><span class="line">  echo &quot;      - 19999:19999&quot;</span><br><span class="line">  echo &quot;    cap_add:&quot;</span><br><span class="line">  echo &quot;      - SYS_PTRACE&quot;</span><br><span class="line">  echo &quot;    security_opt:&quot;</span><br><span class="line">  echo &quot;      - apparmor:unconfined&quot;</span><br><span class="line">  echo &quot;    volumes:&quot;</span><br><span class="line">  echo &quot;      - /etc/passwd:/host/etc/passwd:ro&quot;</span><br><span class="line">  echo &quot;      - /etc/os-release:/host/etc/os-release:ro&quot;</span><br><span class="line">  echo &quot;      - /etc/group:/host/etc/group:ro&quot;</span><br><span class="line">  echo &quot;      - /proc:/host/proc:ro&quot;</span><br><span class="line">  echo &quot;      - /sys:/host/sys:ro&quot;</span><br><span class="line">&#125; &gt; /srv/netdata/netdata.yml</span><br></pre></td></tr></table></figure>

<p>run it, then go to /srv/netdata to check if it exists</p>
<p>at the same dir to  create an autorun file, named netdata_auto</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">netdata_autorun=true</span><br><span class="line"></span><br><span class="line">if [ &quot;$netdata_autorun&quot; = true ]; then</span><br><span class="line">  docker-compose -f /srv/netdata/netdata.yml -p netdata up -d</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>let me test</p>
<p>run shell script first</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@rpi-121:/home/pi/git_repo/cli/templates/services/netdata# ./netdata_yml.sh</span><br></pre></td></tr></table></figure>
<p>go to /srv to verify it created the docker compose yml file</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">root@rpi-121:/home/pi/git_repo/cli/templates/services/netdata# cat /srv/netdata/netdata.yml </span><br><span class="line">version: &apos;3&apos;</span><br><span class="line">services:</span><br><span class="line">  netdata:</span><br><span class="line">    image: netdata/netdata</span><br><span class="line">    ports:</span><br><span class="line">      - 19999:19999</span><br><span class="line">    cap_add:</span><br><span class="line">      - SYS_PTRACE</span><br><span class="line">    security_opt:</span><br><span class="line">      - apparmor:unconfined</span><br><span class="line">    volumes:</span><br><span class="line">      - /etc/passwd:/host/etc/passwd:ro</span><br><span class="line">      - /etc/os-release:/host/etc/os-release:ro</span><br><span class="line">      - /etc/group:/host/etc/group:ro</span><br><span class="line">      - /proc:/host/proc:ro</span><br><span class="line">      - /sys:/host/sys:ro</span><br></pre></td></tr></table></figure>
<p>then run docker-compose</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">root@rpi-121:/home/pi/git_repo/cli/templates/services/netdata# docker-compose -f /srv/netdata/netdata.yml -p netdata up -d</span><br><span class="line">Creating network &quot;netdata_default&quot; with the default driver</span><br><span class="line">Pulling netdata (netdata/netdata:)...</span><br><span class="line">latest: Pulling from netdata/netdata</span><br><span class="line">2aa204966f9a: Pull complete</span><br><span class="line">8dde373fbef5: Pull complete</span><br><span class="line">042f66a41d56: Pull complete</span><br><span class="line">3526782612f0: Pull complete</span><br><span class="line">c2b930d703fa: Pull complete</span><br><span class="line">9b859bae4175: Pull complete</span><br><span class="line">f3e46298693e: Pull complete</span><br><span class="line">Digest: sha256:b49e1901fd8aae43d950c171c14449b5080a5550faa97594e2d4ccee7ed3aac8</span><br><span class="line">Status: Downloaded newer image for netdata/netdata:latest</span><br><span class="line">Creating netdata_netdata_1 ... done</span><br></pre></td></tr></table></figure>

<p>check if the docker image is pulled and run</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@rpi-121:/home/pi/git_repo/cli/templates/services/netdata# docker images</span><br><span class="line">REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">netdata/netdata       latest              d170142fbe20        19 hours ago        249MB</span><br></pre></td></tr></table></figure>
<p>it worked well</p>
<p>go to browser <a href="http://myip:19999" target="_blank" rel="noopener">http://myip:19999</a></p>
          <!--noindex-->
          
            <div class="post-button">
              <a class="btn" href="/2020/02/12/Using-docker-compose-yml-to-run-netdata/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://vmnet8.github.io/2020/01/15/Docker-manifest-to-create-multi-arch-docker-image/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anna X">
      <meta itemprop="description" content="Happy coding ...">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/34552097">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anna X">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2020/01/15/Docker-manifest-to-create-multi-arch-docker-image/" class="post-title-link" itemprop="url">Docker manifest to create multi-arch docker image</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2020-01-15 21:26:57" itemprop="dateCreated datePublished" datetime="2020-01-15T21:26:57-08:00">2020-01-15</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-06-03 15:13:08" itemprop="dateModified" datetime="2020-06-03T15:13:08-07:00">2020-06-03</time>
              </span>
            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/01/15/Docker-manifest-to-create-multi-arch-docker-image/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/01/15/Docker-manifest-to-create-multi-arch-docker-image/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>go to github.com/treehouses/rpi-nginx  dir<br>modifid Dockerfile</p>
<p>run docker build<br>root@vmnet8cloud:~/git_repo/treehouses/rpi-nginx# docker build -t vmnet8/preplanet:rpi-1.1 .</p>
<p>root@vmnet8cloud:<del>/git_repo/treehouses/rpi-nginx# docker images<br>REPOSITORY                      TAG                     IMAGE ID            CREATED             SIZE<br>treehouses/rpi-nginx            1.0                     1bd2ae323561        3 minutes ago       50.7MB<br>root@vmnet8cloud:</del>/git_repo/treehouses/rpi-nginx# docker run -d treehouses/rpi-nginx:1.0<br>22992681fb717fcf19cd9691dbaf7089b2280e0667881e8d0ce18b9a1a82da70<br>root@vmnet8cloud:~/git_repo/treehouses/rpi-nginx# docker ps -a<br>CONTAINER ID        IMAGE                      COMMAND                  CREATED             STATUS                    PORTS                            NAMES<br>22992681fb71        treehouses/rpi-nginx:1.0   “/usr/bin/entry.sh n…”   9 seconds ago       Up 8 seconds              80/tcp, 443/tcp                  mystifying_rhodes</p>
<p>root@vmnet8cloud:~/git_repo/treehouses/rpi-nginx# docker push treehouses/rpi-nginx:1.0<br>The push refers to repository [docker.io/treehouses/rpi-nginx]<br>7023a6605ba3: Pushed<br>64ac289193c5: Pushed<br>4b51db9fecf2: Mounted from vmnet8/preplanet<br>4206eb6099cb: Mounted from vmnet8/preplanet<br>3d13333fb74a: Mounted from vmnet8/preplanet<br>6eca2d86fb5c: Mounted from vmnet8/preplanet<br>9863749692b7: Mounted from vmnet8/preplanet<br>77ffeb9e9842: Mounted from vmnet8/rpi-nginx<br>1.0: digest: sha256:acb7fc62ea8ba61ad58c17f774c35c8c3284a51dda29c575935c732655271c60 size: 1995</p>
<p>going to create a multi-arch docker hub</p>
<p>root@vmnet8cloud:~# docker images<br>REPOSITORY                      TAG                     IMAGE ID            CREATED             SIZE<br>treehouses/rpi-nginx            1.0                     1bd2ae323561        2 hours ago         50.7MB<br>nginx                           1.14.0-alpine           68513e2e4bce        16 months ago       14.4MB</p>
<p>I need use nginx:1.16.0-alpine to create multi-arch dockerhub image, so</p>
<p>root@vmnet8cloud:~# docker pull nginx:1.16.0-alpine</p>
<p>run </p>
<p>root@vmnet8cloud:~# docker images<br>REPOSITORY                      TAG                     IMAGE ID            CREATED             SIZE<br>treehouses/rpi-nginx            1.0                     1bd2ae323561        2 hours ago         50.7MB<br>nginx                           1.16.0-alpine           05edf438c0e4        8 months ago        17.6MB<br>nginx                           1.14.0-alpine           68513e2e4bce        16 months ago       14.4MB</p>
<p>In order to create docker manifest list, I need to modify the docker image’s tag</p>
<p>root@vmnet8cloud:<del># docker tag treehouses/rpi-nginx:1.0  treehouses/nginx:rpi<br>root@vmnet8cloud:</del># docker tag nginx:1.16.0-alpine  treehouses/nginx:x86</p>
<p>After change the tags, it shows new image name</p>
<p>root@vmnet8cloud:~# docker images<br>REPOSITORY                      TAG                     IMAGE ID            CREATED             SIZE<br>treehouses/nginx                rpi                     1bd2ae323561        2 hours ago         50.7MB<br>treehouses/rpi-nginx            1.0                     1bd2ae323561        2 hours ago         50.7MB<br>nginx                           1.16.0-alpine           05edf438c0e4        8 months ago        17.6MB<br>treehouses/nginx                x86                     05edf438c0e4        8 months ago        17.6MB<br>nginx                           1.14.0-alpine           68513e2e4bce        16 months ago       14.4MB</p>
<p>I need to push these two new images (name) to dockerhub</p>
<p>root@vmnet8cloud:<del>/git_repo/treehouses/rpi-nginx# docker push treehouses/nginx:rpi<br>root@vmnet8cloud:</del>/git_repo/treehouses/rpi-nginx# docker push treehouses/nginx:x86</p>
<p>create a multi-arch docker image</p>
<p>root@vmnet8cloud:~/git_repo/treehouses/rpi-nginx# docker manifest create treehouses/nginx:latest treehouses/nginx:x86 treehouses/nginx:rpi</p>
<p>Last steps to push this multi-arch to docker hub</p>
<p>root@vmnet8cloud:~/git_repo/treehouses/rpi-nginx# docker manifest push  treehouses/nginx</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://vmnet8.github.io/2020/01/13/Modify-a-Dockerfile/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anna X">
      <meta itemprop="description" content="Happy coding ...">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/34552097">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anna X">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2020/01/13/Modify-a-Dockerfile/" class="post-title-link" itemprop="url">Modify a Dockerfile</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2020-01-13 11:00:14" itemprop="dateCreated datePublished" datetime="2020-01-13T11:00:14-08:00">2020-01-13</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-06-03 15:11:59" itemprop="dateModified" datetime="2020-06-03T15:11:59-07:00">2020-06-03</time>
              </span>
            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/01/13/Modify-a-Dockerfile/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/01/13/Modify-a-Dockerfile/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>I need to rewrite a Dockerfile to create my own Dockerfile.<br>I pull a docker image base from dockerhub first.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">FROM balenalib/raspberry-pi-alpine:3.9</span><br><span class="line"></span><br><span class="line">LABEL org.opencontainers.image.authors=&quot;Tobias Hargesheimer &lt;docker@ison.ws&gt;&quot; \</span><br><span class="line">	org.opencontainers.image.title=&quot;NGINX&quot; \</span><br><span class="line">	org.opencontainers.image.description=&quot;AlpineLinux with NGINX on arm arch&quot; \</span><br><span class="line">	org.opencontainers.image.licenses=&quot;Apache-2.0&quot; \</span><br><span class="line">	org.opencontainers.image.url=&quot;https://hub.docker.com/r/tobi312/rpi-nginx/&quot; \</span><br><span class="line">	org.opencontainers.image.source=&quot;https://github.com/Tob1asDocker/rpi-nginx&quot;</span><br><span class="line"></span><br><span class="line">ARG CROSS_BUILD_START=&quot;:&quot;</span><br><span class="line">ARG CROSS_BUILD_END=&quot;:&quot;</span><br><span class="line"></span><br><span class="line">RUN [ $&#123;CROSS_BUILD_START&#125; ]</span><br><span class="line"></span><br><span class="line">ENV NGINX_VERSION 1.14</span><br><span class="line"></span><br><span class="line">RUN apk --no-cache add nginx&gt;$&#123;NGINX_VERSION&#125; \</span><br><span class="line">	&amp;&amp; mkdir -p /run/nginx \</span><br><span class="line">	&amp;&amp; sed -i &quot;s/ssl_session_cache shared:SSL:2m;/#ssl_session_cache shared:SSL:2m;/g&quot; /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line"># forward request and error logs to docker log collector</span><br><span class="line">RUN ln -sf /dev/stdout /var/log/nginx/access.log \</span><br><span class="line">	&amp;&amp; ln -sf /dev/stderr /var/log/nginx/error.log</span><br><span class="line">	</span><br><span class="line"># fix: *** stack smashing detected ***: nginx: worker process terminated / [alert] 9#9: worker process *process-id* exited on signal 6</span><br><span class="line">#RUN sed -i &quot;s/worker_processes auto;/worker_processes 1;/g&quot; /etc/nginx/nginx.conf</span><br><span class="line">	</span><br><span class="line">EXPOSE 80 443</span><br><span class="line"></span><br><span class="line">CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</span><br><span class="line"></span><br><span class="line">RUN [ $&#123;CROSS_BUILD_END&#125; ]</span><br></pre></td></tr></table></figure>

<p>For this image, its base is balenalib/raspberry-pi-alpine:3.9. when I am going to build my own docker image, it has the newest version, but I still use the old one, because it will be more stable for me.</p>
<p>I add some new command unders this docker base Dockerfile</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">FROM balenalib/raspberry-pi-alpine:3.9</span><br><span class="line"></span><br><span class="line">LABEL org.opencontainers.image.authors=&quot;Tobias Hargesheimer &lt;docker@ison.ws&gt;&quot; \</span><br><span class="line">	org.opencontainers.image.title=&quot;NGINX&quot; \</span><br><span class="line">	org.opencontainers.image.description=&quot;AlpineLinux with NGINX on arm arch&quot; \</span><br><span class="line">	org.opencontainers.image.licenses=&quot;Apache-2.0&quot; \</span><br><span class="line">	org.opencontainers.image.url=&quot;https://hub.docker.com/r/tobi312/rpi-nginx/&quot; \</span><br><span class="line">	org.opencontainers.image.source=&quot;https://github.com/Tob1asDocker/rpi-nginx&quot;</span><br><span class="line"></span><br><span class="line">ARG CROSS_BUILD_START=&quot;:&quot;</span><br><span class="line">ARG CROSS_BUILD_END=&quot;:&quot;</span><br><span class="line"></span><br><span class="line">RUN [ $&#123;CROSS_BUILD_START&#125; ]</span><br><span class="line"></span><br><span class="line">ENV NGINX_VERSION 1.14</span><br><span class="line"></span><br><span class="line">RUN apk --no-cache add nginx&gt;$&#123;NGINX_VERSION&#125; \</span><br><span class="line">	&amp;&amp; mkdir -p /run/nginx \</span><br><span class="line">	&amp;&amp; sed -i &quot;s/ssl_session_cache shared:SSL:2m;/#ssl_session_cache shared:SSL:2m;/g&quot; /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line"># forward request and error logs to docker log collector</span><br><span class="line">RUN ln -sf /dev/stdout /var/log/nginx/access.log \</span><br><span class="line">	&amp;&amp; ln -sf /dev/stderr /var/log/nginx/error.log</span><br><span class="line">	</span><br><span class="line"># fix: *** stack smashing detected ***: nginx: worker process terminated / [alert] 9#9: worker process *process-id* exited on signal 6</span><br><span class="line">#RUN sed -i &quot;s/worker_processes auto;/worker_processes 1;/g&quot; /etc/nginx/nginx.conf</span><br><span class="line">	</span><br><span class="line">EXPOSE 80 443</span><br><span class="line"></span><br><span class="line">CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</span><br><span class="line"></span><br><span class="line">RUN [ $&#123;CROSS_BUILD_END&#125; ]</span><br><span class="line">RUN apk add --no-cache \</span><br><span class="line"> fcgi=2.4.0-r8 \</span><br><span class="line">    fcgiwrap=1.1.0-r3 \</span><br><span class="line">    spawn-fcgi=1.6.4-r3 \</span><br><span class="line">      ca-certificates=20190108-r0 \</span><br><span class="line">      nghttp2-libs=1.35.1-r0 \</span><br><span class="line">      libssh2=1.8.2-r0 \</span><br><span class="line">      libcurl=7.64.0-r2 \</span><br><span class="line">    curl=7.64.0-r2 \</span><br><span class="line">      oniguruma=6.9.4-r0 \</span><br><span class="line">    jq=1.6-r0</span><br></pre></td></tr></table></figure>
<p>Notice: the packages need to be installed all have version numbers which will cause the error in the following.</p>
<p>After modify the Dockerfile, I am going to build my docker image.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">root@vmnet8cloud:~/git_repo/preplanet/docker/planet# docker build -t vmnet8/preplanet:rpi-1 .</span><br><span class="line">Sending build context to Docker daemon  4.096kB</span><br><span class="line">Step 1/12 : FROM balenalib/raspberry-pi-alpine:3.9</span><br><span class="line"> ---&gt; d6c5aebf964a</span><br><span class="line">Step 2/12 : LABEL org.opencontainers.image.authors=&quot;Tobias Hargesheimer &lt;docker@ison.ws&gt;&quot; 	org.opencontainers.image.title=&quot;NGINX&quot; 	org.opencontainers.image.description=&quot;AlpineLinux with NGINX on arm arch&quot; 	org.opencontainers.image.licenses=&quot;Apache-2.0&quot; 	org.opencontainers.image.url=&quot;https://hub.docker.com/r/tobi312/rpi-nginx/&quot; 	org.opencontainers.image.source=&quot;https://github.com/Tob1asDocker/rpi-nginx&quot;</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 1a8a69474af2</span><br><span class="line">Step 3/12 : ARG CROSS_BUILD_START=&quot;:&quot;</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 2ea7d76cc571</span><br><span class="line">Step 4/12 : ARG CROSS_BUILD_END=&quot;:&quot;</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 9dac95067f17</span><br><span class="line">Step 5/12 : RUN [ $&#123;CROSS_BUILD_START&#125; ]</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; e1d8ae03657f</span><br><span class="line">Step 6/12 : ENV NGINX_VERSION 1.14</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 684896377216</span><br><span class="line">Step 7/12 : RUN apk --no-cache add nginx&gt;$&#123;NGINX_VERSION&#125; 	&amp;&amp; mkdir -p /run/nginx 	&amp;&amp; sed -i &quot;s/ssl_session_cache shared:SSL:2m;/#ssl_session_cache shared:SSL:2m;/g&quot; /etc/nginx/nginx.conf</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; ef20e56136c1</span><br><span class="line">Step 8/12 : RUN ln -sf /dev/stdout /var/log/nginx/access.log 	&amp;&amp; ln -sf /dev/stderr /var/log/nginx/error.log</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 8d95b6ad6846</span><br><span class="line">Step 9/12 : EXPOSE 80 443</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; a12bf17fcaea</span><br><span class="line">Step 10/12 : CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 1f6e9eb85851</span><br><span class="line">Step 11/12 : RUN [ $&#123;CROSS_BUILD_END&#125; ]</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 969cc49b4faf</span><br><span class="line">Step 12/12 : RUN apk add --no-cache       fcgi=2.4.0-r8     fcgiwrap=1.1.0-r3     spawn-fcgi=1.6.4-r3       ca-certificates=20190108-r0       nghttp2-libs=1.35.1-r0       libssh2=1.8.2-r0       libcurl=7.64.0-r2     curl=7.64.0-r2       oniguruma=6.9.4-r0     jq=1.6-r0</span><br><span class="line"> ---&gt; Running in 910227bcece4</span><br><span class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.9/main/armhf/APKINDEX.tar.gz</span><br><span class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.9/community/armhf/APKINDEX.tar.gz</span><br><span class="line">ERROR: unsatisfiable constraints:</span><br><span class="line">  nghttp2-libs-1.35.1-r1:</span><br><span class="line">    breaks: world[nghttp2-libs=1.35.1-r0]</span><br><span class="line">    satisfies: libcurl-7.64.0-r3[so:libnghttp2.so.14]</span><br><span class="line">  libssh2-1.9.0-r1:</span><br><span class="line">    breaks: world[libssh2=1.8.2-r0]</span><br><span class="line">    satisfies: libcurl-7.64.0-r3[so:libssh2.so.1]</span><br><span class="line">  libcurl-7.64.0-r3:</span><br><span class="line">    breaks: world[libcurl=7.64.0-r2]</span><br><span class="line">    satisfies: curl-7.64.0-r3[so:libcurl.so.4]</span><br><span class="line">  curl-7.64.0-r3:</span><br><span class="line">    breaks: world[curl=7.64.0-r2]</span><br><span class="line">The command &apos;/bin/sh -c apk add --no-cache       fcgi=2.4.0-r8     fcgiwrap=1.1.0-r3     spawn-fcgi=1.6.4-r3       ca-certificates=20190108-r0       nghttp2-libs=1.35.1-r0       libssh2=1.8.2-r0       libcurl=7.64.0-r2     curl=7.64.0-r2       oniguruma=6.9.4-r0     jq=1.6-r0&apos; returned a non-zero code: 4</span><br></pre></td></tr></table></figure>

<p>It shows error.</p>
<p>I modified the Dockerfile again and move off all packages versions like following</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">FROM balenalib/raspberry-pi-alpine:3.9</span><br><span class="line"></span><br><span class="line">LABEL org.opencontainers.image.authors=&quot;Tobias Hargesheimer &lt;docker@ison.ws&gt;&quot; \</span><br><span class="line">	org.opencontainers.image.title=&quot;NGINX&quot; \</span><br><span class="line">	org.opencontainers.image.description=&quot;AlpineLinux with NGINX on arm arch&quot; \</span><br><span class="line">	org.opencontainers.image.licenses=&quot;Apache-2.0&quot; \</span><br><span class="line">	org.opencontainers.image.url=&quot;https://hub.docker.com/r/tobi312/rpi-nginx/&quot; \</span><br><span class="line">	org.opencontainers.image.source=&quot;https://github.com/Tob1asDocker/rpi-nginx&quot;</span><br><span class="line"></span><br><span class="line">ARG CROSS_BUILD_START=&quot;:&quot;</span><br><span class="line">ARG CROSS_BUILD_END=&quot;:&quot;</span><br><span class="line"></span><br><span class="line">RUN [ $&#123;CROSS_BUILD_START&#125; ]</span><br><span class="line"></span><br><span class="line">ENV NGINX_VERSION 1.14</span><br><span class="line"></span><br><span class="line">RUN apk --no-cache add nginx&gt;$&#123;NGINX_VERSION&#125; \</span><br><span class="line">	&amp;&amp; mkdir -p /run/nginx \</span><br><span class="line">	&amp;&amp; sed -i &quot;s/ssl_session_cache shared:SSL:2m;/#ssl_session_cache shared:SSL:2m;/g&quot; /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line"># forward request and error logs to docker log collector</span><br><span class="line">RUN ln -sf /dev/stdout /var/log/nginx/access.log \</span><br><span class="line">	&amp;&amp; ln -sf /dev/stderr /var/log/nginx/error.log</span><br><span class="line">	</span><br><span class="line"># fix: *** stack smashing detected ***: nginx: worker process terminated / [alert] 9#9: worker process *process-id* exited on signal 6</span><br><span class="line">#RUN sed -i &quot;s/worker_processes auto;/worker_processes 1;/g&quot; /etc/nginx/nginx.conf</span><br><span class="line">	</span><br><span class="line">EXPOSE 80 443</span><br><span class="line"></span><br><span class="line">CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</span><br><span class="line"></span><br><span class="line">RUN [ $&#123;CROSS_BUILD_END&#125; ]</span><br><span class="line">RUN apk add --no-cache \</span><br><span class="line">      fcgi \</span><br><span class="line">    fcgiwrap \</span><br><span class="line">    spawn-fcgi \</span><br><span class="line">      ca-certificates \</span><br><span class="line">      nghttp2-libs \</span><br><span class="line">      libssh2 \</span><br><span class="line">      libcurl \</span><br><span class="line">    curl \</span><br><span class="line">      oniguruma \</span><br><span class="line">    jq</span><br></pre></td></tr></table></figure>

<p>then build docker image again</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">root@vmnet8cloud:~/git_repo/preplanet/docker/planet# docker build -t vmnet8/preplanet:rpi-1 .</span><br><span class="line">Sending build context to Docker daemon  6.144kB</span><br><span class="line">Step 1/12 : FROM balenalib/raspberry-pi-alpine:3.9</span><br><span class="line"> ---&gt; d6c5aebf964a</span><br><span class="line">Step 2/12 : LABEL org.opencontainers.image.authors=&quot;Tobias Hargesheimer &lt;docker@ison.ws&gt;&quot; 	org.opencontainers.image.title=&quot;NGINX&quot; 	org.opencontainers.image.description=&quot;AlpineLinux with NGINX on arm arch&quot; 	org.opencontainers.image.licenses=&quot;Apache-2.0&quot; 	org.opencontainers.image.url=&quot;https://hub.docker.com/r/tobi312/rpi-nginx/&quot; 	org.opencontainers.image.source=&quot;https://github.com/Tob1asDocker/rpi-nginx&quot;</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 1a8a69474af2</span><br><span class="line">Step 3/12 : ARG CROSS_BUILD_START=&quot;:&quot;</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 2ea7d76cc571</span><br><span class="line">Step 4/12 : ARG CROSS_BUILD_END=&quot;:&quot;</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 9dac95067f17</span><br><span class="line">Step 5/12 : RUN [ $&#123;CROSS_BUILD_START&#125; ]</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; e1d8ae03657f</span><br><span class="line">Step 6/12 : ENV NGINX_VERSION 1.14</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 684896377216</span><br><span class="line">Step 7/12 : RUN apk --no-cache add nginx&gt;$&#123;NGINX_VERSION&#125; 	&amp;&amp; mkdir -p /run/nginx 	&amp;&amp; sed -i &quot;s/ssl_session_cache shared:SSL:2m;/#ssl_session_cache shared:SSL:2m;/g&quot; /etc/nginx/nginx.conf</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; ef20e56136c1</span><br><span class="line">Step 8/12 : RUN ln -sf /dev/stdout /var/log/nginx/access.log 	&amp;&amp; ln -sf /dev/stderr /var/log/nginx/error.log</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 8d95b6ad6846</span><br><span class="line">Step 9/12 : EXPOSE 80 443</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; a12bf17fcaea</span><br><span class="line">Step 10/12 : CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 1f6e9eb85851</span><br><span class="line">Step 11/12 : RUN [ $&#123;CROSS_BUILD_END&#125; ]</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 969cc49b4faf</span><br><span class="line">Step 12/12 : RUN apk add --no-cache       fcgi     fcgiwrap     spawn-fcgi       ca-certificates       nghttp2-libs       libssh2       libcurl     curl       oniguruma     jq</span><br><span class="line"> ---&gt; Running in 95d22279f720</span><br><span class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.9/main/armhf/APKINDEX.tar.gz</span><br><span class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.9/community/armhf/APKINDEX.tar.gz</span><br><span class="line">(1/5) Installing fcgi (2.4.0-r8)</span><br><span class="line">(2/5) Installing fcgiwrap (1.1.0-r3)</span><br><span class="line">Executing fcgiwrap-1.1.0-r3.pre-install</span><br><span class="line">(3/5) Installing oniguruma (6.9.4-r0)</span><br><span class="line">(4/5) Installing jq (1.6-r0)</span><br><span class="line">(5/5) Installing spawn-fcgi (1.6.4-r3)</span><br><span class="line">Executing busybox-1.29.3-r10.trigger</span><br><span class="line">OK: 52 MiB in 77 packages</span><br><span class="line">Removing intermediate container 95d22279f720</span><br><span class="line"> ---&gt; 7ee7b73f89ee</span><br><span class="line">Successfully built 7ee7b73f89ee</span><br><span class="line">Successfully tagged vmnet8/preplanet:rpi-1</span><br></pre></td></tr></table></figure>
<p>After building, test the running container</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">run docer image vmnet8/preplanet:rpi-1</span><br><span class="line">root@vmnet8cloud:~/git_repo/preplanet/docker/planet# docker run -d vmnet8/preplanet:rpi-1</span><br><span class="line">b974aee9b9bb0d6242dcbab12e975585ff1e2d4b887860523b6d0b261863d562</span><br><span class="line">root@vmnet8cloud:~/git_repo/preplanet/docker/planet# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE                    COMMAND                  CREATED             STATUS                          PORTS                            NAMES</span><br><span class="line">b974aee9b9bb        vmnet8/preplanet:rpi-1   &quot;/usr/bin/entry.sh n…&quot;   9 seconds ago       Up 7 seconds                    80/tcp, 443/tcp                  goofy_banach</span><br><span class="line">270cf6e3e185        vmnet8/preplanet:rpi-1   &quot;/usr/bin/entry.sh n…&quot;   2 minutes ago       Exited (0) About a minute ago                                    cranky_wing</span><br><span class="line">7259cecd0e74        969cc49b4faf             &quot;/bin/sh -c &apos;apk add…&quot;   11 hours ago        Exited (99) 11 hours ago                                         dreamy_brown</span><br><span class="line">910227bcece4        969cc49b4faf             &quot;/bin/sh -c &apos;apk add…&quot;   11 hours ago        Exited (4) 11 hours ago                                          modest_wu</span><br><span class="line">d4f32b1bc836        68513e2e4bce             &quot;/bin/sh -c &apos;apk add…&quot;   14 hours ago        Exited (6) 14 hours ago                                          frosty_herschel</span><br><span class="line">baa0a10c37a7        324ab2e7954e             &quot;/bin/sh -c &apos;bash ./…&quot;   4 weeks ago         Exited (127) 4 weeks ago                                         cranky_herschel</span><br><span class="line">b5ba36510956        vmnet8/preplanet:rpi     &quot;/usr/bin/entry.sh n…&quot;   4 weeks ago         Up 4 weeks                      443/tcp, 0.0.0.0:20006-&gt;80/tcp   heuristic_chaplygin</span><br><span class="line"></span><br><span class="line">                                                                                                                            201,0-1       Bot</span><br></pre></td></tr></table></figure>
<p>It shows it works.</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </article>
  
  
  

    
  </div>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="https://avatars0.githubusercontent.com/u/34552097"
      alt="Anna X">
  <p class="site-author-name" itemprop="name">Anna X</p>
  <div class="site-description" itemprop="description">Happy coding ...</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/%20%7C%7C%20archive">
        
          <span class="site-state-item-count">45</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/%20%7C%7C%20tags">
          
        
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">tags</span>
        </a>
      </div>
    
  </nav>
</div>
  <div class="feed-link motion-element">
    <a href="/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/vmnet8" title="GitHub &amp;rarr; https:&#x2F;&#x2F;github.com&#x2F;vmnet8" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://www.linkedin.com/in/anna-x/" title="Linkedin &amp;rarr; https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;anna-x&#x2F;" rel="noopener" target="_blank"><i class="fa fa-fw fa-linkedin"></i>Linkedin</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="mailto:vmnet8@gmail.com" title="E-Mail &amp;rarr; mailto:vmnet8@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
    
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Anna X</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.0.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.4.1</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
  
    <span class="post-meta-divider">|</span>
  
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
  
</div>












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.1"></script><script src="/js/motion.js?v=7.4.1"></script>
<script src="/js/schemes/pisces.js?v=7.4.1"></script>
<script src="/js/next-boot.js?v=7.4.1"></script>



  








  <script src="/js/local-search.js?v=7.4.1"></script>














  

  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://annax.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
