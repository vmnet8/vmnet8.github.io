<!DOCTYPE html>





<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.1">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.1" color="#222">
  <link rel="alternate" href="/atom.xml" title="Anna X" type="application/atom+xml">

<link rel="stylesheet" href="/css/main.css?v=7.4.1">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.4.1',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="Happy coding ...">
<meta property="og:type" content="website">
<meta property="og:title" content="Anna X">
<meta property="og:url" content="https:&#x2F;&#x2F;vmnet8.github.io&#x2F;page&#x2F;2&#x2F;index.html">
<meta property="og:site_name" content="Anna X">
<meta property="og:description" content="Happy coding ...">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
  <link rel="canonical" href="https://vmnet8.github.io/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Anna X</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Anna X</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Anna's Tech Blog</p>
      
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    
      
      
        
      
        
      
        
      
    

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    
      
      
        
      
        
      
        
      
    

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    
      
      
        
      
        
      
        
          
        
      
    

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags<span class="badge">19</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    
      
      
        
          
        
      
        
      
        
      
    

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives<span class="badge">49</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a href="javascript:;" target="_blank" rel="noopener" class="popup-trigger">
        
          <i class="fa fa-search fa-fw"></i>Search</a>
      </li>
    
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="Searching..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://vmnet8.github.io/2020/05/11/Travis-CI-push-docker-manifest-to-dockerhub/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anna X">
      <meta itemprop="description" content="Happy coding ...">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/34552097">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anna X">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2020/05/11/Travis-CI-push-docker-manifest-to-dockerhub/" class="post-title-link" itemprop="url">Travis CI: push docker manifest to dockerhub</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2020-05-11 18:01:57" itemprop="dateCreated datePublished" datetime="2020-05-11T18:01:57-07:00">2020-05-11</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-06-03 15:12:35" itemprop="dateModified" datetime="2020-06-03T15:12:35-07:00">2020-06-03</time>
              </span>
            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/05/11/Travis-CI-push-docker-manifest-to-dockerhub/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/05/11/Travis-CI-push-docker-manifest-to-dockerhub/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>I am going to use Travis to continue create docker multiarch images, then push back to dockerhub repo.</p>
<h2 id="create-a-repo-in-my-github-account-named-travis-CICD-and-add-it-to-Travis-GitHub-Apps-Integration"><a href="#create-a-repo-in-my-github-account-named-travis-CICD-and-add-it-to-Travis-GitHub-Apps-Integration" class="headerlink" title="create a repo in my github account named travis-CICD and add it to Travis GitHub Apps Integration"></a>create a repo in my github account named <code>travis-CICD</code> and add it to <a href="http://travis-ci.com" target="_blank" rel="noopener">Travis</a> GitHub Apps Integration</h2><img src="/2020/05/11/Travis-CI-push-docker-manifest-to-dockerhub/travis1.png" class="">


<h2 id="under-the-travis-CICD-repo-create-a-travis-yml-file"><a href="#under-the-travis-CICD-repo-create-a-travis-yml-file" class="headerlink" title="under the travis-CICD repo, create a .travis.yml file"></a>under the travis-CICD repo, create a .travis.yml file</h2><p>Since github uses ruby, I don’t need to specify the language. For this project, I am going to work on docker, so I need to start docker.<br>I am going to use two docker images to create a multiarch using <code>docker manifest create</code> command.<br>Note: Because manifest is an experimental feature, I need to add <code>DOCKER_CLI_EXPERIMENTAL=enabled</code> in .travis.yml file.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">sudo: required</span><br><span class="line">addons:</span><br><span class="line">  apt:</span><br><span class="line">    update: true</span><br><span class="line">    packages:</span><br><span class="line">    - docker-ce</span><br><span class="line">services:</span><br><span class="line">- docker</span><br><span class="line">before_install:</span><br><span class="line">script:</span><br><span class="line">- docker pull treehouses/turtleblocksjs-tags:nginx-x86</span><br><span class="line">- docker pull treehouses/turtleblocksjs-tags:nginx-rpi</span><br><span class="line">- export DOCKER_CLI_EXPERIMENTAL=enabled</span><br><span class="line">- docker manifest create vmnet8/turtleblocksjs:annarocks2 treehouses/turtleblocksjs-tags:nginx-x86</span><br><span class="line">  treehouses/turtleblocksjs-tags:nginx-rpi</span><br><span class="line">- echo &quot;$DOCKER_PASSWORD&quot; | docker login -u &quot;$DOCKER_USERNAME&quot; --password-stdin</span><br><span class="line">- docker manifest push vmnet8/turtleblocksjs:annarocks2</span><br><span class="line">env:</span><br><span class="line">  global:</span><br></pre></td></tr></table></figure>

<h2 id="Go-to-dockerhub-to-get-a-new-token"><a href="#Go-to-dockerhub-to-get-a-new-token" class="headerlink" title="Go to dockerhub to get a new token"></a>Go to dockerhub to get a new token</h2><img src="/2020/05/11/Travis-CI-push-docker-manifest-to-dockerhub/travis2.png" class="">
          <!--noindex-->
          
            <div class="post-button">
              <a class="btn" href="/2020/05/11/Travis-CI-push-docker-manifest-to-dockerhub/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://vmnet8.github.io/2020/02/12/Using-docker-compose-yml-to-run-netdata/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anna X">
      <meta itemprop="description" content="Happy coding ...">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/34552097">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anna X">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2020/02/12/Using-docker-compose-yml-to-run-netdata/" class="post-title-link" itemprop="url">Using docker compose yml to run netdata</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2020-02-12 12:25:41" itemprop="dateCreated datePublished" datetime="2020-02-12T12:25:41-08:00">2020-02-12</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-06-03 15:12:50" itemprop="dateModified" datetime="2020-06-03T15:12:50-07:00">2020-06-03</time>
              </span>
            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/02/12/Using-docker-compose-yml-to-run-netdata/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/02/12/Using-docker-compose-yml-to-run-netdata/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Want to monitor your system and applications, Netdata is distributed, real-time performance and health monitoring for these. It is a highly-optimized monitoring agent you install on all your systems and containers.</p>
<p>I tried to use docker image to use netdata.</p>
<h2 id="Install-netdata-docker-image-and-run-it"><a href="#Install-netdata-docker-image-and-run-it" class="headerlink" title="Install netdata docker image and run it"></a>Install netdata docker image and run it</h2><p>It simply straightforward, just run docker command:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name=netdata \</span><br><span class="line">  -p 19999:19999 \</span><br><span class="line">  -v /etc/passwd:/host/etc/passwd:ro \</span><br><span class="line">  -v /etc/group:/host/etc/group:ro \</span><br><span class="line">  -v /proc:/host/proc:ro \</span><br><span class="line">  -v /sys:/host/sys:ro \</span><br><span class="line">  -v /etc/os-release:/host/etc/os-release:ro \</span><br><span class="line">  --cap-add SYS_PTRACE \</span><br><span class="line">  --security-opt apparmor=unconfined \</span><br><span class="line">  netdata/netdata</span><br></pre></td></tr></table></figure>
<p>then go to your browser, <a href="http://yourip:19999" target="_blank" rel="noopener">http://yourip:19999</a>, you can see netdata works.</p>
<h2 id="use-docker-compose-yml-file-to-run-netdata-service"><a href="#use-docker-compose-yml-file-to-run-netdata-service" class="headerlink" title="use docker compose yml file to run netdata service"></a>use docker compose yml file to run netdata service</h2><h3 id="write-a-shell-script-to-create-a-docker-yml-file-under-srv"><a href="#write-a-shell-script-to-create-a-docker-yml-file-under-srv" class="headerlink" title="write a shell script to create  a docker yml file under /srv"></a>write a shell script to create  a docker yml file under /srv</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">#create netdata.yml</span><br><span class="line">mkdir -p /srv/netdata/</span><br><span class="line">&#123;</span><br><span class="line">  echo &quot;version: &apos;3&apos;&quot;</span><br><span class="line">  echo &quot;services:&quot;</span><br><span class="line">  echo &quot;  netdata:&quot;</span><br><span class="line">  echo &quot;    image: netdata/netdata&quot;</span><br><span class="line">  echo &quot;    ports:&quot;</span><br><span class="line">  echo &quot;      - 19999:19999&quot;</span><br><span class="line">  echo &quot;    cap_add:&quot;</span><br><span class="line">  echo &quot;      - SYS_PTRACE&quot;</span><br><span class="line">  echo &quot;    security_opt:&quot;</span><br><span class="line">  echo &quot;      - apparmor:unconfined&quot;</span><br><span class="line">  echo &quot;    volumes:&quot;</span><br><span class="line">  echo &quot;      - /etc/passwd:/host/etc/passwd:ro&quot;</span><br><span class="line">  echo &quot;      - /etc/os-release:/host/etc/os-release:ro&quot;</span><br><span class="line">  echo &quot;      - /etc/group:/host/etc/group:ro&quot;</span><br><span class="line">  echo &quot;      - /proc:/host/proc:ro&quot;</span><br><span class="line">  echo &quot;      - /sys:/host/sys:ro&quot;</span><br><span class="line">&#125; &gt; /srv/netdata/netdata.yml</span><br></pre></td></tr></table></figure>

<p>run it, then go to /srv/netdata to check if it exists</p>
<p>at the same dir to  create an autorun file, named netdata_auto</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">netdata_autorun=true</span><br><span class="line"></span><br><span class="line">if [ &quot;$netdata_autorun&quot; = true ]; then</span><br><span class="line">  docker-compose -f /srv/netdata/netdata.yml -p netdata up -d</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>let me test</p>
<p>run shell script first</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@rpi-121:/home/pi/git_repo/cli/templates/services/netdata# ./netdata_yml.sh</span><br></pre></td></tr></table></figure>
<p>go to /srv to verify it created the docker compose yml file</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">root@rpi-121:/home/pi/git_repo/cli/templates/services/netdata# cat /srv/netdata/netdata.yml </span><br><span class="line">version: &apos;3&apos;</span><br><span class="line">services:</span><br><span class="line">  netdata:</span><br><span class="line">    image: netdata/netdata</span><br><span class="line">    ports:</span><br><span class="line">      - 19999:19999</span><br><span class="line">    cap_add:</span><br><span class="line">      - SYS_PTRACE</span><br><span class="line">    security_opt:</span><br><span class="line">      - apparmor:unconfined</span><br><span class="line">    volumes:</span><br><span class="line">      - /etc/passwd:/host/etc/passwd:ro</span><br><span class="line">      - /etc/os-release:/host/etc/os-release:ro</span><br><span class="line">      - /etc/group:/host/etc/group:ro</span><br><span class="line">      - /proc:/host/proc:ro</span><br><span class="line">      - /sys:/host/sys:ro</span><br></pre></td></tr></table></figure>
<p>then run docker-compose</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">root@rpi-121:/home/pi/git_repo/cli/templates/services/netdata# docker-compose -f /srv/netdata/netdata.yml -p netdata up -d</span><br><span class="line">Creating network &quot;netdata_default&quot; with the default driver</span><br><span class="line">Pulling netdata (netdata/netdata:)...</span><br><span class="line">latest: Pulling from netdata/netdata</span><br><span class="line">2aa204966f9a: Pull complete</span><br><span class="line">8dde373fbef5: Pull complete</span><br><span class="line">042f66a41d56: Pull complete</span><br><span class="line">3526782612f0: Pull complete</span><br><span class="line">c2b930d703fa: Pull complete</span><br><span class="line">9b859bae4175: Pull complete</span><br><span class="line">f3e46298693e: Pull complete</span><br><span class="line">Digest: sha256:b49e1901fd8aae43d950c171c14449b5080a5550faa97594e2d4ccee7ed3aac8</span><br><span class="line">Status: Downloaded newer image for netdata/netdata:latest</span><br><span class="line">Creating netdata_netdata_1 ... done</span><br></pre></td></tr></table></figure>

<p>check if the docker image is pulled and run</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@rpi-121:/home/pi/git_repo/cli/templates/services/netdata# docker images</span><br><span class="line">REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">netdata/netdata       latest              d170142fbe20        19 hours ago        249MB</span><br></pre></td></tr></table></figure>
<p>it worked well</p>
<p>go to browser <a href="http://myip:19999" target="_blank" rel="noopener">http://myip:19999</a></p>
          <!--noindex-->
          
            <div class="post-button">
              <a class="btn" href="/2020/02/12/Using-docker-compose-yml-to-run-netdata/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://vmnet8.github.io/2020/01/15/Docker-manifest-to-create-multi-arch-docker-image/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anna X">
      <meta itemprop="description" content="Happy coding ...">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/34552097">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anna X">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2020/01/15/Docker-manifest-to-create-multi-arch-docker-image/" class="post-title-link" itemprop="url">Docker manifest to create multi-arch docker image</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2020-01-15 21:26:57" itemprop="dateCreated datePublished" datetime="2020-01-15T21:26:57-08:00">2020-01-15</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-06-03 15:13:08" itemprop="dateModified" datetime="2020-06-03T15:13:08-07:00">2020-06-03</time>
              </span>
            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/01/15/Docker-manifest-to-create-multi-arch-docker-image/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/01/15/Docker-manifest-to-create-multi-arch-docker-image/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>go to github.com/treehouses/rpi-nginx  dir<br>modifid Dockerfile</p>
<p>run docker build<br>root@vmnet8cloud:~/git_repo/treehouses/rpi-nginx# docker build -t vmnet8/preplanet:rpi-1.1 .</p>
<p>root@vmnet8cloud:<del>/git_repo/treehouses/rpi-nginx# docker images<br>REPOSITORY                      TAG                     IMAGE ID            CREATED             SIZE<br>treehouses/rpi-nginx            1.0                     1bd2ae323561        3 minutes ago       50.7MB<br>root@vmnet8cloud:</del>/git_repo/treehouses/rpi-nginx# docker run -d treehouses/rpi-nginx:1.0<br>22992681fb717fcf19cd9691dbaf7089b2280e0667881e8d0ce18b9a1a82da70<br>root@vmnet8cloud:~/git_repo/treehouses/rpi-nginx# docker ps -a<br>CONTAINER ID        IMAGE                      COMMAND                  CREATED             STATUS                    PORTS                            NAMES<br>22992681fb71        treehouses/rpi-nginx:1.0   “/usr/bin/entry.sh n…”   9 seconds ago       Up 8 seconds              80/tcp, 443/tcp                  mystifying_rhodes</p>
<p>root@vmnet8cloud:~/git_repo/treehouses/rpi-nginx# docker push treehouses/rpi-nginx:1.0<br>The push refers to repository [docker.io/treehouses/rpi-nginx]<br>7023a6605ba3: Pushed<br>64ac289193c5: Pushed<br>4b51db9fecf2: Mounted from vmnet8/preplanet<br>4206eb6099cb: Mounted from vmnet8/preplanet<br>3d13333fb74a: Mounted from vmnet8/preplanet<br>6eca2d86fb5c: Mounted from vmnet8/preplanet<br>9863749692b7: Mounted from vmnet8/preplanet<br>77ffeb9e9842: Mounted from vmnet8/rpi-nginx<br>1.0: digest: sha256:acb7fc62ea8ba61ad58c17f774c35c8c3284a51dda29c575935c732655271c60 size: 1995</p>
<p>going to create a multi-arch docker hub</p>
<p>root@vmnet8cloud:~# docker images<br>REPOSITORY                      TAG                     IMAGE ID            CREATED             SIZE<br>treehouses/rpi-nginx            1.0                     1bd2ae323561        2 hours ago         50.7MB<br>nginx                           1.14.0-alpine           68513e2e4bce        16 months ago       14.4MB</p>
<p>I need use nginx:1.16.0-alpine to create multi-arch dockerhub image, so</p>
<p>root@vmnet8cloud:~# docker pull nginx:1.16.0-alpine</p>
<p>run </p>
<p>root@vmnet8cloud:~# docker images<br>REPOSITORY                      TAG                     IMAGE ID            CREATED             SIZE<br>treehouses/rpi-nginx            1.0                     1bd2ae323561        2 hours ago         50.7MB<br>nginx                           1.16.0-alpine           05edf438c0e4        8 months ago        17.6MB<br>nginx                           1.14.0-alpine           68513e2e4bce        16 months ago       14.4MB</p>
<p>In order to create docker manifest list, I need to modify the docker image’s tag</p>
<p>root@vmnet8cloud:<del># docker tag treehouses/rpi-nginx:1.0  treehouses/nginx:rpi<br>root@vmnet8cloud:</del># docker tag nginx:1.16.0-alpine  treehouses/nginx:x86</p>
<p>After change the tags, it shows new image name</p>
<p>root@vmnet8cloud:~# docker images<br>REPOSITORY                      TAG                     IMAGE ID            CREATED             SIZE<br>treehouses/nginx                rpi                     1bd2ae323561        2 hours ago         50.7MB<br>treehouses/rpi-nginx            1.0                     1bd2ae323561        2 hours ago         50.7MB<br>nginx                           1.16.0-alpine           05edf438c0e4        8 months ago        17.6MB<br>treehouses/nginx                x86                     05edf438c0e4        8 months ago        17.6MB<br>nginx                           1.14.0-alpine           68513e2e4bce        16 months ago       14.4MB</p>
<p>I need to push these two new images (name) to dockerhub</p>
<p>root@vmnet8cloud:<del>/git_repo/treehouses/rpi-nginx# docker push treehouses/nginx:rpi<br>root@vmnet8cloud:</del>/git_repo/treehouses/rpi-nginx# docker push treehouses/nginx:x86</p>
<p>create a multi-arch docker image</p>
<p>root@vmnet8cloud:~/git_repo/treehouses/rpi-nginx# docker manifest create treehouses/nginx:latest treehouses/nginx:x86 treehouses/nginx:rpi</p>
<p>Last steps to push this multi-arch to docker hub</p>
<p>root@vmnet8cloud:~/git_repo/treehouses/rpi-nginx# docker manifest push  treehouses/nginx</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://vmnet8.github.io/2020/01/13/Modify-a-Dockerfile/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anna X">
      <meta itemprop="description" content="Happy coding ...">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/34552097">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anna X">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2020/01/13/Modify-a-Dockerfile/" class="post-title-link" itemprop="url">Modify a Dockerfile</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2020-01-13 11:00:14" itemprop="dateCreated datePublished" datetime="2020-01-13T11:00:14-08:00">2020-01-13</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-06-03 15:11:59" itemprop="dateModified" datetime="2020-06-03T15:11:59-07:00">2020-06-03</time>
              </span>
            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/01/13/Modify-a-Dockerfile/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/01/13/Modify-a-Dockerfile/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>I need to rewrite a Dockerfile to create my own Dockerfile.<br>I pull a docker image base from dockerhub first.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">FROM balenalib/raspberry-pi-alpine:3.9</span><br><span class="line"></span><br><span class="line">LABEL org.opencontainers.image.authors=&quot;Tobias Hargesheimer &lt;docker@ison.ws&gt;&quot; \</span><br><span class="line">	org.opencontainers.image.title=&quot;NGINX&quot; \</span><br><span class="line">	org.opencontainers.image.description=&quot;AlpineLinux with NGINX on arm arch&quot; \</span><br><span class="line">	org.opencontainers.image.licenses=&quot;Apache-2.0&quot; \</span><br><span class="line">	org.opencontainers.image.url=&quot;https://hub.docker.com/r/tobi312/rpi-nginx/&quot; \</span><br><span class="line">	org.opencontainers.image.source=&quot;https://github.com/Tob1asDocker/rpi-nginx&quot;</span><br><span class="line"></span><br><span class="line">ARG CROSS_BUILD_START=&quot;:&quot;</span><br><span class="line">ARG CROSS_BUILD_END=&quot;:&quot;</span><br><span class="line"></span><br><span class="line">RUN [ $&#123;CROSS_BUILD_START&#125; ]</span><br><span class="line"></span><br><span class="line">ENV NGINX_VERSION 1.14</span><br><span class="line"></span><br><span class="line">RUN apk --no-cache add nginx&gt;$&#123;NGINX_VERSION&#125; \</span><br><span class="line">	&amp;&amp; mkdir -p /run/nginx \</span><br><span class="line">	&amp;&amp; sed -i &quot;s/ssl_session_cache shared:SSL:2m;/#ssl_session_cache shared:SSL:2m;/g&quot; /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line"># forward request and error logs to docker log collector</span><br><span class="line">RUN ln -sf /dev/stdout /var/log/nginx/access.log \</span><br><span class="line">	&amp;&amp; ln -sf /dev/stderr /var/log/nginx/error.log</span><br><span class="line">	</span><br><span class="line"># fix: *** stack smashing detected ***: nginx: worker process terminated / [alert] 9#9: worker process *process-id* exited on signal 6</span><br><span class="line">#RUN sed -i &quot;s/worker_processes auto;/worker_processes 1;/g&quot; /etc/nginx/nginx.conf</span><br><span class="line">	</span><br><span class="line">EXPOSE 80 443</span><br><span class="line"></span><br><span class="line">CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</span><br><span class="line"></span><br><span class="line">RUN [ $&#123;CROSS_BUILD_END&#125; ]</span><br></pre></td></tr></table></figure>

<p>For this image, its base is balenalib/raspberry-pi-alpine:3.9. when I am going to build my own docker image, it has the newest version, but I still use the old one, because it will be more stable for me.</p>
<p>I add some new command unders this docker base Dockerfile</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">FROM balenalib/raspberry-pi-alpine:3.9</span><br><span class="line"></span><br><span class="line">LABEL org.opencontainers.image.authors=&quot;Tobias Hargesheimer &lt;docker@ison.ws&gt;&quot; \</span><br><span class="line">	org.opencontainers.image.title=&quot;NGINX&quot; \</span><br><span class="line">	org.opencontainers.image.description=&quot;AlpineLinux with NGINX on arm arch&quot; \</span><br><span class="line">	org.opencontainers.image.licenses=&quot;Apache-2.0&quot; \</span><br><span class="line">	org.opencontainers.image.url=&quot;https://hub.docker.com/r/tobi312/rpi-nginx/&quot; \</span><br><span class="line">	org.opencontainers.image.source=&quot;https://github.com/Tob1asDocker/rpi-nginx&quot;</span><br><span class="line"></span><br><span class="line">ARG CROSS_BUILD_START=&quot;:&quot;</span><br><span class="line">ARG CROSS_BUILD_END=&quot;:&quot;</span><br><span class="line"></span><br><span class="line">RUN [ $&#123;CROSS_BUILD_START&#125; ]</span><br><span class="line"></span><br><span class="line">ENV NGINX_VERSION 1.14</span><br><span class="line"></span><br><span class="line">RUN apk --no-cache add nginx&gt;$&#123;NGINX_VERSION&#125; \</span><br><span class="line">	&amp;&amp; mkdir -p /run/nginx \</span><br><span class="line">	&amp;&amp; sed -i &quot;s/ssl_session_cache shared:SSL:2m;/#ssl_session_cache shared:SSL:2m;/g&quot; /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line"># forward request and error logs to docker log collector</span><br><span class="line">RUN ln -sf /dev/stdout /var/log/nginx/access.log \</span><br><span class="line">	&amp;&amp; ln -sf /dev/stderr /var/log/nginx/error.log</span><br><span class="line">	</span><br><span class="line"># fix: *** stack smashing detected ***: nginx: worker process terminated / [alert] 9#9: worker process *process-id* exited on signal 6</span><br><span class="line">#RUN sed -i &quot;s/worker_processes auto;/worker_processes 1;/g&quot; /etc/nginx/nginx.conf</span><br><span class="line">	</span><br><span class="line">EXPOSE 80 443</span><br><span class="line"></span><br><span class="line">CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</span><br><span class="line"></span><br><span class="line">RUN [ $&#123;CROSS_BUILD_END&#125; ]</span><br><span class="line">RUN apk add --no-cache \</span><br><span class="line"> fcgi=2.4.0-r8 \</span><br><span class="line">    fcgiwrap=1.1.0-r3 \</span><br><span class="line">    spawn-fcgi=1.6.4-r3 \</span><br><span class="line">      ca-certificates=20190108-r0 \</span><br><span class="line">      nghttp2-libs=1.35.1-r0 \</span><br><span class="line">      libssh2=1.8.2-r0 \</span><br><span class="line">      libcurl=7.64.0-r2 \</span><br><span class="line">    curl=7.64.0-r2 \</span><br><span class="line">      oniguruma=6.9.4-r0 \</span><br><span class="line">    jq=1.6-r0</span><br></pre></td></tr></table></figure>
<p>Notice: the packages need to be installed all have version numbers which will cause the error in the following.</p>
<p>After modify the Dockerfile, I am going to build my docker image.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">root@vmnet8cloud:~/git_repo/preplanet/docker/planet# docker build -t vmnet8/preplanet:rpi-1 .</span><br><span class="line">Sending build context to Docker daemon  4.096kB</span><br><span class="line">Step 1/12 : FROM balenalib/raspberry-pi-alpine:3.9</span><br><span class="line"> ---&gt; d6c5aebf964a</span><br><span class="line">Step 2/12 : LABEL org.opencontainers.image.authors=&quot;Tobias Hargesheimer &lt;docker@ison.ws&gt;&quot; 	org.opencontainers.image.title=&quot;NGINX&quot; 	org.opencontainers.image.description=&quot;AlpineLinux with NGINX on arm arch&quot; 	org.opencontainers.image.licenses=&quot;Apache-2.0&quot; 	org.opencontainers.image.url=&quot;https://hub.docker.com/r/tobi312/rpi-nginx/&quot; 	org.opencontainers.image.source=&quot;https://github.com/Tob1asDocker/rpi-nginx&quot;</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 1a8a69474af2</span><br><span class="line">Step 3/12 : ARG CROSS_BUILD_START=&quot;:&quot;</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 2ea7d76cc571</span><br><span class="line">Step 4/12 : ARG CROSS_BUILD_END=&quot;:&quot;</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 9dac95067f17</span><br><span class="line">Step 5/12 : RUN [ $&#123;CROSS_BUILD_START&#125; ]</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; e1d8ae03657f</span><br><span class="line">Step 6/12 : ENV NGINX_VERSION 1.14</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 684896377216</span><br><span class="line">Step 7/12 : RUN apk --no-cache add nginx&gt;$&#123;NGINX_VERSION&#125; 	&amp;&amp; mkdir -p /run/nginx 	&amp;&amp; sed -i &quot;s/ssl_session_cache shared:SSL:2m;/#ssl_session_cache shared:SSL:2m;/g&quot; /etc/nginx/nginx.conf</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; ef20e56136c1</span><br><span class="line">Step 8/12 : RUN ln -sf /dev/stdout /var/log/nginx/access.log 	&amp;&amp; ln -sf /dev/stderr /var/log/nginx/error.log</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 8d95b6ad6846</span><br><span class="line">Step 9/12 : EXPOSE 80 443</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; a12bf17fcaea</span><br><span class="line">Step 10/12 : CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 1f6e9eb85851</span><br><span class="line">Step 11/12 : RUN [ $&#123;CROSS_BUILD_END&#125; ]</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 969cc49b4faf</span><br><span class="line">Step 12/12 : RUN apk add --no-cache       fcgi=2.4.0-r8     fcgiwrap=1.1.0-r3     spawn-fcgi=1.6.4-r3       ca-certificates=20190108-r0       nghttp2-libs=1.35.1-r0       libssh2=1.8.2-r0       libcurl=7.64.0-r2     curl=7.64.0-r2       oniguruma=6.9.4-r0     jq=1.6-r0</span><br><span class="line"> ---&gt; Running in 910227bcece4</span><br><span class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.9/main/armhf/APKINDEX.tar.gz</span><br><span class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.9/community/armhf/APKINDEX.tar.gz</span><br><span class="line">ERROR: unsatisfiable constraints:</span><br><span class="line">  nghttp2-libs-1.35.1-r1:</span><br><span class="line">    breaks: world[nghttp2-libs=1.35.1-r0]</span><br><span class="line">    satisfies: libcurl-7.64.0-r3[so:libnghttp2.so.14]</span><br><span class="line">  libssh2-1.9.0-r1:</span><br><span class="line">    breaks: world[libssh2=1.8.2-r0]</span><br><span class="line">    satisfies: libcurl-7.64.0-r3[so:libssh2.so.1]</span><br><span class="line">  libcurl-7.64.0-r3:</span><br><span class="line">    breaks: world[libcurl=7.64.0-r2]</span><br><span class="line">    satisfies: curl-7.64.0-r3[so:libcurl.so.4]</span><br><span class="line">  curl-7.64.0-r3:</span><br><span class="line">    breaks: world[curl=7.64.0-r2]</span><br><span class="line">The command &apos;/bin/sh -c apk add --no-cache       fcgi=2.4.0-r8     fcgiwrap=1.1.0-r3     spawn-fcgi=1.6.4-r3       ca-certificates=20190108-r0       nghttp2-libs=1.35.1-r0       libssh2=1.8.2-r0       libcurl=7.64.0-r2     curl=7.64.0-r2       oniguruma=6.9.4-r0     jq=1.6-r0&apos; returned a non-zero code: 4</span><br></pre></td></tr></table></figure>

<p>It shows error.</p>
<p>I modified the Dockerfile again and move off all packages versions like following</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">FROM balenalib/raspberry-pi-alpine:3.9</span><br><span class="line"></span><br><span class="line">LABEL org.opencontainers.image.authors=&quot;Tobias Hargesheimer &lt;docker@ison.ws&gt;&quot; \</span><br><span class="line">	org.opencontainers.image.title=&quot;NGINX&quot; \</span><br><span class="line">	org.opencontainers.image.description=&quot;AlpineLinux with NGINX on arm arch&quot; \</span><br><span class="line">	org.opencontainers.image.licenses=&quot;Apache-2.0&quot; \</span><br><span class="line">	org.opencontainers.image.url=&quot;https://hub.docker.com/r/tobi312/rpi-nginx/&quot; \</span><br><span class="line">	org.opencontainers.image.source=&quot;https://github.com/Tob1asDocker/rpi-nginx&quot;</span><br><span class="line"></span><br><span class="line">ARG CROSS_BUILD_START=&quot;:&quot;</span><br><span class="line">ARG CROSS_BUILD_END=&quot;:&quot;</span><br><span class="line"></span><br><span class="line">RUN [ $&#123;CROSS_BUILD_START&#125; ]</span><br><span class="line"></span><br><span class="line">ENV NGINX_VERSION 1.14</span><br><span class="line"></span><br><span class="line">RUN apk --no-cache add nginx&gt;$&#123;NGINX_VERSION&#125; \</span><br><span class="line">	&amp;&amp; mkdir -p /run/nginx \</span><br><span class="line">	&amp;&amp; sed -i &quot;s/ssl_session_cache shared:SSL:2m;/#ssl_session_cache shared:SSL:2m;/g&quot; /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line"># forward request and error logs to docker log collector</span><br><span class="line">RUN ln -sf /dev/stdout /var/log/nginx/access.log \</span><br><span class="line">	&amp;&amp; ln -sf /dev/stderr /var/log/nginx/error.log</span><br><span class="line">	</span><br><span class="line"># fix: *** stack smashing detected ***: nginx: worker process terminated / [alert] 9#9: worker process *process-id* exited on signal 6</span><br><span class="line">#RUN sed -i &quot;s/worker_processes auto;/worker_processes 1;/g&quot; /etc/nginx/nginx.conf</span><br><span class="line">	</span><br><span class="line">EXPOSE 80 443</span><br><span class="line"></span><br><span class="line">CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</span><br><span class="line"></span><br><span class="line">RUN [ $&#123;CROSS_BUILD_END&#125; ]</span><br><span class="line">RUN apk add --no-cache \</span><br><span class="line">      fcgi \</span><br><span class="line">    fcgiwrap \</span><br><span class="line">    spawn-fcgi \</span><br><span class="line">      ca-certificates \</span><br><span class="line">      nghttp2-libs \</span><br><span class="line">      libssh2 \</span><br><span class="line">      libcurl \</span><br><span class="line">    curl \</span><br><span class="line">      oniguruma \</span><br><span class="line">    jq</span><br></pre></td></tr></table></figure>

<p>then build docker image again</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">root@vmnet8cloud:~/git_repo/preplanet/docker/planet# docker build -t vmnet8/preplanet:rpi-1 .</span><br><span class="line">Sending build context to Docker daemon  6.144kB</span><br><span class="line">Step 1/12 : FROM balenalib/raspberry-pi-alpine:3.9</span><br><span class="line"> ---&gt; d6c5aebf964a</span><br><span class="line">Step 2/12 : LABEL org.opencontainers.image.authors=&quot;Tobias Hargesheimer &lt;docker@ison.ws&gt;&quot; 	org.opencontainers.image.title=&quot;NGINX&quot; 	org.opencontainers.image.description=&quot;AlpineLinux with NGINX on arm arch&quot; 	org.opencontainers.image.licenses=&quot;Apache-2.0&quot; 	org.opencontainers.image.url=&quot;https://hub.docker.com/r/tobi312/rpi-nginx/&quot; 	org.opencontainers.image.source=&quot;https://github.com/Tob1asDocker/rpi-nginx&quot;</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 1a8a69474af2</span><br><span class="line">Step 3/12 : ARG CROSS_BUILD_START=&quot;:&quot;</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 2ea7d76cc571</span><br><span class="line">Step 4/12 : ARG CROSS_BUILD_END=&quot;:&quot;</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 9dac95067f17</span><br><span class="line">Step 5/12 : RUN [ $&#123;CROSS_BUILD_START&#125; ]</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; e1d8ae03657f</span><br><span class="line">Step 6/12 : ENV NGINX_VERSION 1.14</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 684896377216</span><br><span class="line">Step 7/12 : RUN apk --no-cache add nginx&gt;$&#123;NGINX_VERSION&#125; 	&amp;&amp; mkdir -p /run/nginx 	&amp;&amp; sed -i &quot;s/ssl_session_cache shared:SSL:2m;/#ssl_session_cache shared:SSL:2m;/g&quot; /etc/nginx/nginx.conf</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; ef20e56136c1</span><br><span class="line">Step 8/12 : RUN ln -sf /dev/stdout /var/log/nginx/access.log 	&amp;&amp; ln -sf /dev/stderr /var/log/nginx/error.log</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 8d95b6ad6846</span><br><span class="line">Step 9/12 : EXPOSE 80 443</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; a12bf17fcaea</span><br><span class="line">Step 10/12 : CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 1f6e9eb85851</span><br><span class="line">Step 11/12 : RUN [ $&#123;CROSS_BUILD_END&#125; ]</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 969cc49b4faf</span><br><span class="line">Step 12/12 : RUN apk add --no-cache       fcgi     fcgiwrap     spawn-fcgi       ca-certificates       nghttp2-libs       libssh2       libcurl     curl       oniguruma     jq</span><br><span class="line"> ---&gt; Running in 95d22279f720</span><br><span class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.9/main/armhf/APKINDEX.tar.gz</span><br><span class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.9/community/armhf/APKINDEX.tar.gz</span><br><span class="line">(1/5) Installing fcgi (2.4.0-r8)</span><br><span class="line">(2/5) Installing fcgiwrap (1.1.0-r3)</span><br><span class="line">Executing fcgiwrap-1.1.0-r3.pre-install</span><br><span class="line">(3/5) Installing oniguruma (6.9.4-r0)</span><br><span class="line">(4/5) Installing jq (1.6-r0)</span><br><span class="line">(5/5) Installing spawn-fcgi (1.6.4-r3)</span><br><span class="line">Executing busybox-1.29.3-r10.trigger</span><br><span class="line">OK: 52 MiB in 77 packages</span><br><span class="line">Removing intermediate container 95d22279f720</span><br><span class="line"> ---&gt; 7ee7b73f89ee</span><br><span class="line">Successfully built 7ee7b73f89ee</span><br><span class="line">Successfully tagged vmnet8/preplanet:rpi-1</span><br></pre></td></tr></table></figure>
<p>After building, test the running container</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">run docer image vmnet8/preplanet:rpi-1</span><br><span class="line">root@vmnet8cloud:~/git_repo/preplanet/docker/planet# docker run -d vmnet8/preplanet:rpi-1</span><br><span class="line">b974aee9b9bb0d6242dcbab12e975585ff1e2d4b887860523b6d0b261863d562</span><br><span class="line">root@vmnet8cloud:~/git_repo/preplanet/docker/planet# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE                    COMMAND                  CREATED             STATUS                          PORTS                            NAMES</span><br><span class="line">b974aee9b9bb        vmnet8/preplanet:rpi-1   &quot;/usr/bin/entry.sh n…&quot;   9 seconds ago       Up 7 seconds                    80/tcp, 443/tcp                  goofy_banach</span><br><span class="line">270cf6e3e185        vmnet8/preplanet:rpi-1   &quot;/usr/bin/entry.sh n…&quot;   2 minutes ago       Exited (0) About a minute ago                                    cranky_wing</span><br><span class="line">7259cecd0e74        969cc49b4faf             &quot;/bin/sh -c &apos;apk add…&quot;   11 hours ago        Exited (99) 11 hours ago                                         dreamy_brown</span><br><span class="line">910227bcece4        969cc49b4faf             &quot;/bin/sh -c &apos;apk add…&quot;   11 hours ago        Exited (4) 11 hours ago                                          modest_wu</span><br><span class="line">d4f32b1bc836        68513e2e4bce             &quot;/bin/sh -c &apos;apk add…&quot;   14 hours ago        Exited (6) 14 hours ago                                          frosty_herschel</span><br><span class="line">baa0a10c37a7        324ab2e7954e             &quot;/bin/sh -c &apos;bash ./…&quot;   4 weeks ago         Exited (127) 4 weeks ago                                         cranky_herschel</span><br><span class="line">b5ba36510956        vmnet8/preplanet:rpi     &quot;/usr/bin/entry.sh n…&quot;   4 weeks ago         Up 4 weeks                      443/tcp, 0.0.0.0:20006-&gt;80/tcp   heuristic_chaplygin</span><br><span class="line"></span><br><span class="line">                                                                                                                            201,0-1       Bot</span><br></pre></td></tr></table></figure>
<p>It shows it works.</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://vmnet8.github.io/2019/12/09/Build-multi-arch-docker-image/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anna X">
      <meta itemprop="description" content="Happy coding ...">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/34552097">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anna X">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/12/09/Build-multi-arch-docker-image/" class="post-title-link" itemprop="url">Build multi-arch docker image</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-12-09 22:31:51" itemprop="dateCreated datePublished" datetime="2019-12-09T22:31:51-08:00">2019-12-09</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-06-03 17:28:12" itemprop="dateModified" datetime="2020-06-03T17:28:12-07:00">2020-06-03</time>
              </span>
            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2019/12/09/Build-multi-arch-docker-image/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/12/09/Build-multi-arch-docker-image/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>In this article I am trying to build a multi-arch image  that supports arm and amd64, then I will push it to Docker Hub.</p>
<h2 id="Build-docker-image"><a href="#Build-docker-image" class="headerlink" title="Build docker image"></a>Build docker image</h2><p>Two dockfiles have different arch.</p>
<h3 id="Build-an-arm-arch"><a href="#Build-an-arm-arch" class="headerlink" title="Build  an arm arch"></a>Build  an arm arch</h3><p>Dockfile</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">FROM tobi312/rpi-nginx@sha256:b375cd9a4511f5d7763397c5a4faa1f5c3605507db97075b12582aad2a6871b0</span><br><span class="line">RUN rm -rf /usr/share/nginx/html/*</span><br><span class="line">RUN apk add --no-cache \</span><br><span class="line">      fcgi=2.4.0-r8 \</span><br><span class="line">    fcgiwrap=1.1.0-r3 \</span><br><span class="line">    spawn-fcgi=1.6.4-r3 \</span><br><span class="line">      ca-certificates=20190108-r0 \</span><br><span class="line">      nghttp2-libs=1.35.1-r0 \</span><br><span class="line">      libssh2=1.8.2-r0 \</span><br><span class="line">      libcurl=7.64.0-r2 \</span><br><span class="line">    curl=7.64.0-r2 \</span><br><span class="line">      oniguruma=6.9.4-r0 \</span><br><span class="line">    jq=1.6-r0</span><br></pre></td></tr></table></figure>
<p>change directory under this dockfile to build image</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">root@vmnet8cloud:~/rpi# docker build . -t vmnet8/rpi</span><br><span class="line">Sending build context to Docker daemon  3.072kB</span><br><span class="line">Step 1/3 : FROM tobi312/rpi-nginx@sha256:b375cd9a4511f5d7763397c5a4faa1f5c3605507db97075b12582aad2a6871b0</span><br><span class="line">sha256:b375cd9a4511f5d7763397c5a4faa1f5c3605507db97075b12582aad2a6871b0: Pulling from tobi312/rpi-nginx</span><br><span class="line">6e39823df636: Already exists </span><br><span class="line">38dd00ade3c1: Already exists </span><br><span class="line">c02057c17ddc: Already exists </span><br><span class="line">e6d776bad3ac: Already exists </span><br><span class="line">92ca2fd255df: Already exists </span><br><span class="line">a2cfa1cf1cbb: Already exists </span><br><span class="line">35e3be655ed6: Already exists </span><br><span class="line">f182036f54c2: Already exists </span><br><span class="line">Digest: sha256:b375cd9a4511f5d7763397c5a4faa1f5c3605507db97075b12582aad2a6871b0</span><br><span class="line">Status: Downloaded newer image for tobi312/rpi-nginx@sha256:b375cd9a4511f5d7763397c5a4faa1f5c3605507db97075b12582aad2a6871b0</span><br><span class="line"> ---&gt; 91ed615e0b64</span><br><span class="line">Step 2/3 : RUN rm -rf /usr/share/nginx/html/*</span><br><span class="line"> ---&gt; Running in aa2b4077aa07</span><br><span class="line">Removing intermediate container aa2b4077aa07</span><br><span class="line"> ---&gt; 9412dc8b27c2</span><br><span class="line">Step 3/3 : RUN apk add --no-cache       fcgi=2.4.0-r8     fcgiwrap=1.1.0-r3     spawn-fcgi=1.6.4-r3       ca-certificates=20190108-r0       nghttp2-libs=1.35.1-r0       libssh2=1.8.2-r0       libcurl=7.64.0-r2     curl=7.64.0-r2       oniguruma=6.9.4-r0     jq=1.6-r0</span><br><span class="line"> ---&gt; Running in a6902c745dd5</span><br><span class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.9/main/armhf/APKINDEX.tar.gz</span><br><span class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.9/community/armhf/APKINDEX.tar.gz</span><br><span class="line">(1/5) Installing fcgi (2.4.0-r8)</span><br><span class="line">(2/5) Installing fcgiwrap (1.1.0-r3)</span><br><span class="line">Executing fcgiwrap-1.1.0-r3.pre-install</span><br><span class="line">(/5) Installing oniguruma (6.9.4-r0)</span><br><span class="line">(4/5) Installing jq (1.6-r0)</span><br><span class="line">(5/5) Installing spawn-fcgi (1.6.4-r3)</span><br><span class="line">Executing busybox-1.29.3-r10.trigger</span><br><span class="line">OK: 52 MiB in 77 packages</span><br><span class="line">Removing intermediate container a6902c745dd5</span><br><span class="line"> ---&gt; 758ef3313bac</span><br><span class="line">Successfully built 758ef3313bac</span><br><span class="line">Successfully tagged vmnet8/rpi:latest</span><br></pre></td></tr></table></figure>
<h3 id="Build-an-amd64-arch"><a href="#Build-an-amd64-arch" class="headerlink" title="Build an amd64 arch"></a>Build an amd64 arch</h3><p>Dockerfile</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">FROM nginx:1.16.0-alpine</span><br><span class="line"></span><br><span class="line">RUN rm -rf /usr/share/nginx/html/*</span><br><span class="line">RUN apk add --no-cache \</span><br><span class="line">      fcgi=2.4.0-r8 \</span><br><span class="line">    fcgiwrap=1.1.0-r3 \</span><br><span class="line">    spawn-fcgi=1.6.4-r3 \</span><br><span class="line">      ca-certificates=20190108-r0 \</span><br><span class="line">      nghttp2-libs=1.35.1-r1 \</span><br><span class="line">      libssh2=1.9.0-r1 \</span><br><span class="line">      libcurl=7.64.0-r3 \</span><br><span class="line">    curl=7.64.0-r3 \</span><br><span class="line">      oniguruma=6.9.4-r0 \</span><br><span class="line">    jq=1.6-r0</span><br></pre></td></tr></table></figure>
<p>build processing</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root@vmnet8cloud:~/template# docker build . -t vmnet8/planet</span><br><span class="line">Sending build context to Docker daemon  2.048kB</span><br><span class="line">Step 1/3 : FROM nginx:1.16.0-alpine</span><br><span class="line"> ---&gt; 05edf438c0e4</span><br><span class="line">Step 2/3 : RUN rm -rf /usr/share/nginx/html/*</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; f7441287619e</span><br><span class="line">Step 3/3 : RUN apk add --no-cache       fcgi=2.4.0-r8     fcgiwrap=1.1.0-r3     spawn-fcgi=1.6.4-r3       ca-certificates=20190108-r0       nghttp2-libs=1.35.1-r1       libssh2=1.9.0-r1       libcurl=7.64.0-r3     curl=7.64.0-r3       oniguruma=6.9.4-r0     jq=1.6-r0</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 72c50c12788d</span><br><span class="line">Successfully built 72c50c12788d</span><br></pre></td></tr></table></figure>

<h3 id="change-image-name"><a href="#change-image-name" class="headerlink" title="change image name"></a>change image name</h3><p>I am not satisfied with my new image name, so I rename it.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@vmnet8cloud:~/rpi# docker tag vmnet8/rpi vmnet8/base-nginx:rpi</span><br><span class="line">root@vmnet8cloud:~/rpi# docker tag vmnet8/planet vmnet8/base-nginx:x86</span><br><span class="line">root@vmnet8cloud:~/rpi# docker image ls</span><br><span class="line">REPOSITORY             TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">vmnet8/base-nginx      rpi                 758ef3313bac        9 hours ago         52MB</span><br><span class="line">vmnet8/rpi             latest              758ef3313bac        9 hours ago         52MB</span><br><span class="line">vmnet8/planet          latest              72c50c12788d        9 hours ago         20.4MB</span><br><span class="line">treehouses/bettercap   first               fa1faf86b2e9        5 days ago          35.9MB</span><br></pre></td></tr></table></figure>

<h3 id="push-image-to-my-dockerhub-repo"><a href="#push-image-to-my-dockerhub-repo" class="headerlink" title="push image to my dockerhub repo"></a>push image to my dockerhub repo</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">root@vmnet8cloud:~/rpi# docker push  vmnet8/base-nginx:rpi</span><br><span class="line">The push refers to repository [docker.io/vmnet8/base-nginx]</span><br><span class="line">06f60bd1a60b: Mounted from vmnet8/rpi </span><br><span class="line">2d7044011d61: Mounted from vmnet8/rpi </span><br><span class="line">7772294ad95b: Mounted from vmnet8/rpi </span><br><span class="line">ca20d2ade963: Mounted from vmnet8/rpi </span><br><span class="line">0c8b16ac3ec0: Mounted from vmnet8/rpi </span><br><span class="line">6ff0e3daf858: Mounted from vmnet8/rpi </span><br><span class="line">4bc006337f97: Mounted from vmnet8/rpi </span><br><span class="line">9c66fd3856dc: Mounted from vmnet8/rpi </span><br><span class="line">77ffeb9e9842: Mounted from vmnet8/rpi </span><br><span class="line">rpi: digest: sha256:ced17c99328babcabff78c78db75c3426c47a55aa1fec8bcdb554134327f7fff size: 2205</span><br><span class="line">root@vmnet8cloud:~/rpi# docker push  vmnet8/base-nginx:x86</span><br><span class="line">The push refers to repository [docker.io/vmnet8/base-nginx]</span><br><span class="line">dc696a4b831b: Mounted from vmnet8/planet </span><br><span class="line">05652609bfdb: Mounted from vmnet8/planet </span><br><span class="line">1cd1ec9f681c: Mounted from vmnet8/planet </span><br><span class="line">77ffeb9e9842: Layer already exists </span><br><span class="line">x86: digest: sha256:40fc08ff08e250a9022242cab5f68042c98b6e1f09551fe4dfca3b04dfcc8533 size: 1157</span><br></pre></td></tr></table></figure>

<h2 id="using-manifest-to-create-multi-arch-image"><a href="#using-manifest-to-create-multi-arch-image" class="headerlink" title="using manifest to create multi-arch image"></a>using manifest to create multi-arch image</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">root@vmnet8cloud:~/rpi# docker manifest create vmnet8/base-nginx:latest vmnet8/base-nginx:x86 vmnet8/base-nginx:rpi</span><br><span class="line">Created manifest list docker.io/vmnet8/base-nginx:latest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root@vmnet8cloud:~/rpi# docker manifest inspect vmnet8/base-nginx</span><br><span class="line">&#123;</span><br><span class="line">   &quot;schemaVersion&quot;: 2,</span><br><span class="line">   &quot;mediaType&quot;: &quot;application/vnd.docker.distribution.manifest.list.v2+json&quot;,</span><br><span class="line">   &quot;manifests&quot;: [</span><br><span class="line">      &#123;</span><br><span class="line">         &quot;mediaType&quot;: &quot;application/vnd.docker.distribution.manifest.v2+json&quot;,</span><br><span class="line">         &quot;size&quot;: 2205,</span><br><span class="line">         &quot;digest&quot;: &quot;sha256:ced17c99328babcabff78c78db75c3426c47a55aa1fec8bcdb554134327f7fff&quot;,</span><br><span class="line">         &quot;platform&quot;: &#123;</span><br><span class="line">            &quot;architecture&quot;: &quot;amd64&quot;,</span><br><span class="line">            &quot;os&quot;: &quot;linux&quot;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">         &quot;mediaType&quot;: &quot;application/vnd.docker.distribution.manifest.v2+json&quot;,</span><br><span class="line">         &quot;size&quot;: 1157,</span><br><span class="line">         &quot;digest&quot;: &quot;sha256:40fc08ff08e250a9022242cab5f68042c98b6e1f09551fe4dfca3b04dfcc8533&quot;,</span><br><span class="line">         &quot;platform&quot;: &#123;</span><br><span class="line">            &quot;architecture&quot;: &quot;arm&quot;,</span><br><span class="line">            &quot;os&quot;: &quot;linux&quot;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   ]</span><br><span class="line">&#125;</span><br><span class="line">root@vmnet8cloud:~/rpi# docker manifest inspect vmnet8/base-nginx</span><br><span class="line">&#123;</span><br><span class="line">   &quot;schemaVersion&quot;: 2,</span><br><span class="line">   &quot;mediaType&quot;: &quot;application/vnd.docker.distribution.manifest.list.v2+json&quot;,</span><br><span class="line">   &quot;manifests&quot;: [</span><br><span class="line">      &#123;</span><br><span class="line">         &quot;mediaType&quot;: &quot;application/vnd.docker.distribution.manifest.v2+json&quot;,</span><br><span class="line">         &quot;size&quot;: 2205,</span><br><span class="line">         &quot;digest&quot;: &quot;sha256:ced17c99328babcabff78c78db75c3426c47a55aa1fec8bcdb554134327f7fff&quot;,</span><br><span class="line">         &quot;platform&quot;: &#123;</span><br><span class="line">            &quot;architecture&quot;: &quot;amd64&quot;,</span><br><span class="line">            &quot;os&quot;: &quot;linux&quot;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">         &quot;mediaType&quot;: &quot;application/vnd.docker.distribution.manifest.v2+json&quot;,</span><br><span class="line">         &quot;size&quot;: 1157,</span><br><span class="line">         &quot;digest&quot;: &quot;sha256:40fc08ff08e250a9022242cab5f68042c98b6e1f09551fe4dfca3b04dfcc8533&quot;,</span><br><span class="line">         &quot;platform&quot;: &#123;</span><br><span class="line">            &quot;architecture&quot;: &quot;arm&quot;,</span><br><span class="line">            &quot;os&quot;: &quot;linux&quot;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   ]</span><br><span class="line">&#125;</span><br><span class="line">root@vmnet8cloud:~/template# docker manifest push vmnet8/base-nginx:latest</span><br><span class="line">sha256:9d646d372f76466948ee660cecd0100bc56dc0fe8e73e8e5294d7873ed09519c</span><br></pre></td></tr></table></figure>

<h2 id="Testing"><a href="#Testing" class="headerlink" title="Testing"></a>Testing</h2><p>I created an arm arch image and amd64 image. I want to test these images to see if they work well</p>
<h3 id="On-my-rpi-I-test-multi-arch-if-it-works"><a href="#On-my-rpi-I-test-multi-arch-if-it-works" class="headerlink" title="On my rpi, I test multi-arch if it works"></a>On my rpi, I test multi-arch if it works</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line">pi@treehouses:~ $ docker pull vmnet8/base-nginx</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from vmnet8/base-nginx</span><br><span class="line">6e39823df636: Already exists </span><br><span class="line">44e31f35ea82: Pull complete </span><br><span class="line">42d1b29a4b84: Pull complete </span><br><span class="line">5f669d9949cf: Pull complete </span><br><span class="line">Digest: sha256:9d646d372f76466948ee660cecd0100bc56dc0fe8e73e8e5294d7873ed09519c</span><br><span class="line">Status: Downloaded newer image for vmnet8/base-nginx:latest</span><br><span class="line">docker.io/vmnet8/base-nginx:latest</span><br><span class="line">pi@treehouses:~ $ docker image ls</span><br><span class="line">REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">vmnet8/base-nginx     latest              72c50c12788d        12 hours ago        20.4MB</span><br><span class="line">pi@treehouses:~ $ docker inspect 72c50c12788d</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Id&quot;: &quot;sha256:72c50c12788d9f57b40a19b83e95a9ca1d5ede10508a6b4d9db89cac67488046&quot;,</span><br><span class="line">        &quot;RepoTags&quot;: [</span><br><span class="line">            &quot;vmnet8/base-nginx:latest&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;RepoDigests&quot;: [</span><br><span class="line">            &quot;vmnet8/base-nginx@sha256:9d646d372f76466948ee660cecd0100bc56dc0fe8e73e8e5294d7873ed09519c&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;Parent&quot;: &quot;&quot;,</span><br><span class="line">        &quot;Comment&quot;: &quot;&quot;,</span><br><span class="line">        &quot;Created&quot;: &quot;2019-12-09T20:16:55.461030258Z&quot;,</span><br><span class="line">        &quot;Container&quot;: &quot;c6f35ed83a7ef7abb9b25b5e437156de03d18a2a1d300a2cb87e73a096ec5307&quot;,</span><br><span class="line">        &quot;ContainerConfig&quot;: &#123;</span><br><span class="line">            &quot;Hostname&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class="line">            &quot;User&quot;: &quot;&quot;,</span><br><span class="line">            &quot;AttachStdin&quot;: false,</span><br><span class="line">            &quot;AttachStdout&quot;: false,</span><br><span class="line">            &quot;AttachStderr&quot;: false,</span><br><span class="line">            &quot;ExposedPorts&quot;: &#123;</span><br><span class="line">                &quot;80/tcp&quot;: &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;Tty&quot;: false,</span><br><span class="line">            &quot;OpenStdin&quot;: false,</span><br><span class="line">            &quot;StdinOnce&quot;: false,</span><br><span class="line">            &quot;Env&quot;: [</span><br><span class="line">                &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;,</span><br><span class="line">                &quot;NGINX_VERSION=1.16.0&quot;,</span><br><span class="line">                &quot;NJS_VERSION=0.3.1&quot;,</span><br><span class="line">                &quot;PKG_RELEASE=1&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Cmd&quot;: [</span><br><span class="line">                &quot;/bin/sh&quot;,</span><br><span class="line">                &quot;-c&quot;,</span><br><span class="line">                &quot;apk add --no-cache       fcgi=2.4.0-r8     fcgiwrap=1.1.0-r3     spawn-fcgi=1.6.4-r3       ca-certificates=20190108-r0       nghttp2-libs=1.35.1-r1       libssh2=1.9.0-r1       libcurl=7.64.0-r3     curl=7.64.0-r3       oniguruma=6.9.4-r0     jq=1.6-r0&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Image&quot;: &quot;sha256:f7441287619ec6a39d018a9c8a7612c719ef7f214c59a701c86734bc88d03865&quot;,</span><br><span class="line">            &quot;Volumes&quot;: null,</span><br><span class="line">            &quot;WorkingDir&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Entrypoint&quot;: null,</span><br><span class="line">            &quot;OnBuild&quot;: null,</span><br><span class="line">            &quot;Labels&quot;: &#123;</span><br><span class="line">                &quot;maintainer&quot;: &quot;NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;StopSignal&quot;: &quot;SIGTERM&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;DockerVersion&quot;: &quot;19.03.5&quot;,</span><br><span class="line">        &quot;Author&quot;: &quot;&quot;,</span><br><span class="line">        &quot;Config&quot;: &#123;</span><br><span class="line">            &quot;Hostname&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class="line">            &quot;User&quot;: &quot;&quot;,</span><br><span class="line">            &quot;AttachStdin&quot;: false,</span><br><span class="line">            &quot;AttachStdout&quot;: false,</span><br><span class="line">            &quot;AttachStderr&quot;: false,</span><br><span class="line">            &quot;ExposedPorts&quot;: &#123;</span><br><span class="line">                &quot;80/tcp&quot;: &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;Tty&quot;: false,</span><br><span class="line">            &quot;OpenStdin&quot;: false,</span><br><span class="line">            &quot;StdinOnce&quot;: false,</span><br><span class="line">            &quot;Env&quot;: [</span><br><span class="line">                &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;,</span><br><span class="line">                &quot;NGINX_VERSION=1.16.0&quot;,</span><br><span class="line">                &quot;NJS_VERSION=0.3.1&quot;,</span><br><span class="line">                &quot;PKG_RELEASE=1&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Cmd&quot;: [</span><br><span class="line">                &quot;nginx&quot;,</span><br><span class="line">                &quot;-g&quot;,</span><br><span class="line">                &quot;daemon off;&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;ArgsEscaped&quot;: true,</span><br><span class="line">            &quot;Image&quot;: &quot;sha256:f7441287619ec6a39d018a9c8a7612c719ef7f214c59a701c86734bc88d03865&quot;,</span><br><span class="line">            &quot;Volumes&quot;: null,</span><br><span class="line">            &quot;WorkingDir&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Entrypoint&quot;: null,</span><br><span class="line">            &quot;OnBuild&quot;: null,</span><br><span class="line">            &quot;Labels&quot;: &#123;</span><br><span class="line">                &quot;maintainer&quot;: &quot;NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;StopSignal&quot;: &quot;SIGTERM&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Architecture&quot;: &quot;arm&quot;,</span><br><span class="line">        &quot;Os&quot;: &quot;linux&quot;,</span><br><span class="line">        &quot;Size&quot;: 20383390,</span><br><span class="line">        &quot;VirtualSize&quot;: 20383390,</span><br><span class="line">        &quot;GraphDriver&quot;: &#123;</span><br><span class="line">            &quot;Data&quot;: &#123;</span><br><span class="line">                &quot;LowerDir&quot;: &quot;/var/lib/docker/overlay2/060e14f6a1d2061d067463c07859a8d771d0e062bb830765109873f70cb6069a/diff:/var/lib/docker/overlay2/30dbadfa6d758ac43c176e04ed6ebd5a5b1774068e098823c37457904cf07f9d/diff:/var/lib/docker/overlay2/decf25251786958f57e943f099fa7095fa83a5ddbca3c89130b19373a464748f/diff&quot;,</span><br><span class="line">                &quot;MergedDir&quot;: &quot;/var/lib/docker/overlay2/58b35d0db3363fcd6dda91aef93c198be97e0f0f1cdfe32be0077b714b1e2968/merged&quot;,</span><br><span class="line">                &quot;UpperDir&quot;: &quot;/var/lib/docker/overlay2/58b35d0db3363fcd6dda91aef93c198be97e0f0f1cdfe32be0077b714b1e2968/diff&quot;,</span><br><span class="line">                &quot;WorkDir&quot;: &quot;/var/lib/docker/overlay2/58b35d0db3363fcd6dda91aef93c198be97e0f0f1cdfe32be0077b714b1e2968/work&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;Name&quot;: &quot;overlay2&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;RootFS&quot;: &#123;</span><br><span class="line">            &quot;Type&quot;: &quot;layers&quot;,</span><br><span class="line">            &quot;Layers&quot;: [</span><br><span class="line">                &quot;sha256:77ffeb9e98427bfbcc3448a22e354cf57e30de34d6c516365659b851f679b1b4&quot;,</span><br><span class="line">                &quot;sha256:1cd1ec9f681cc950d0100535cbd8f3e939c50ab9f9b2d14092992c5465a9f1da&quot;,</span><br><span class="line">                &quot;sha256:05652609bfdb21400e2e13d494475a2e79f7427288c60d20db6756f14de59f5d&quot;,</span><br><span class="line">                &quot;sha256:dc696a4b831ba0c0096808ba0fc072fe5927fe3b2f4189af12adf436be364f79&quot;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Metadata&quot;: &#123;</span><br><span class="line">            &quot;LastTagTime&quot;: &quot;0001-01-01T00:00:00Z&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>it shows pull arm archtecture from dockhub.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pi@treehouses:~ $ docker run -d -p 20001:80 vmnet8/base-nginx </span><br><span class="line">8016c0ea58895053be07bc13c50a08dbe85cd01524eca608855e80b2bcffddbf</span><br></pre></td></tr></table></figure>

<img src="/2019/12/09/Build-multi-arch-docker-image/403.png" class="">

<h3 id="try-other-image"><a href="#try-other-image" class="headerlink" title="try other image"></a>try other image</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">pi@treehouses:~ $ docker pull vmnet8/base-nginx:rpi</span><br><span class="line">rpi: Pulling from vmnet8/base-nginx</span><br><span class="line">6e39823df636: Already exists </span><br><span class="line">38dd00ade3c1: Already exists </span><br><span class="line">c02057c17ddc: Already exists </span><br><span class="line">e6d776bad3ac: Already exists </span><br><span class="line">92ca2fd255df: Already exists </span><br><span class="line">a2cfa1cf1cbb: Already exists </span><br><span class="line">35e3be655ed6: Already exists </span><br><span class="line">f182036f54c2: Already exists </span><br><span class="line">ebbf6799aa99: Pull complete </span><br><span class="line">Digest: sha256:ced17c99328babcabff78c78db75c3426c47a55aa1fec8bcdb554134327f7fff</span><br><span class="line">Status: Downloaded newer image for vmnet8/base-nginx:rpi</span><br><span class="line">docker.io/vmnet8/base-nginx:rpi</span><br><span class="line">pi@treehouses:~ $ docker image ls</span><br><span class="line">REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">vmnet8/base-nginx     rpi                 758ef3313bac        12 hours ago        52MB</span><br><span class="line">vmnet8/base-nginx     latest              72c50c12788d        12 hours ago        20.4MB</span><br><span class="line">pi@treehouses:~ $ docker run -d -p 20002:80 vmnet8/base-nginx:rpi</span><br><span class="line">8d041aecd3937332821e569e74b6744b8d1bd63f2c3b99ea7e410819b81fec0c</span><br></pre></td></tr></table></figure>
<p>run this image<br>it shows 403 error</p>
<img src="/2019/12/09/Build-multi-arch-docker-image/404.png" class="">


<h3 id="test-on-vagrant-treehouse-cli"><a href="#test-on-vagrant-treehouse-cli" class="headerlink" title="test on vagrant treehouse/cli"></a>test on vagrant treehouse/cli</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line">vagrant@cli:~$ docker image ls</span><br><span class="line">REPOSITORY           TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">rabbitmq             3-management        8bdbe10dc73e        5 weeks ago         180MB</span><br><span class="line">treehouses/planet    latest              a67c7ab86add        7 weeks ago         37.6MB</span><br><span class="line">treehouses/planet    local               a67c7ab86add        7 weeks ago         37.6MB</span><br><span class="line">treehouses/planet    db-init             fab533186a58        7 weeks ago         98.6MB</span><br><span class="line">treehouses/planet    db-init-local       fab533186a58        7 weeks ago         98.6MB</span><br><span class="line">treehouses/couchdb   2.3.1               7f64c92d91fb        3 months ago        201MB</span><br><span class="line">vagrant@cli:~$ docker pull vmnet8/base-nginx</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from vmnet8/base-nginx</span><br><span class="line">6e39823df636: Pull complete </span><br><span class="line">38dd00ade3c1: Pull complete </span><br><span class="line">c02057c17ddc: Pull complete </span><br><span class="line">e6d776bad3ac: Pull complete </span><br><span class="line">92ca2fd255df: Pull complete </span><br><span class="line">a2cfa1cf1cbb: Pull complete </span><br><span class="line">35e3be655ed6: Pull complete </span><br><span class="line">f182036f54c2: Pull complete </span><br><span class="line">ebbf6799aa99: Pull complete </span><br><span class="line">Digest: sha256:9d646d372f76466948ee660cecd0100bc56dc0fe8e73e8e5294d7873ed09519c</span><br><span class="line">Status: Downloaded newer image for vmnet8/base-nginx:latest</span><br><span class="line">docker.io/vmnet8/base-nginx:latest</span><br><span class="line">vagrant@cli:~$ docker image ls</span><br><span class="line">REPOSITORY           TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">vmnet8/base-nginx    latest              758ef3313bac        28 hours ago        52MB</span><br><span class="line">rabbitmq             3-management        8bdbe10dc73e        5 weeks ago         180MB</span><br><span class="line">treehouses/planet    latest              a67c7ab86add        7 weeks ago         37.6MB</span><br><span class="line">treehouses/planet    local               a67c7ab86add        7 weeks ago         37.6MB</span><br><span class="line">treehouses/planet    db-init             fab533186a58        7 weeks ago         98.6MB</span><br><span class="line">treehouses/planet    db-init-local       fab533186a58        7 weeks ago         98.6MB</span><br><span class="line">treehouses/couchdb   2.3.1               7f64c92d91fb        3 months ago        201MB</span><br><span class="line">vagrant@cli:~$ docker image inspect vmnet8/base-nginx</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Id&quot;: &quot;sha256:758ef3313bac7fa1fda2b08abc68fa712ae778fdaa65ef5f561e75f346e921f3&quot;,</span><br><span class="line">        &quot;RepoTags&quot;: [</span><br><span class="line">            &quot;vmnet8/base-nginx:latest&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;RepoDigests&quot;: [</span><br><span class="line">            &quot;vmnet8/base-nginx@sha256:9d646d372f76466948ee660cecd0100bc56dc0fe8e73e8e5294d7873ed09519c&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;Parent&quot;: &quot;&quot;,</span><br><span class="line">        &quot;Comment&quot;: &quot;&quot;,</span><br><span class="line">        &quot;Created&quot;: &quot;2019-12-09T20:30:58.028636649Z&quot;,</span><br><span class="line">        &quot;Container&quot;: &quot;a6902c745dd55b102fbc0fec29545b88b0b5418b81a3aa463fe6892894bae52a&quot;,</span><br><span class="line">        &quot;ContainerConfig&quot;: &#123;</span><br><span class="line">            &quot;Hostname&quot;: &quot;bf6e13d66684&quot;,</span><br><span class="line">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class="line">            &quot;User&quot;: &quot;&quot;,</span><br><span class="line">            &quot;AttachStdin&quot;: false,</span><br><span class="line">            &quot;AttachStdout&quot;: false,</span><br><span class="line">            &quot;AttachStderr&quot;: false,</span><br><span class="line">            &quot;ExposedPorts&quot;: &#123;</span><br><span class="line">                &quot;443/tcp&quot;: &#123;&#125;,</span><br><span class="line">                &quot;80/tcp&quot;: &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;Tty&quot;: false,</span><br><span class="line">            &quot;OpenStdin&quot;: false,</span><br><span class="line">            &quot;StdinOnce&quot;: false,</span><br><span class="line">            &quot;Env&quot;: [</span><br><span class="line">                &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;,</span><br><span class="line">                &quot;UDEV=off&quot;,</span><br><span class="line">                &quot;NGINX_VERSION=1.14&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Cmd&quot;: [</span><br><span class="line">                &quot;/bin/sh&quot;,</span><br><span class="line">                &quot;-c&quot;,</span><br><span class="line">                &quot;apk add --no-cache       fcgi=2.4.0-r8     fcgiwrap=1.1.0-r3     spawn-fcgi=1.6.4-r3       ca-certificates=20190108-r0       nghttp2-libs=1.35.1-r0       libssh2=1.8.2-r0       libcurl=7.64.0-r2     curl=7.64.0-r2       oniguruma=6.9.4-r0     jq=1.6-r0&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Image&quot;: &quot;sha256:9412dc8b27c29e6114610c6abd884bb8d13b0396f800c9fed39eef921483e78c&quot;,</span><br><span class="line">            &quot;Volumes&quot;: null,</span><br><span class="line">            &quot;WorkingDir&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Entrypoint&quot;: null,</span><br><span class="line">            &quot;OnBuild&quot;: [],</span><br><span class="line">            &quot;Labels&quot;: &#123;</span><br><span class="line">                &quot;io.balena.architecture&quot;: &quot;rpi&quot;,</span><br><span class="line">                &quot;io.balena.device-type&quot;: &quot;raspberry-pi&quot;,</span><br><span class="line">                &quot;io.balena.qemu.version&quot;: &quot;4.0.0+balena-arm&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.authors&quot;: &quot;Tobias Hargesheimer &lt;docker@ison.ws&gt;&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.description&quot;: &quot;AlpineLinux with NGINX on arm arch&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.licenses&quot;: &quot;Apache-2.0&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.source&quot;: &quot;https://github.com/Tob1asDocker/rpi-nginx&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.title&quot;: &quot;NGINX&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.url&quot;: &quot;https://hub.docker.com/r/tobi312/rpi-nginx/&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;DockerVersion&quot;: &quot;19.03.5&quot;,</span><br><span class="line">        &quot;Author&quot;: &quot;&quot;,</span><br><span class="line">        &quot;Config&quot;: &#123;</span><br><span class="line">            &quot;Hostname&quot;: &quot;bf6e13d66684&quot;,</span><br><span class="line">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class="line">            &quot;User&quot;: &quot;&quot;,</span><br><span class="line">            &quot;AttachStdin&quot;: false,</span><br><span class="line">            &quot;AttachStdout&quot;: false,</span><br><span class="line">            &quot;AttachStderr&quot;: false,</span><br><span class="line">            &quot;ExposedPorts&quot;: &#123;</span><br><span class="line">                &quot;443/tcp&quot;: &#123;&#125;,</span><br><span class="line">                &quot;80/tcp&quot;: &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;Tty&quot;: false,</span><br><span class="line">            &quot;OpenStdin&quot;: false,</span><br><span class="line">            &quot;StdinOnce&quot;: false,</span><br><span class="line">            &quot;Env&quot;: [</span><br><span class="line">                &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;,</span><br><span class="line">                &quot;UDEV=off&quot;,</span><br><span class="line">                &quot;NGINX_VERSION=1.14&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Cmd&quot;: [</span><br><span class="line">                &quot;nginx&quot;,</span><br><span class="line">                &quot;-g&quot;,</span><br><span class="line">                &quot;daemon off;&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;ArgsEscaped&quot;: true,</span><br><span class="line">            &quot;Image&quot;: &quot;sha256:9412dc8b27c29e6114610c6abd884bb8d13b0396f800c9fed39eef921483e78c&quot;,</span><br><span class="line">            &quot;Volumes&quot;: null,</span><br><span class="line">            &quot;WorkingDir&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Entrypoint&quot;: [</span><br><span class="line">                &quot;/usr/bin/entry.sh&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;OnBuild&quot;: [],</span><br><span class="line">            &quot;Labels&quot;: &#123;</span><br><span class="line">                &quot;io.balena.architecture&quot;: &quot;rpi&quot;,</span><br><span class="line">                &quot;io.balena.device-type&quot;: &quot;raspberry-pi&quot;,</span><br><span class="line">                &quot;io.balena.qemu.version&quot;: &quot;4.0.0+balena-arm&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.authors&quot;: &quot;Tobias Hargesheimer &lt;docker@ison.ws&gt;&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.description&quot;: &quot;AlpineLinux with NGINX on arm arch&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.licenses&quot;: &quot;Apache-2.0&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.source&quot;: &quot;https://github.com/Tob1asDocker/rpi-nginx&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.title&quot;: &quot;NGINX&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.url&quot;: &quot;https://hub.docker.com/r/tobi312/rpi-nginx/&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Architecture&quot;: &quot;amd64&quot;,</span><br><span class="line">        &quot;Os&quot;: &quot;linux&quot;,</span><br><span class="line">        &quot;Size&quot;: 52043162,</span><br><span class="line">        &quot;VirtualSize&quot;: 52043162,</span><br><span class="line">        &quot;GraphDriver&quot;: &#123;</span><br><span class="line">            &quot;Data&quot;: &#123;</span><br><span class="line">                &quot;LowerDir&quot;: &quot;/var/lib/docker/overlay2/d65700181956c296d4fdad06b0eaf044450f42948c12ffe0c98369399f3a6171/diff:/var/lib/docker/overlay2/a7fb82cc01d1930806d1c39d1063f4afe95b85bd14acaf4ba5ef25e375acfcaa/diff:/var/lib/docker/overlay2/be79231a2717e7b566eb93f73e098c923310d519ba0df738e9b129e49d68309d/diff:/var/lib/docker/overlay2/85a0df8e1aee0b5a820eaea35ad4478decb1f612f76f89a58e811eb1c8cb45c5/diff:/var/lib/docker/overlay2/74bd5ba7975f879d629da5c5be5ef941598dfacc6bb696d9ac9b1e718bf43460/diff:/var/lib/docker/overlay2/723a132236875c0bbead39340a897bca76a1958e0da321bd4d5933fad0aacd92/diff:/var/lib/docker/overlay2/c6647e80ba872b63745bd7134df3ad5bd563c9723377d1d9db60bb42e14cd35c/diff:/var/lib/docker/overlay2/1bee8c0cb8bf6ace619c5c54016a0f332bf83830e3f12e401f52f88e058a7be9/diff&quot;,</span><br><span class="line">                &quot;MergedDir&quot;: &quot;/var/lib/docker/overlay2/b18c2588c00f54836210ae958ad1f10685db2304eeb97f501dbf9aeb9545084f/merged&quot;,</span><br><span class="line">                &quot;UpperDir&quot;: &quot;/var/lib/docker/overlay2/b18c2588c00f54836210ae958ad1f10685db2304eeb97f501dbf9aeb9545084f/diff&quot;,</span><br><span class="line">                &quot;WorkDir&quot;: &quot;/var/lib/docker/overlay2/b18c2588c00f54836210ae958ad1f10685db2304eeb97f501dbf9aeb9545084f/work&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;Name&quot;: &quot;overlay2&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;RootFS&quot;: &#123;</span><br><span class="line">            &quot;Type&quot;: &quot;layers&quot;,</span><br><span class="line">            &quot;Layers&quot;: [</span><br><span class="line">                &quot;sha256:77ffeb9e98427bfbcc3448a22e354cf57e30de34d6c516365659b851f679b1b4&quot;,</span><br><span class="line">                &quot;sha256:9c66fd3856dc997fc3aedba30803f1bd69651be0cda1757d5db959f37a7fe491&quot;,</span><br><span class="line">                &quot;sha256:4bc006337f970a3226b3ab7b5d3692b90d9bb7cd18746c29be269d6ed75f347d&quot;,</span><br><span class="line">                &quot;sha256:6ff0e3daf8589cf6b0e6f254f3f7d44d0955810d147bd4f87b150d794d6aa681&quot;,</span><br><span class="line">                &quot;sha256:0c8b16ac3ec05312e8fc393f53fe14840a0c8408c960f75297b46ad252f17d8a&quot;,</span><br><span class="line">                &quot;sha256:ca20d2ade963c426acdb97ca81df2d1b0181fc29f1b89745d582874e64c9087f&quot;,</span><br><span class="line">                &quot;sha256:7772294ad95bdaa10c84d306f03bbcc74bede2cc04393114f7c821c0813a8828&quot;,</span><br><span class="line">                &quot;sha256:2d7044011d61cb9fa0a42c0741341323240bb6c1ccb4741afacbb0bbdaaa3dcb&quot;,</span><br><span class="line">                &quot;sha256:06f60bd1a60b1ebeebb9d569809e0282ff9ccb7a1ea235c35e66e618dd993b94&quot;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Metadata&quot;: &#123;</span><br><span class="line">            &quot;LastTagTime&quot;: &quot;0001-01-01T00:00:00Z&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>docker pull the amd64 as latest version.</p>
<p>run this image</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vagrant@cli:~$ docker run -d -p 20003:80  vmnet8/base-nginx</span><br><span class="line">3a0dd81e2b75c5cf34d33cd41308f66049b072f01543bc079bfaed6246d20cfd</span><br><span class="line">vagrant@cli:~$ curl localhost:20003</span><br><span class="line">curl: (7) Failed to connect to localhost port 20003: Connection refused</span><br><span class="line">vagrant@cli:~$ docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE                      COMMAND                  CREATED             STATUS                      PORTS                                                                    NAMES</span><br><span class="line">3a0dd81e2b75        vmnet8/base-nginx          &quot;/usr/bin/entry.sh n…&quot;   17 seconds ago      Exited (1) 15 seconds ago                                                                            confident_poincare</span><br><span class="line">cb31b79eff78        vmnet8/base-nginx          &quot;/usr/bin/entry.sh n…&quot;   5 hours ago         Exited (1) 5 hours ago                                                                               stoic_williamson</span><br><span class="line">a84339e656b4        rabbitmq:3-management      &quot;docker-entrypoint.s…&quot;   5 weeks ago         Exited (255) 5 hours ago    4369/tcp, 5671-5672/tcp, 15671/tcp, 25672/tcp, 0.0.0.0:8080-&gt;15672/tcp   some-rabbit</span><br><span class="line">6b2ff2ae5528        treehouses/couchdb:2.3.1   &quot;tini -- /docker-ent…&quot;   6 weeks ago         Exited (255) 5 hours ago    4369/tcp, 9100/tcp, 0.0.0.0:5984-&gt;5984/tcp                               vmnet8</span><br></pre></td></tr></table></figure>

<p>it shows this docker image failed to run. I build this image on Pi, which is the reason failed.</p>
<h3 id="build-image-on-x86"><a href="#build-image-on-x86" class="headerlink" title="build image on x86."></a>build image on x86.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line">vagrant@cli:~/newbase$ docker image build -t vmnet8/base-nginx:x86new .</span><br><span class="line">Sending build context to Docker daemon  2.048kB</span><br><span class="line">Step 1/3 : FROM nginx:1.16.0-alpine</span><br><span class="line">1.16.0-alpine: Pulling from library/nginx</span><br><span class="line">e7c96db7181b: Already exists </span><br><span class="line">8985e402e050: Already exists </span><br><span class="line">Digest: sha256:270bea203d2fc3743fb9ce0193325e188b7e6233043487e3d3cf117ea4d3f337</span><br><span class="line">Status: Downloaded newer image for nginx:1.16.0-alpine</span><br><span class="line"> ---&gt; ef04b00b089d</span><br><span class="line">Step 2/3 : RUN rm -rf /usr/share/nginx/html/*</span><br><span class="line"> ---&gt; Running in 26a738b05d6b</span><br><span class="line">Removing intermediate container 26a738b05d6b</span><br><span class="line"> ---&gt; 1a3fa7c937d7</span><br><span class="line">Step 3/3 : RUN apk add --no-cache       fcgi=2.4.0-r8     fcgiwrap=1.1.0-r3     spawn-fcgi=1.6.4-r3       ca-certificates=20190108-r0       nghttp2-libs=1.35.1-r1       libssh2=1.9.0-r1       libcurl=7.64.0-r3     curl=7.64.0-r3       oniguruma=6.9.4-r0     jq=1.6-r0</span><br><span class="line"> ---&gt; Running in 487a73601a7c</span><br><span class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.9/main/x86_64/APKINDEX.tar.gz</span><br><span class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.9/community/x86_64/APKINDEX.tar.gz</span><br><span class="line">(1/10) Installing ca-certificates (20190108-r0)</span><br><span class="line">(2/10) Installing nghttp2-libs (1.35.1-r1)</span><br><span class="line">(3/10) Installing libssh2 (1.9.0-r1)</span><br><span class="line">(4/10) Installing libcurl (7.64.0-r3)</span><br><span class="line">(5/10) Installing curl (7.64.0-r3)</span><br><span class="line">(6/10) Installing fcgi (2.4.0-r8)</span><br><span class="line">(7/10) Installing fcgiwrap (1.1.0-r3)</span><br><span class="line">Executing fcgiwrap-1.1.0-r3.pre-install</span><br><span class="line">(8/10) Installing oniguruma (6.9.4-r0)</span><br><span class="line">(9/10) Installing jq (1.6-r0)</span><br><span class="line">(10/10) Installing spawn-fcgi (1.6.4-r3)</span><br><span class="line">Executing busybox-1.29.3-r10.trigger</span><br><span class="line">Executing ca-certificates-20190108-r0.trigger</span><br><span class="line">OK: 30 MiB in 47 packages</span><br><span class="line">Removing intermediate container 487a73601a7c</span><br><span class="line"> ---&gt; d8aec7e71b73</span><br><span class="line">Successfully built d8aec7e71b73</span><br><span class="line">Successfully tagged vmnet8/base-nginx:x86new</span><br><span class="line">vagrant@cli:~/newbase$ docker image ls</span><br><span class="line">REPOSITORY           TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">vmnet8/base-nginx    x86new              d8aec7e71b73        14 seconds ago      23.5MB</span><br><span class="line">vmnet8/base-nginx    latest              758ef3313bac        33 hours ago        52MB</span><br><span class="line">rabbitmq             3-management        8bdbe10dc73e        5 weeks ago         180MB</span><br><span class="line">treehouses/planet    latest              a67c7ab86add        7 weeks ago         37.6MB</span><br><span class="line">treehouses/planet    local               a67c7ab86add        7 weeks ago         37.6MB</span><br><span class="line">treehouses/planet    db-init             fab533186a58        7 weeks ago         98.6MB</span><br><span class="line">treehouses/planet    db-init-local       fab533186a58        7 weeks ago         98.6MB</span><br><span class="line">treehouses/couchdb   2.3.1               7f64c92d91fb        3 months ago        201MB</span><br><span class="line">nginx                1.16.0-alpine       ef04b00b089d        7 months ago        20.4MB</span><br><span class="line">vagrant@cli:~/newbase$ docker image inspect vmnet8/base-nginx:x86new</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Id&quot;: &quot;sha256:d8aec7e71b735ce78ea6e30fa22272c29206d064302b04b5265ba7abfa60250a&quot;,</span><br><span class="line">        &quot;RepoTags&quot;: [</span><br><span class="line">            &quot;vmnet8/base-nginx:x86new&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;RepoDigests&quot;: [],</span><br><span class="line">        &quot;Parent&quot;: &quot;sha256:1a3fa7c937d7f6dfa6e1353bc404f2bdecbc650de6ee68274e512dbf98698d5c&quot;,</span><br><span class="line">        &quot;Comment&quot;: &quot;&quot;,</span><br><span class="line">        &quot;Created&quot;: &quot;2019-12-11T05:41:23.768015601Z&quot;,</span><br><span class="line">        &quot;Container&quot;: &quot;487a73601a7c8890adb98c479a2b711e04b5d148b3bc8d90e5ee741034a08971&quot;,</span><br><span class="line">        &quot;ContainerConfig&quot;: &#123;</span><br><span class="line">            &quot;Hostname&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class="line">            &quot;User&quot;: &quot;&quot;,</span><br><span class="line">            &quot;AttachStdin&quot;: false,</span><br><span class="line">            &quot;AttachStdout&quot;: false,</span><br><span class="line">            &quot;AttachStderr&quot;: false,</span><br><span class="line">            &quot;ExposedPorts&quot;: &#123;</span><br><span class="line">                &quot;80/tcp&quot;: &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;Tty&quot;: false,</span><br><span class="line">            &quot;OpenStdin&quot;: false,</span><br><span class="line">            &quot;StdinOnce&quot;: false,</span><br><span class="line">            &quot;Env&quot;: [</span><br><span class="line">                &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;,</span><br><span class="line">                &quot;NGINX_VERSION=1.16.0&quot;,</span><br><span class="line">                &quot;NJS_VERSION=0.3.1&quot;,</span><br><span class="line">                &quot;PKG_RELEASE=1&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Cmd&quot;: [</span><br><span class="line">                &quot;/bin/sh&quot;,</span><br><span class="line">                &quot;-c&quot;,</span><br><span class="line">                &quot;apk add --no-cache       fcgi=2.4.0-r8     fcgiwrap=1.1.0-r3     spawn-fcgi=1.6.4-r3       ca-certificates=20190108-r0       nghttp2-libs=1.35.1-r1       libssh2=1.9.0-r1       libcurl=7.64.0-r3     curl=7.64.0-r3       oniguruma=6.9.4-r0     jq=1.6-r0&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Image&quot;: &quot;sha256:1a3fa7c937d7f6dfa6e1353bc404f2bdecbc650de6ee68274e512dbf98698d5c&quot;,</span><br><span class="line">            &quot;Volumes&quot;: null,</span><br><span class="line">            &quot;WorkingDir&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Entrypoint&quot;: null,</span><br><span class="line">            &quot;OnBuild&quot;: null,</span><br><span class="line">            &quot;Labels&quot;: &#123;</span><br><span class="line">                &quot;maintainer&quot;: &quot;NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;StopSignal&quot;: &quot;SIGTERM&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;DockerVersion&quot;: &quot;19.03.3&quot;,</span><br><span class="line">        &quot;Author&quot;: &quot;&quot;,</span><br><span class="line">        &quot;Config&quot;: &#123;</span><br><span class="line">            &quot;Hostname&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class="line">            &quot;User&quot;: &quot;&quot;,</span><br><span class="line">            &quot;AttachStdin&quot;: false,</span><br><span class="line">            &quot;AttachStdout&quot;: false,</span><br><span class="line">            &quot;AttachStderr&quot;: false,</span><br><span class="line">            &quot;ExposedPorts&quot;: &#123;</span><br><span class="line">                &quot;80/tcp&quot;: &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;Tty&quot;: false,</span><br><span class="line">            &quot;OpenStdin&quot;: false,</span><br><span class="line">            &quot;StdinOnce&quot;: false,</span><br><span class="line">            &quot;Env&quot;: [</span><br><span class="line">                &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;,</span><br><span class="line">                &quot;NGINX_VERSION=1.16.0&quot;,</span><br><span class="line">                &quot;NJS_VERSION=0.3.1&quot;,</span><br><span class="line">                &quot;PKG_RELEASE=1&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Cmd&quot;: [</span><br><span class="line">                &quot;nginx&quot;,</span><br><span class="line">                &quot;-g&quot;,</span><br><span class="line">                &quot;daemon off;&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;ArgsEscaped&quot;: true,</span><br><span class="line">            &quot;Image&quot;: &quot;sha256:1a3fa7c937d7f6dfa6e1353bc404f2bdecbc650de6ee68274e512dbf98698d5c&quot;,</span><br><span class="line">            &quot;Volumes&quot;: null,</span><br><span class="line">            &quot;WorkingDir&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Entrypoint&quot;: null,</span><br><span class="line">            &quot;OnBuild&quot;: null,</span><br><span class="line">            &quot;Labels&quot;: &#123;</span><br><span class="line">                &quot;maintainer&quot;: &quot;NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;StopSignal&quot;: &quot;SIGTERM&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Architecture&quot;: &quot;amd64&quot;,</span><br><span class="line">        &quot;Os&quot;: &quot;linux&quot;,</span><br><span class="line">        &quot;Size&quot;: 23454243,</span><br><span class="line">        &quot;VirtualSize&quot;: 23454243,</span><br><span class="line">        &quot;GraphDriver&quot;: &#123;</span><br><span class="line">            &quot;Data&quot;: &#123;</span><br><span class="line">                &quot;LowerDir&quot;: &quot;/var/lib/docker/overlay2/5a707ebb56c473f0b857d9f3ba70210ec9e599e2c1dcff32091ff9609e97fc40/diff:/var/lib/docker/overlay2/dc6895345b17265c1e0d24dfd5e54755dd564c41f31e8e43cc53ecfa559aabdf/diff:/var/lib/docker/overlay2/75e6526fd72d6193688bb1d4f9b3eea897e2e3fc0467f1ff39e4ef94e4a9ee61/diff&quot;,</span><br><span class="line">                &quot;MergedDir&quot;: &quot;/var/lib/docker/overlay2/4c4adc9af1f46fcb4bcf1b0d90715b31302dc6b1861d34ea85191d3bd59b5fa9/merged&quot;,</span><br><span class="line">                &quot;UpperDir&quot;: &quot;/var/lib/docker/overlay2/4c4adc9af1f46fcb4bcf1b0d90715b31302dc6b1861d34ea85191d3bd59b5fa9/diff&quot;,</span><br><span class="line">                &quot;WorkDir&quot;: &quot;/var/lib/docker/overlay2/4c4adc9af1f46fcb4bcf1b0d90715b31302dc6b1861d34ea85191d3bd59b5fa9/work&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;Name&quot;: &quot;overlay2&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;RootFS&quot;: &#123;</span><br><span class="line">            &quot;Type&quot;: &quot;layers&quot;,</span><br><span class="line">            &quot;Layers&quot;: [</span><br><span class="line">                &quot;sha256:f1b5933fe4b5f49bbe8258745cf396afe07e625bdab3168e364daf7c956b6b81&quot;,</span><br><span class="line">                &quot;sha256:2bdf88b2699da3549a9cbc76f9b6ee058cc1f9d232fba48dda107478abfc694b&quot;,</span><br><span class="line">                &quot;sha256:cc2d7d10b40de1e2253f628b1881b4e27998b82ba38f8182f4773144a30c7ca0&quot;,</span><br><span class="line">                &quot;sha256:6f9350f71e829ee3a008387295156dd216e126c2248b0ce9e72a6dfdb599a6ac&quot;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Metadata&quot;: &#123;</span><br><span class="line">            &quot;LastTagTime&quot;: &quot;2019-12-11T05:41:23.967401201Z&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>I pushed this image to dockerhub</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vagrant@cli:~/newbase$ docker push vmnet8/base-nginx:x86new</span><br><span class="line">The push refers to repository [docker.io/vmnet8/base-nginx]</span><br><span class="line">6f9350f71e82: Pushed </span><br><span class="line">cc2d7d10b40d: Pushed </span><br><span class="line">2bdf88b2699d: Mounted from library/nginx </span><br><span class="line">f1b5933fe4b5: Mounted from library/nginx </span><br><span class="line">x86new: digest: sha256:ec6b9bd2bdac454ab43080c163ba9e06119e0a075c5f433cbcd481398c88a013 size: 1157</span><br></pre></td></tr></table></figure>

<p>I try to build multi-arch image</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vagrant@cli:~/newbase$ docker manifest create vmnet8/base-nginx:latest vmnet8/base-nginx:rpi vmnet8/base-nginx:x86 vmnet8/base-nginx:x86new </span><br><span class="line">Created manifest list docker.io/vmnet8/base-nginx:latest</span><br></pre></td></tr></table></figure>

<p>note: before manifest create, I need to </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /home/vagrant/.docker/config.json</span><br></pre></td></tr></table></figure>
<p>add </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;experimental&quot;: &quot;enabled&quot;</span><br></pre></td></tr></table></figure>
<p>after manifest created, I inspect it</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">vagrant@cli:~/newbase$ docker manifest inspect vmnet8/base-nginx</span><br><span class="line">&#123;</span><br><span class="line">   &quot;schemaVersion&quot;: 2,</span><br><span class="line">   &quot;mediaType&quot;: &quot;application/vnd.docker.distribution.manifest.list.v2+json&quot;,</span><br><span class="line">   &quot;manifests&quot;: [</span><br><span class="line">      &#123;</span><br><span class="line">         &quot;mediaType&quot;: &quot;application/vnd.docker.distribution.manifest.v2+json&quot;,</span><br><span class="line">         &quot;size&quot;: 2205,</span><br><span class="line">         &quot;digest&quot;: &quot;sha256:ced17c99328babcabff78c78db75c3426c47a55aa1fec8bcdb554134327f7fff&quot;,</span><br><span class="line">         &quot;platform&quot;: &#123;</span><br><span class="line">            &quot;architecture&quot;: &quot;amd64&quot;,</span><br><span class="line">            &quot;os&quot;: &quot;linux&quot;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">         &quot;mediaType&quot;: &quot;application/vnd.docker.distribution.manifest.v2+json&quot;,</span><br><span class="line">         &quot;size&quot;: 1157,</span><br><span class="line">         &quot;digest&quot;: &quot;sha256:40fc08ff08e250a9022242cab5f68042c98b6e1f09551fe4dfca3b04dfcc8533&quot;,</span><br><span class="line">         &quot;platform&quot;: &#123;</span><br><span class="line">            &quot;architecture&quot;: &quot;arm&quot;,</span><br><span class="line">            &quot;os&quot;: &quot;linux&quot;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">         &quot;mediaType&quot;: &quot;application/vnd.docker.distribution.manifest.v2+json&quot;,</span><br><span class="line">         &quot;size&quot;: 1157,</span><br><span class="line">         &quot;digest&quot;: &quot;sha256:ec6b9bd2bdac454ab43080c163ba9e06119e0a075c5f433cbcd481398c88a013&quot;,</span><br><span class="line">         &quot;platform&quot;: &#123;</span><br><span class="line">            &quot;architecture&quot;: &quot;amd64&quot;,</span><br><span class="line">            &quot;os&quot;: &quot;linux&quot;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>then push this manifest list  to dockerhub</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vagrant@cli:~/newbase$ docker manifest push vmnet8/base-nginx:latest</span><br><span class="line">sha256:49c78057a124c4b05f90028d3d322c39e4f4b76ee2be173e6969207f7887cc77</span><br></pre></td></tr></table></figure>


<p>I am going to run imaged which is created on vagrant to see if it works</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vagrant@cli:~/newbase$ docker run -d -p 20003:80 vmnet8/base-nginx:x86new</span><br><span class="line">9ab8b587f00d2d5df112a12acff0f1bb43ec5a99880c20566d05be83bfb81eaa</span><br><span class="line">vagrant@cli:~/newbase$ curl localhost:20003</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;&lt;title&gt;403 Forbidden&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;center&gt;&lt;h1&gt;403 Forbidden&lt;/h1&gt;&lt;/center&gt;</span><br><span class="line">&lt;hr&gt;&lt;center&gt;nginx/1.16.0&lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>it works!</p>
<p>I try to use multi-arch tag to pull docker image from dockerhub</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><span class="line">vagrant@cli:~$ docker pull vmnet8/base-nginx</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from vmnet8/base-nginx</span><br><span class="line">6e39823df636: Pull complete </span><br><span class="line">38dd00ade3c1: Pull complete </span><br><span class="line">c02057c17ddc: Pull complete </span><br><span class="line">e6d776bad3ac: Pull complete </span><br><span class="line">92ca2fd255df: Pull complete </span><br><span class="line">a2cfa1cf1cbb: Pull complete </span><br><span class="line">35e3be655ed6: Pull complete </span><br><span class="line">f182036f54c2: Pull complete </span><br><span class="line">ebbf6799aa99: Pull complete </span><br><span class="line">Digest: sha256:49c78057a124c4b05f90028d3d322c39e4f4b76ee2be173e6969207f7887cc77</span><br><span class="line">Status: Downloaded newer image for vmnet8/base-nginx:latest</span><br><span class="line">docker.io/vmnet8/base-nginx:latest</span><br><span class="line">vagrant@cli:~$ docker image ls</span><br><span class="line">REPOSITORY           TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">vmnet8/base-nginx    latest              758ef3313bac        34 hours ago        52MB</span><br><span class="line">rabbitmq             3-management        8bdbe10dc73e        5 weeks ago         180MB</span><br><span class="line">treehouses/planet    latest              a67c7ab86add        7 weeks ago         37.6MB</span><br><span class="line">treehouses/planet    local               a67c7ab86add        7 weeks ago         37.6MB</span><br><span class="line">treehouses/planet    db-init             fab533186a58        7 weeks ago         98.6MB</span><br><span class="line">treehouses/planet    db-init-local       fab533186a58        7 weeks ago         98.6MB</span><br><span class="line">treehouses/couchdb   2.3.1               7f64c92d91fb        3 months ago        201MB</span><br><span class="line">nginx                1.16.0-alpine       ef04b00b089d        7 months ago        20.4MB</span><br><span class="line">vagrant@cli:~$ docker run -d -p 20004:80 vmnet8/base-nginx</span><br><span class="line">a89bcd5de4cc0f891df5a07d86d0a0424f72c307924ed814a87fb84110441a13</span><br><span class="line">vagrant@cli:~$ curl localhost:20004</span><br><span class="line">curl: (7) Failed to connect to localhost port 20004: Connection refused</span><br><span class="line">vagrant@cli:~$ docker image inspect vmnet8/base-nginx</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Id&quot;: &quot;sha256:758ef3313bac7fa1fda2b08abc68fa712ae778fdaa65ef5f561e75f346e921f3&quot;,</span><br><span class="line">        &quot;RepoTags&quot;: [</span><br><span class="line">            &quot;vmnet8/base-nginx:latest&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;RepoDigests&quot;: [</span><br><span class="line">            &quot;vmnet8/base-nginx@sha256:49c78057a124c4b05f90028d3d322c39e4f4b76ee2be173e6969207f7887cc77&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;Parent&quot;: &quot;&quot;,</span><br><span class="line">        &quot;Comment&quot;: &quot;&quot;,</span><br><span class="line">        &quot;Created&quot;: &quot;2019-12-09T20:30:58.028636649Z&quot;,</span><br><span class="line">        &quot;Container&quot;: &quot;a6902c745dd55b102fbc0fec29545b88b0b5418b81a3aa463fe6892894bae52a&quot;,</span><br><span class="line">        &quot;ContainerConfig&quot;: &#123;</span><br><span class="line">            &quot;Hostname&quot;: &quot;bf6e13d66684&quot;,</span><br><span class="line">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class="line">            &quot;User&quot;: &quot;&quot;,</span><br><span class="line">            &quot;AttachStdin&quot;: false,</span><br><span class="line">            &quot;AttachStdout&quot;: false,</span><br><span class="line">            &quot;AttachStderr&quot;: false,</span><br><span class="line">            &quot;ExposedPorts&quot;: &#123;</span><br><span class="line">                &quot;443/tcp&quot;: &#123;&#125;,</span><br><span class="line">                &quot;80/tcp&quot;: &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;Tty&quot;: false,</span><br><span class="line">            &quot;OpenStdin&quot;: false,</span><br><span class="line">            &quot;StdinOnce&quot;: false,</span><br><span class="line">            &quot;Env&quot;: [</span><br><span class="line">                &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;,</span><br><span class="line">                &quot;UDEV=off&quot;,</span><br><span class="line">                &quot;NGINX_VERSION=1.14&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Cmd&quot;: [</span><br><span class="line">                &quot;/bin/sh&quot;,</span><br><span class="line">                &quot;-c&quot;,</span><br><span class="line">                &quot;apk add --no-cache       fcgi=2.4.0-r8     fcgiwrap=1.1.0-r3     spawn-fcgi=1.6.4-r3       ca-certificates=20190108-r0       nghttp2-libs=1.35.1-r0       libssh2=1.8.2-r0       libcurl=7.64.0-r2     curl=7.64.0-r2       oniguruma=6.9.4-r0     jq=1.6-r0&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Image&quot;: &quot;sha256:9412dc8b27c29e6114610c6abd884bb8d13b0396f800c9fed39eef921483e78c&quot;,</span><br><span class="line">            &quot;Volumes&quot;: null,</span><br><span class="line">            &quot;WorkingDir&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Entrypoint&quot;: null,</span><br><span class="line">            &quot;OnBuild&quot;: [],</span><br><span class="line">            &quot;Labels&quot;: &#123;</span><br><span class="line">                &quot;io.balena.architecture&quot;: &quot;rpi&quot;,</span><br><span class="line">                &quot;io.balena.device-type&quot;: &quot;raspberry-pi&quot;,</span><br><span class="line">                &quot;io.balena.qemu.version&quot;: &quot;4.0.0+balena-arm&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.authors&quot;: &quot;Tobias Hargesheimer &lt;docker@ison.ws&gt;&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.description&quot;: &quot;AlpineLinux with NGINX on arm arch&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.licenses&quot;: &quot;Apache-2.0&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.source&quot;: &quot;https://github.com/Tob1asDocker/rpi-nginx&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.title&quot;: &quot;NGINX&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.url&quot;: &quot;https://hub.docker.com/r/tobi312/rpi-nginx/&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;DockerVersion&quot;: &quot;19.03.5&quot;,</span><br><span class="line">        &quot;Author&quot;: &quot;&quot;,</span><br><span class="line">        &quot;Config&quot;: &#123;</span><br><span class="line">            &quot;Hostname&quot;: &quot;bf6e13d66684&quot;,</span><br><span class="line">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class="line">            &quot;User&quot;: &quot;&quot;,</span><br><span class="line">            &quot;AttachStdin&quot;: false,</span><br><span class="line">            &quot;AttachStdout&quot;: false,</span><br><span class="line">            &quot;AttachStderr&quot;: false,</span><br><span class="line">            &quot;ExposedPorts&quot;: &#123;</span><br><span class="line">                &quot;443/tcp&quot;: &#123;&#125;,</span><br><span class="line">                &quot;80/tcp&quot;: &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;Tty&quot;: false,</span><br><span class="line">            &quot;OpenStdin&quot;: false,</span><br><span class="line">            &quot;StdinOnce&quot;: false,</span><br><span class="line">            &quot;Env&quot;: [</span><br><span class="line">                &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;,</span><br><span class="line">                &quot;UDEV=off&quot;,</span><br><span class="line">                &quot;NGINX_VERSION=1.14&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Cmd&quot;: [</span><br><span class="line">                &quot;nginx&quot;,</span><br><span class="line">                &quot;-g&quot;,</span><br><span class="line">                &quot;daemon off;&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;ArgsEscaped&quot;: true,</span><br><span class="line">            &quot;Image&quot;: &quot;sha256:9412dc8b27c29e6114610c6abd884bb8d13b0396f800c9fed39eef921483e78c&quot;,</span><br><span class="line">            &quot;Volumes&quot;: null,</span><br><span class="line">            &quot;WorkingDir&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Entrypoint&quot;: [</span><br><span class="line">                &quot;/usr/bin/entry.sh&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;OnBuild&quot;: [],</span><br><span class="line">            &quot;Labels&quot;: &#123;</span><br><span class="line">                &quot;io.balena.architecture&quot;: &quot;rpi&quot;,</span><br><span class="line">                &quot;io.balena.device-type&quot;: &quot;raspberry-pi&quot;,</span><br><span class="line">                &quot;io.balena.qemu.version&quot;: &quot;4.0.0+balena-arm&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.authors&quot;: &quot;Tobias Hargesheimer &lt;docker@ison.ws&gt;&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.description&quot;: &quot;AlpineLinux with NGINX on arm arch&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.licenses&quot;: &quot;Apache-2.0&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.source&quot;: &quot;https://github.com/Tob1asDocker/rpi-nginx&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.title&quot;: &quot;NGINX&quot;,</span><br><span class="line">                &quot;org.opencontainers.image.url&quot;: &quot;https://hub.docker.com/r/tobi312/rpi-nginx/&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Architecture&quot;: &quot;amd64&quot;,</span><br><span class="line">        &quot;Os&quot;: &quot;linux&quot;,</span><br><span class="line">        &quot;Size&quot;: 52043162,</span><br><span class="line">        &quot;VirtualSize&quot;: 52043162,</span><br><span class="line">        &quot;GraphDriver&quot;: &#123;</span><br><span class="line">            &quot;Data&quot;: &#123;</span><br><span class="line">                &quot;LowerDir&quot;: &quot;/var/lib/docker/overlay2/70cc3e3fca1507e7c9211d22d66265395f885288b1d399fd003514537556386b/diff:/var/lib/docker/overlay2/ab42b343ec4b7c5aa9e0ba0f481ace9ae691ad10afdf36f1c314b230342f9924/diff:/var/lib/docker/overlay2/7e603a7ebe90bb63e84dd3501b14ba46c0616240f7c52aaa47197b9e3c804f33/diff:/var/lib/docker/overlay2/b8dd6469e761a22a9dfe53b5289a90b779b4fbdf26fcb1dd26756611d81a64ef/diff:/var/lib/docker/overlay2/3fc0c51f817104f7fca2a82f0802196eb6a57a8cf4decc787c52b99fd54f4b7c/diff:/var/lib/docker/overlay2/b89a682e4c598baceee669bf3fdefc299975da996e6d0013a5090c301aeae075/diff:/var/lib/docker/overlay2/bf6fd4d2a150b622243975d715f0e33e556071b13c6484fe7fe5917b08b71481/diff:/var/lib/docker/overlay2/fd3f10fb826ce429ce564d9df304dd67ef3ddb51ad6f8c25997d56db45705e5c/diff&quot;,</span><br><span class="line">                &quot;MergedDir&quot;: &quot;/var/lib/docker/overlay2/7fde1119a0359c349ce4626798034f5bfe595f5137996b86d7604e9f0547f4ee/merged&quot;,</span><br><span class="line">                &quot;UpperDir&quot;: &quot;/var/lib/docker/overlay2/7fde1119a0359c349ce4626798034f5bfe595f5137996b86d7604e9f0547f4ee/diff&quot;,</span><br><span class="line">                &quot;WorkDir&quot;: &quot;/var/lib/docker/overlay2/7fde1119a0359c349ce4626798034f5bfe595f5137996b86d7604e9f0547f4ee/work&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;Name&quot;: &quot;overlay2&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;RootFS&quot;: &#123;</span><br><span class="line">            &quot;Type&quot;: &quot;layers&quot;,</span><br><span class="line">            &quot;Layers&quot;: [</span><br><span class="line">                &quot;sha256:77ffeb9e98427bfbcc3448a22e354cf57e30de34d6c516365659b851f679b1b4&quot;,</span><br><span class="line">                &quot;sha256:9c66fd3856dc997fc3aedba30803f1bd69651be0cda1757d5db959f37a7fe491&quot;,</span><br><span class="line">                &quot;sha256:4bc006337f970a3226b3ab7b5d3692b90d9bb7cd18746c29be269d6ed75f347d&quot;,</span><br><span class="line">                &quot;sha256:6ff0e3daf8589cf6b0e6f254f3f7d44d0955810d147bd4f87b150d794d6aa681&quot;,</span><br><span class="line">                &quot;sha256:0c8b16ac3ec05312e8fc393f53fe14840a0c8408c960f75297b46ad252f17d8a&quot;,</span><br><span class="line">                &quot;sha256:ca20d2ade963c426acdb97ca81df2d1b0181fc29f1b89745d582874e64c9087f&quot;,</span><br><span class="line">                &quot;sha256:7772294ad95bdaa10c84d306f03bbcc74bede2cc04393114f7c821c0813a8828&quot;,</span><br><span class="line">                &quot;sha256:2d7044011d61cb9fa0a42c0741341323240bb6c1ccb4741afacbb0bbdaaa3dcb&quot;,</span><br><span class="line">                &quot;sha256:06f60bd1a60b1ebeebb9d569809e0282ff9ccb7a1ea235c35e66e618dd993b94&quot;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Metadata&quot;: &#123;</span><br><span class="line">            &quot;LastTagTime&quot;: &quot;0001-01-01T00:00:00Z&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>it still failed, but I don’t know which tag this image is</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://vmnet8.github.io/2019/12/06/Build-a-docker-image-bettercap/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anna X">
      <meta itemprop="description" content="Happy coding ...">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/34552097">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anna X">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/12/06/Build-a-docker-image-bettercap/" class="post-title-link" itemprop="url">Build a docker image: bettercap</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-12-06 16:54:53" itemprop="dateCreated datePublished" datetime="2019-12-06T16:54:53-08:00">2019-12-06</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-06-03 17:28:31" itemprop="dateModified" datetime="2020-06-03T17:28:31-07:00">2020-06-03</time>
              </span>
            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2019/12/06/Build-a-docker-image-bettercap/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/12/06/Build-a-docker-image-bettercap/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Make directory for bettercap and build docker image under this diretory, not recommend under root.<br>Clone the dockerfile from github,<br>Note: git clone the whole git repo, otherwise build process will failed because of lacking some files such as makefile.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/bettercap/bettercap.git</span><br></pre></td></tr></table></figure>

<h2 id="build-the-docker-image"><a href="#build-the-docker-image" class="headerlink" title="build the docker image"></a>build the docker image</h2><p>Note: it needs at least 4G memory. I used the Pi 3B+, which only has 1G memory, it failed. then I changed to Pi4.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br></pre></td><td class="code"><pre><span class="line">root@vmnet8cloud:~/bettercap/bettercap# docker build .</span><br><span class="line">Sending build context to Docker daemon  19.83MB</span><br><span class="line">Step 1/17 : FROM golang:alpine AS build-env</span><br><span class="line"> ---&gt; 6a83a6459979</span><br><span class="line">Step 2/17 : ENV SRC_DIR $GOPATH/src/github.com/bettercap/bettercap</span><br><span class="line"> ---&gt; Running in f7be9c390ea2</span><br><span class="line">Removing intermediate container f7be9c390ea2</span><br><span class="line"> ---&gt; 574512a28fc9</span><br><span class="line">Step 3/17 : RUN apk add --update ca-certificates</span><br><span class="line"> ---&gt; Running in b93f2b7777b8</span><br><span class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/armv7/APKINDEX.tar.gz</span><br><span class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/armv7/APKINDEX.tar.gz</span><br><span class="line">OK: 4 MiB in 15 packages</span><br><span class="line">Removing intermediate container b93f2b7777b8</span><br><span class="line"> ---&gt; 6a02504d09c8</span><br><span class="line">Step 4/17 : RUN apk add --no-cache --update bash iptables wireless-tools build-base libpcap-dev libusb-dev linux-headers libnetfilter_queue-dev git</span><br><span class="line"> ---&gt; Running in 504d45657d66</span><br><span class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/armv7/APKINDEX.tar.gz</span><br><span class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/armv7/APKINDEX.tar.gz</span><br><span class="line">(1/42) Installing ncurses-terminfo-base (6.1_p20190518-r0)</span><br><span class="line">(2/42) Installing ncurses-terminfo (6.1_p20190518-r0)</span><br><span class="line">(3/42) Installing ncurses-libs (6.1_p20190518-r0)</span><br><span class="line">(4/42) Installing readline (8.0.0-r0)</span><br><span class="line">(5/42) Installing bash (5.0.0-r0)</span><br><span class="line">Executing bash-5.0.0-r0.post-install</span><br><span class="line">(6/42) Installing binutils (2.32-r0)</span><br><span class="line">(7/42) Installing libmagic (5.37-r1)</span><br><span class="line">(8/42) Installing file (5.37-r1)</span><br><span class="line">(9/42) Installing gmp (6.1.2-r1)</span><br><span class="line">(10/42) Installing isl (0.18-r0)</span><br><span class="line">(11/42) Installing libgomp (8.3.0-r0)</span><br><span class="line">(12/42) Installing libatomic (8.3.0-r0)</span><br><span class="line">(13/42) Installing libgcc (8.3.0-r0)</span><br><span class="line">(14/42) Installing mpfr3 (3.1.5-r1)</span><br><span class="line">(15/42) Installing mpc1 (1.1.0-r0)</span><br><span class="line">(16/42) Installing libstdc++ (8.3.0-r0)</span><br><span class="line">(17/42) Installing gcc (8.3.0-r0)</span><br><span class="line">(18/42) Installing musl-dev (1.1.22-r3)</span><br><span class="line">(19/42) Installing libc-dev (0.7.1-r0)</span><br><span class="line">(20/42) Installing g++ (8.3.0-r0)</span><br><span class="line">(21/42) Installing make (4.2.1-r2)</span><br><span class="line">(22/42) Installing fortify-headers (1.1-r0)</span><br><span class="line">(23/42) Installing build-base (0.5-r1)</span><br><span class="line">(24/42) Installing nghttp2-libs (1.39.2-r0)</span><br><span class="line">(25/42) Installing libcurl (7.66.0-r0)</span><br><span class="line">(26/42) Installing expat (2.2.8-r0)</span><br><span class="line">(27/42) Installing pcre2 (10.33-r0)</span><br><span class="line">(28/42) Installing git (2.22.0-r0)</span><br><span class="line">(29/42) Installing libmnl (1.0.4-r0)</span><br><span class="line">(30/42) Installing libnftnl-libs (1.1.3-r0)</span><br><span class="line">(31/42) Installing iptables (1.8.3-r0)</span><br><span class="line">(32/42) Installing libnfnetlink (1.0.1-r1)</span><br><span class="line">(33/42) Installing libnetfilter_queue (1.0.3-r0)</span><br><span class="line">(34/42) Installing pkgconf (1.6.1-r1)</span><br><span class="line">(35/42) Installing libnfnetlink-dev (1.0.1-r1)</span><br><span class="line">(36/42) Installing libnetfilter_queue-dev (1.0.3-r0)</span><br><span class="line">(37/42) Installing libpcap (1.9.1-r0)</span><br><span class="line">(38/42) Installing libpcap-dev (1.9.1-r0)</span><br><span class="line">(39/42) Installing libusb (1.0.22-r0)</span><br><span class="line">(40/42) Installing libusb-dev (1.0.22-r0)</span><br><span class="line">(41/42) Installing linux-headers (4.19.36-r0)</span><br><span class="line">(42/42) Installing wireless-tools (30_pre9-r1)</span><br><span class="line">Executing busybox-1.30.1-r2.trigger</span><br><span class="line">OK: 144 MiB in 57 packages</span><br><span class="line">Removing intermediate container 504d45657d66</span><br><span class="line"> ---&gt; f648d787ff0e</span><br><span class="line">Step 5/17 : WORKDIR $SRC_DIR</span><br><span class="line"> ---&gt; Running in e14fcfed0d87</span><br><span class="line">Removing intermediate container e14fcfed0d87</span><br><span class="line"> ---&gt; 181d2b3b343f</span><br><span class="line">Step 6/17 : ADD . $SRC_DIR</span><br><span class="line"> ---&gt; 4461303d94d7</span><br><span class="line">Step 7/17 : RUN make</span><br><span class="line"> ---&gt; Running in 1faa1d85eb96</span><br><span class="line">go  build -o bettercap .</span><br><span class="line">go: downloading github.com/evilsocket/islazy v1.10.4</span><br><span class="line">go: downloading github.com/dustin/go-humanize v1.0.0</span><br><span class="line">go: downloading github.com/bettercap/readline v0.0.0-20180208083827-9cec905dd291</span><br><span class="line">go: downloading github.com/google/gopacket v1.1.17</span><br><span class="line">go: downloading github.com/jpillora/go-tld v0.0.0-20190202073305-f16ca3b7b383</span><br><span class="line">go: extracting github.com/dustin/go-humanize v1.0.0</span><br><span class="line">go: downloading github.com/gobwas/glob v0.0.0-20181002190808-e7a84e9525fe</span><br><span class="line">go: extracting github.com/evilsocket/islazy v1.10.4</span><br><span class="line">go: extracting github.com/bettercap/readline v0.0.0-20180208083827-9cec905dd291</span><br><span class="line">go: downloading github.com/malfunkt/iprange v0.9.0</span><br><span class="line">go: downloading github.com/antchfx/jsonquery v1.0.0</span><br><span class="line">go: downloading github.com/miekg/dns v1.1.22</span><br><span class="line">go: downloading github.com/bettercap/nrf24 v0.0.0-20190219153547-aa37e6d0e0eb</span><br><span class="line">go: downloading github.com/google/gousb v0.0.0-20190812193832-18f4c1d8a750</span><br><span class="line">go: extracting github.com/antchfx/jsonquery v1.0.0</span><br><span class="line">go: extracting github.com/malfunkt/iprange v0.9.0</span><br><span class="line">go: extracting github.com/jpillora/go-tld v0.0.0-20190202073305-f16ca3b7b383</span><br><span class="line">go: extracting github.com/bettercap/nrf24 v0.0.0-20190219153547-aa37e6d0e0eb</span><br><span class="line">go: extracting github.com/gobwas/glob v0.0.0-20181002190808-e7a84e9525fe</span><br><span class="line">go: downloading github.com/pkg/errors v0.8.1</span><br><span class="line">go: downloading github.com/inconshreveable/go-vhost v0.0.0-20160627193104-06d84117953b</span><br><span class="line">go: downloading github.com/robertkrimen/otto v0.0.0-20180617131154-15f95af6e78d</span><br><span class="line">go: downloading github.com/antchfx/xpath v1.1.0</span><br><span class="line">go: downloading github.com/bettercap/recording v0.0.0-20190408083647-3ce1dcf032e3</span><br><span class="line">go: extracting github.com/miekg/dns v1.1.22</span><br><span class="line">go: extracting github.com/google/gousb v0.0.0-20190812193832-18f4c1d8a750</span><br><span class="line">go: extracting github.com/pkg/errors v0.8.1</span><br><span class="line">go: extracting github.com/inconshreveable/go-vhost v0.0.0-20160627193104-06d84117953b</span><br><span class="line">go: downloading github.com/google/go-github v17.0.0+incompatible</span><br><span class="line">go: downloading github.com/gorilla/websocket v1.4.1</span><br><span class="line">go: extracting github.com/antchfx/xpath v1.1.0</span><br><span class="line">go: extracting github.com/bettercap/recording v0.0.0-20190408083647-3ce1dcf032e3</span><br><span class="line">go: downloading github.com/gorilla/mux v1.7.3</span><br><span class="line">go: extracting github.com/gorilla/websocket v1.4.1</span><br><span class="line">go: downloading github.com/bettercap/gatt v0.0.0-20191018133023-569d3d9372bb</span><br><span class="line">go: extracting github.com/google/gopacket v1.1.17</span><br><span class="line">go: downloading golang.org/x/net v0.0.0-20191014212845-da9a3fd4c582</span><br><span class="line">go: extracting github.com/robertkrimen/otto v0.0.0-20180617131154-15f95af6e78d</span><br><span class="line">go: extracting github.com/gorilla/mux v1.7.3</span><br><span class="line">go: downloading github.com/adrianmo/go-nmea v1.1.0</span><br><span class="line">go: downloading github.com/tarm/serial v0.0.0-20180830185346-98f6abe2eb07</span><br><span class="line">go: extracting github.com/google/go-github v17.0.0+incompatible</span><br><span class="line">go: extracting github.com/bettercap/gatt v0.0.0-20191018133023-569d3d9372bb</span><br><span class="line">go: downloading golang.org/x/sys v0.0.0-20191018095205-727590c5006e</span><br><span class="line">go: downloading github.com/kr/binarydist v0.1.0</span><br><span class="line">go: downloading github.com/mdlayher/dhcp6 v0.0.0-20190311162359-2a67805d7d0b</span><br><span class="line">go: extracting github.com/tarm/serial v0.0.0-20180830185346-98f6abe2eb07</span><br><span class="line">go: extracting github.com/adrianmo/go-nmea v1.1.0</span><br><span class="line">go: extracting github.com/kr/binarydist v0.1.0</span><br><span class="line">go: downloading github.com/hashicorp/mdns v1.0.1</span><br><span class="line">go: downloading github.com/elazarl/goproxy v0.0.0-20191011121108-aa519ddbe484</span><br><span class="line">go: downloading golang.org/x/crypto v0.0.0-20191011191535-87dc89f01550</span><br><span class="line">go: downloading gopkg.in/sourcemap.v1 v1.0.5</span><br><span class="line">go: extracting github.com/mdlayher/dhcp6 v0.0.0-20190311162359-2a67805d7d0b</span><br><span class="line">go: downloading github.com/google/go-querystring v1.0.0</span><br><span class="line">go: downloading github.com/mgutz/logxi v0.0.0-20161027140823-aebf8a7d67ab</span><br><span class="line">go: extracting github.com/hashicorp/mdns v1.0.1</span><br><span class="line">go: extracting gopkg.in/sourcemap.v1 v1.0.5</span><br><span class="line">go: extracting github.com/elazarl/goproxy v0.0.0-20191011121108-aa519ddbe484</span><br><span class="line">go: downloading github.com/mitchellh/go-homedir v1.1.0</span><br><span class="line">go: extracting github.com/google/go-querystring v1.0.0</span><br><span class="line">go: extracting golang.org/x/net v0.0.0-20191014212845-da9a3fd4c582</span><br><span class="line">go: extracting github.com/mitchellh/go-homedir v1.1.0</span><br><span class="line">go: extracting github.com/mgutz/logxi v0.0.0-20161027140823-aebf8a7d67ab</span><br><span class="line">go: downloading github.com/mattn/go-isatty v0.0.10</span><br><span class="line">go: downloading github.com/mattn/go-colorable v0.1.4</span><br><span class="line">go: downloading github.com/mgutz/ansi v0.0.0-20170206155736-9520e82c474b</span><br><span class="line">go: extracting github.com/mattn/go-isatty v0.0.10</span><br><span class="line">go: extracting github.com/mgutz/ansi v0.0.0-20170206155736-9520e82c474b</span><br><span class="line">go: extracting github.com/mattn/go-colorable v0.1.4</span><br><span class="line">go: extracting golang.org/x/crypto v0.0.0-20191011191535-87dc89f01550</span><br><span class="line">go: extracting golang.org/x/sys v0.0.0-20191018095205-727590c5006e</span><br><span class="line">go: finding github.com/evilsocket/islazy v1.10.4</span><br><span class="line">go: finding github.com/malfunkt/iprange v0.9.0</span><br><span class="line">go: finding github.com/dustin/go-humanize v1.0.0</span><br><span class="line">go: finding github.com/mitchellh/go-homedir v1.1.0</span><br><span class="line">go: finding github.com/adrianmo/go-nmea v1.1.0</span><br><span class="line">go: finding github.com/bettercap/readline v0.0.0-20180208083827-9cec905dd291</span><br><span class="line">go: finding github.com/bettercap/gatt v0.0.0-20191018133023-569d3d9372bb</span><br><span class="line">go: finding github.com/bettercap/recording v0.0.0-20190408083647-3ce1dcf032e3</span><br><span class="line">go: finding github.com/gorilla/mux v1.7.3</span><br><span class="line">go: finding github.com/mgutz/logxi v0.0.0-20161027140823-aebf8a7d67ab</span><br><span class="line">go: finding github.com/google/gopacket v1.1.17</span><br><span class="line">go: finding github.com/tarm/serial v0.0.0-20180830185346-98f6abe2eb07</span><br><span class="line">go: finding github.com/gorilla/websocket v1.4.1</span><br><span class="line">go: finding github.com/antchfx/jsonquery v1.0.0</span><br><span class="line">go: finding github.com/mattn/go-colorable v0.1.4</span><br><span class="line">go: finding github.com/gobwas/glob v0.0.0-20181002190808-e7a84e9525fe</span><br><span class="line">go: finding github.com/bettercap/nrf24 v0.0.0-20190219153547-aa37e6d0e0eb</span><br><span class="line">go: finding github.com/mdlayher/dhcp6 v0.0.0-20190311162359-2a67805d7d0b</span><br><span class="line">go: finding github.com/pkg/errors v0.8.1</span><br><span class="line">go: finding github.com/mattn/go-isatty v0.0.10</span><br><span class="line">go: finding github.com/robertkrimen/otto v0.0.0-20180617131154-15f95af6e78d</span><br><span class="line">go: finding golang.org/x/sys v0.0.0-20191018095205-727590c5006e</span><br><span class="line">go: finding github.com/google/gousb v0.0.0-20190812193832-18f4c1d8a750</span><br><span class="line">go: finding github.com/kr/binarydist v0.1.0</span><br><span class="line">go: finding github.com/antchfx/xpath v1.1.0</span><br><span class="line">go: finding github.com/mgutz/ansi v0.0.0-20170206155736-9520e82c474b</span><br><span class="line">go: finding github.com/hashicorp/mdns v1.0.1</span><br><span class="line">go: finding github.com/elazarl/goproxy v0.0.0-20191011121108-aa519ddbe484</span><br><span class="line">go: finding github.com/miekg/dns v1.1.22</span><br><span class="line">go: finding github.com/google/go-github v17.0.0+incompatible</span><br><span class="line">go: finding golang.org/x/net v0.0.0-20191014212845-da9a3fd4c582</span><br><span class="line">go: finding gopkg.in/sourcemap.v1 v1.0.5</span><br><span class="line">go: finding github.com/inconshreveable/go-vhost v0.0.0-20160627193104-06d84117953b</span><br><span class="line">go: finding github.com/jpillora/go-tld v0.0.0-20190202073305-f16ca3b7b383</span><br><span class="line">go: finding github.com/google/go-querystring v1.0.0</span><br><span class="line">go: finding golang.org/x/crypto v0.0.0-20191011191535-87dc89f01550</span><br><span class="line">Removing intermediate container 1faa1d85eb96</span><br><span class="line"> ---&gt; b3d614b2ec69</span><br><span class="line">Step 8/17 : RUN mkdir -p /usr/local/share/bettercap</span><br><span class="line"> ---&gt; Running in 14eb7daf4ff8</span><br><span class="line">Removing intermediate container 14eb7daf4ff8</span><br><span class="line"> ---&gt; 68727ce1be68</span><br><span class="line">Step 9/17 : RUN git clone https://github.com/bettercap/caplets /usr/local/share/bettercap/caplets</span><br><span class="line"> ---&gt; Running in be1c4c4a54cc</span><br><span class="line">Cloning into &apos;/usr/local/share/bettercap/caplets&apos;...</span><br><span class="line">Removing intermediate container be1c4c4a54cc</span><br><span class="line"> ---&gt; 2c4f0fa1e524</span><br><span class="line">Step 10/17 : FROM alpine</span><br><span class="line">latest: Pulling from library/alpine</span><br><span class="line">99fc70ac0b64: Already exists </span><br><span class="line">Digest: sha256:c19173c5ada610a5989151111163d28a67368362762534d8a8121ce95cf2bd5a</span><br><span class="line">Status: Downloaded newer image for alpine:latest</span><br><span class="line"> ---&gt; 27560c0c9c97</span><br><span class="line">Step 11/17 : RUN apk add --update ca-certificates</span><br><span class="line"> ---&gt; Running in 509fe0867c6d</span><br><span class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/armv7/APKINDEX.tar.gz</span><br><span class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/armv7/APKINDEX.tar.gz</span><br><span class="line">(1/1) Installing ca-certificates (20190108-r0)</span><br><span class="line">Executing busybox-1.30.1-r2.trigger</span><br><span class="line">Executing ca-certificates-20190108-r0.trigger</span><br><span class="line">OK: 4 MiB in 15 packages</span><br><span class="line">Removing intermediate container 509fe0867c6d</span><br><span class="line"> ---&gt; 9293f9271587</span><br><span class="line">Step 12/17 : RUN apk add --no-cache --update bash iproute2 libpcap libusb-dev libnetfilter_queue wireless-tools</span><br><span class="line"> ---&gt; Running in 65daa4f9d22b</span><br><span class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/armv7/APKINDEX.tar.gz</span><br><span class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/armv7/APKINDEX.tar.gz</span><br><span class="line">(1/16) Installing ncurses-terminfo-base (6.1_p20190518-r0)</span><br><span class="line">(2/16) Installing ncurses-terminfo (6.1_p20190518-r0)</span><br><span class="line">(3/16) Installing ncurses-libs (6.1_p20190518-r0)</span><br><span class="line">(4/16) Installing readline (8.0.0-r0)</span><br><span class="line">(5/16) Installing bash (5.0.0-r0)</span><br><span class="line">Executing bash-5.0.0-r0.post-install</span><br><span class="line">(6/16) Installing libmnl (1.0.4-r0)</span><br><span class="line">(7/16) Installing libnftnl-libs (1.1.3-r0)</span><br><span class="line">(8/16) Installing iptables (1.8.3-r0)</span><br><span class="line">(9/16) Installing iproute2 (4.20.0-r1)</span><br><span class="line">Executing iproute2-4.20.0-r1.post-install</span><br><span class="line">(10/16) Installing libnfnetlink (1.0.1-r1)</span><br><span class="line">(11/16) Installing libnetfilter_queue (1.0.3-r0)</span><br><span class="line">(12/16) Installing libpcap (1.9.1-r0)</span><br><span class="line">(13/16) Installing libusb (1.0.22-r0)</span><br><span class="line">(14/16) Installing pkgconf (1.6.1-r1)</span><br><span class="line">(15/16) Installing libusb-dev (1.0.22-r0)</span><br><span class="line">(16/16) Installing wireless-tools (30_pre9-r1)</span><br><span class="line">Executing busybox-1.30.1-r2.trigger</span><br><span class="line">OK: 16 MiB in 31 packages</span><br><span class="line">Removing intermediate container 65daa4f9d22b</span><br><span class="line"> ---&gt; de5bed4329f4</span><br><span class="line">Step 13/17 : COPY --from=build-env /go/src/github.com/bettercap/bettercap/bettercap /app/</span><br><span class="line"> ---&gt; 7509d206b9bb</span><br><span class="line">Step 14/17 : COPY --from=build-env /usr/local/share/bettercap/caplets /app/</span><br><span class="line"> ---&gt; 867af90533b0</span><br><span class="line">Step 15/17 : WORKDIR /app</span><br><span class="line"> ---&gt; Running in e6badf626501</span><br><span class="line">Removing intermediate container e6badf626501</span><br><span class="line"> ---&gt; c8d068058c77</span><br><span class="line">Step 16/17 : EXPOSE 80 443 53 5300 8080 8081 8082 8083 8000</span><br><span class="line"> ---&gt; Running in dee9fe5c9c12</span><br><span class="line">Removing intermediate container dee9fe5c9c12</span><br><span class="line"> ---&gt; e09ab03d9632</span><br><span class="line">Step 17/17 : ENTRYPOINT [&quot;/app/bettercap&quot;]</span><br><span class="line"> ---&gt; Running in 056b18a9cf33</span><br><span class="line">Removing intermediate container 056b18a9cf33</span><br><span class="line"> ---&gt; fa1faf86b2e9</span><br><span class="line">Successfully built fa1faf86b2e9</span><br></pre></td></tr></table></figure>

<p>it shows I successfully build an image.</p>
          <!--noindex-->
          
            <div class="post-button">
              <a class="btn" href="/2019/12/06/Build-a-docker-image-bettercap/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://vmnet8.github.io/2019/11/23/Bettercap-project-install-on-raspberry-Pi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anna X">
      <meta itemprop="description" content="Happy coding ...">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/34552097">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anna X">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/11/23/Bettercap-project-install-on-raspberry-Pi/" class="post-title-link" itemprop="url">Bettercap project: install on raspberry Pi</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-11-23 00:06:53 / Modified: 00:24:46" itemprop="dateCreated datePublished" datetime="2019-11-23T00:06:53-08:00">2019-11-23</time>
            </span>
          
            

            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2019/11/23/Bettercap-project-install-on-raspberry-Pi/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/11/23/Bettercap-project-install-on-raspberry-Pi/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="install-on-raspberry-Pi3B"><a href="#install-on-raspberry-Pi3B" class="headerlink" title="install on raspberry Pi3B+"></a>install on raspberry Pi3B+</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">root@treehouses:~# sudo apt update</span><br><span class="line">Hit:1 https://download.docker.com/linux/raspbian stretch InRelease</span><br><span class="line">Get:2 http://archive.raspberrypi.org/debian buster InRelease [25.2 kB]                                                                       </span><br><span class="line">Hit:3 https://deb.nodesource.com/node_10.x buster InRelease                                                                                  </span><br><span class="line">Get:4 http://deb.torproject.org/torproject.org buster InRelease [4,964 B]                                                                    </span><br><span class="line">Get:5 http://raspbian.raspberrypi.org/raspbian buster InRelease [15.0 kB]                                    </span><br><span class="line">Get:6 https://packages.cloud.google.com/apt coral-cloud-stable InRelease [6,328 B]          </span><br><span class="line">Get:7 http://raspbian.raspberrypi.org/raspbian buster/main armhf Packages [13.0 MB]</span><br><span class="line">Get:8 http://archive.raspberrypi.org/debian buster/main armhf Packages [259 kB]</span><br><span class="line">Ign:9 https://packages.cloud.google.com/apt coral-cloud-stable/main armhf Packages</span><br><span class="line">Get:9 https://packages.cloud.google.com/apt coral-cloud-stable/main armhf Packages [3,358 B]</span><br><span class="line">Fetched 13.3 MB in 25s (539 kB/s)                                                                                                            </span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree       </span><br><span class="line">Reading state information... Done</span><br><span class="line">53 packages can be upgraded. Run &apos;apt list --upgradable&apos; to see them.</span><br></pre></td></tr></table></figure>

<p>next</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">root@treehouses:~# sudo apt install golang git build-essential libpcap-dev libusb-1.0-0-dev libnetfilter-queue-dev</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree       </span><br><span class="line">Reading state information... Done</span><br><span class="line">build-essential is already the newest version (12.6).</span><br><span class="line">git is already the newest version (1:2.20.1-2).</span><br><span class="line">The following package was automatically installed and is no longer required:</span><br><span class="line">  point-rpi</span><br><span class="line">Use &apos;sudo apt autoremove&apos; to remove it.</span><br><span class="line">The following additional packages will be installed:</span><br><span class="line">  golang-1.11 golang-1.11-doc golang-1.11-go golang-1.11-src golang-doc golang-go golang-src libnfnetlink-dev libpcap0.8-dev libusb-1.0-doc</span><br><span class="line">Suggested packages:</span><br><span class="line">  bzr | brz mercurial subversion</span><br><span class="line">The following NEW packages will be installed:</span><br><span class="line">  golang golang-1.11 golang-1.11-doc golang-1.11-go golang-1.11-src golang-doc golang-go golang-src libnetfilter-queue-dev libnfnetlink-dev</span><br><span class="line">  libpcap-dev libpcap0.8-dev libusb-1.0-0-dev libusb-1.0-doc</span><br><span class="line">0 upgraded, 14 newly installed, 0 to remove and 53 not upgraded.</span><br><span class="line">Need to get 52.4 MB of archives.</span><br><span class="line">After this operation, 260 MB of additional disk space will be used.</span><br><span class="line">Do you want to continue? [Y/n] y</span><br><span class="line">Get:1 http://mirrors.ocf.berkeley.edu/raspbian/raspbian buster/main armhf golang-1.11-src armhf 1.11.6-1+rpi1+deb10u2 [13.0 MB]</span><br><span class="line">Get:2 http://mirrors.ocf.berkeley.edu/raspbian/raspbian buster/main armhf golang-1.11-go armhf 1.11.6-1+rpi1+deb10u2 [36.3 MB]               </span><br><span class="line">Get:3 http://mirrors.ocf.berkeley.edu/raspbian/raspbian buster/main armhf golang-1.11-doc all 1.11.6-1+rpi1+deb10u2 [2,517 kB]               </span><br><span class="line">Get:4 http://mirrors.ocf.berkeley.edu/raspbian/raspbian buster/main armhf golang-1.11 all 1.11.6-1+rpi1+deb10u2 [24.1 kB]                    </span><br><span class="line">Get:5 http://mirrors.ocf.berkeley.edu/raspbian/raspbian buster/main armhf golang-src armhf 2:1.11~1+b6 [4,660 B]                             </span><br><span class="line">Get:6 http://mirrors.ocf.berkeley.edu/raspbian/raspbian buster/main armhf golang-go armhf 2:1.11~1+b6 [23.7 kB]                              </span><br><span class="line">Get:7 http://mirrors.ocf.berkeley.edu/raspbian/raspbian buster/main armhf golang-doc all 2:1.11~1 [4,392 B]                                  </span><br><span class="line">Get:8 http://mirrors.ocf.berkeley.edu/raspbian/raspbian buster/main armhf golang armhf 2:1.11~1+b6 [4,612 B]                                 </span><br><span class="line">Get:9 http://mirrors.ocf.berkeley.edu/raspbian/raspbian buster/main armhf libnfnetlink-dev armhf 1.0.1-3 [7,928 B]                           </span><br><span class="line">Get:10 http://mirrors.ocf.berkeley.edu/raspbian/raspbian buster/main armhf libnetfilter-queue-dev armhf 1.0.3-1 [6,548 B]                    </span><br><span class="line">Get:11 http://mirrors.ocf.berkeley.edu/raspbian/raspbian buster/main armhf libpcap0.8-dev armhf 1.8.1-6 [220 kB]                             </span><br><span class="line">Get:12 http://mirrors.ocf.berkeley.edu/raspbian/raspbian buster/main armhf libpcap-dev armhf 1.8.1-6 [25.9 kB]                               </span><br><span class="line">Get:13 http://mirrors.ocf.berkeley.edu/raspbian/raspbian buster/main armhf libusb-1.0-0-dev armhf 2:1.0.22-2 [65.5 kB]                       </span><br><span class="line">Get:14 http://mirrors.ocf.berkeley.edu/raspbian/raspbian buster/main armhf libusb-1.0-doc all 2:1.0.22-2 [182 kB]                            </span><br><span class="line">Fetched 52.4 MB in 23s (2,250 kB/s)                                                                                                          </span><br><span class="line">Selecting previously unselected package golang-1.11-src.</span><br><span class="line">(Reading database ... 154643 files and directories currently installed.)</span><br><span class="line">Preparing to unpack .../00-golang-1.11-src_1.11.6-1+rpi1+deb10u2_armhf.deb ...</span><br><span class="line">Unpacking golang-1.11-src (1.11.6-1+rpi1+deb10u2) ...</span><br><span class="line">Selecting previously unselected package golang-1.11-go.</span><br><span class="line">Preparing to unpack .../01-golang-1.11-go_1.11.6-1+rpi1+deb10u2_armhf.deb ...</span><br><span class="line">Unpacking golang-1.11-go (1.11.6-1+rpi1+deb10u2) ...</span><br><span class="line">Selecting previously unselected package golang-1.11-doc.</span><br><span class="line">Preparing to unpack .../02-golang-1.11-doc_1.11.6-1+rpi1+deb10u2_all.deb ...</span><br><span class="line">Unpacking golang-1.11-doc (1.11.6-1+rpi1+deb10u2) ...</span><br><span class="line">Selecting previously unselected package golang-1.11.</span><br><span class="line">Preparing to unpack .../03-golang-1.11_1.11.6-1+rpi1+deb10u2_all.deb ...</span><br><span class="line">Unpacking golang-1.11 (1.11.6-1+rpi1+deb10u2) ...</span><br><span class="line">Selecting previously unselected package golang-src.</span><br><span class="line">Preparing to unpack .../04-golang-src_2%3a1.11~1+b6_armhf.deb ...</span><br><span class="line">Unpacking golang-src (2:1.11~1+b6) ...</span><br><span class="line">Selecting previously unselected package golang-go.</span><br><span class="line">Preparing to unpack .../05-golang-go_2%3a1.11~1+b6_armhf.deb ...</span><br><span class="line">Unpacking golang-go (2:1.11~1+b6) ...</span><br><span class="line">Selecting previously unselected package golang-doc.</span><br><span class="line">Preparing to unpack .../06-golang-doc_2%3a1.11~1_all.deb ...</span><br><span class="line">Unpacking golang-doc (2:1.11~1) ...</span><br><span class="line">Selecting previously unselected package golang.</span><br><span class="line">Preparing to unpack .../07-golang_2%3a1.11~1+b6_armhf.deb ...</span><br><span class="line">Unpacking golang (2:1.11~1+b6) ...</span><br><span class="line">Selecting previously unselected package libnfnetlink-dev.</span><br><span class="line">Preparing to unpack .../08-libnfnetlink-dev_1.0.1-3_armhf.deb ...</span><br><span class="line">Unpacking libnfnetlink-dev (1.0.1-3) ...</span><br><span class="line">Selecting previously unselected package libnetfilter-queue-dev.</span><br><span class="line">Preparing to unpack .../09-libnetfilter-queue-dev_1.0.3-1_armhf.deb ...</span><br><span class="line">Unpacking libnetfilter-queue-dev (1.0.3-1) ...</span><br><span class="line">Selecting previously unselected package libpcap0.8-dev:armhf.</span><br><span class="line">Preparing to unpack .../10-libpcap0.8-dev_1.8.1-6_armhf.deb ...</span><br><span class="line">Unpacking libpcap0.8-dev:armhf (1.8.1-6) ...</span><br><span class="line">Selecting previously unselected package libpcap-dev:armhf.</span><br><span class="line">Preparing to unpack .../11-libpcap-dev_1.8.1-6_armhf.deb ...</span><br><span class="line">Unpacking libpcap-dev:armhf (1.8.1-6) ...</span><br><span class="line">Selecting previously unselected package libusb-1.0-0-dev:armhf.</span><br><span class="line">Preparing to unpack .../12-libusb-1.0-0-dev_2%3a1.0.22-2_armhf.deb ...</span><br><span class="line">Unpacking libusb-1.0-0-dev:armhf (2:1.0.22-2) ...</span><br><span class="line">Selecting previously unselected package libusb-1.0-doc.</span><br><span class="line">Preparing to unpack .../13-libusb-1.0-doc_2%3a1.0.22-2_all.deb ...</span><br><span class="line">Unpacking libusb-1.0-doc (2:1.0.22-2) ...</span><br><span class="line">Setting up libnfnetlink-dev (1.0.1-3) ...</span><br><span class="line">Setting up golang-1.11-src (1.11.6-1+rpi1+deb10u2) ...</span><br><span class="line">Setting up libpcap0.8-dev:armhf (1.8.1-6) ...</span><br><span class="line">Setting up libusb-1.0-doc (2:1.0.22-2) ...</span><br><span class="line">Setting up libusb-1.0-0-dev:armhf (2:1.0.22-2) ...</span><br><span class="line">Setting up golang-1.11-go (1.11.6-1+rpi1+deb10u2) ...</span><br><span class="line">Setting up libnetfilter-queue-dev (1.0.3-1) ...</span><br><span class="line">Setting up golang-src (2:1.11~1+b6) ...</span><br><span class="line">Setting up libpcap-dev:armhf (1.8.1-6) ...</span><br><span class="line">Setting up golang-1.11-doc (1.11.6-1+rpi1+deb10u2) ...</span><br><span class="line">Setting up golang-go (2:1.11~1+b6) ...</span><br><span class="line">Setting up golang-1.11 (1.11.6-1+rpi1+deb10u2) ...</span><br><span class="line">Setting up golang-doc (2:1.11~1) ...</span><br><span class="line">Setting up golang (2:1.11~1+b6) ...</span><br><span class="line">Processing triggers for man-db (2.8.5-2) ...</span><br></pre></td></tr></table></figure>

<p>next</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@treehouses:~# go get -u github.com/bettercap/bettercap</span><br></pre></td></tr></table></figure>
<p>Once the build process is concluded, the binary will be located in go/bin/bettercap<br>I checked the go/bin/bettercap</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@treehouses:~# which go/bin/bettercap</span><br><span class="line">go/bin/bettercap</span><br></pre></td></tr></table></figure>
          <!--noindex-->
          
            <div class="post-button">
              <a class="btn" href="/2019/11/23/Bettercap-project-install-on-raspberry-Pi/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://vmnet8.github.io/2019/11/22/Bettercap-project_install_Ubuntu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anna X">
      <meta itemprop="description" content="Happy coding ...">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/34552097">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anna X">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/11/22/Bettercap-project_install_Ubuntu/" class="post-title-link" itemprop="url">Bettercap project: install on local Ubuntu</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-11-22 17:41:33" itemprop="dateCreated datePublished" datetime="2019-11-22T17:41:33-08:00">2019-11-22</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-11-23 00:05:48" itemprop="dateModified" datetime="2019-11-23T00:05:48-08:00">2019-11-23</time>
              </span>
            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2019/11/22/Bettercap-project_install_Ubuntu/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/11/22/Bettercap-project_install_Ubuntu/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="install-on-Ubuntu"><a href="#install-on-Ubuntu" class="headerlink" title="install on Ubuntu"></a>install on Ubuntu</h2><p>copy the shell script to install bettercap, then chmod +x, then run it</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">anna@ubuntu1804:~$ ./bettercap.sh </span><br><span class="line">--2019-11-20 19:48:44--  https://github.com/bettercap/bettercap/releases/download/v2.26/bettercap_linux_amd64_v2.26.zip</span><br><span class="line">Resolving github.com (github.com)... 192.30.255.113</span><br><span class="line">Connecting to github.com (github.com)|192.30.255.113|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 302 Found</span><br><span class="line">Location: https://github-production-release-asset-2e65be.s3.amazonaws.com/116576783/09ae2a00-f1be-11e9-9887-8cb5e818dc9b?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20191121%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20191121T034844Z&amp;X-Amz-Expires=300&amp;X-Amz-Signature=622884cd807d933374563a875deaf3f0c5dd00788d6324e5b4fc5e07cc724198&amp;X-Amz-SignedHeaders=host&amp;actor_id=0&amp;response-content-disposition=attachment%3B%20filename%3Dbettercap_linux_amd64_v2.26.zip&amp;response-content-type=application%2Foctet-stream [following]</span><br><span class="line">--2019-11-20 19:48:44--  https://github-production-release-asset-2e65be.s3.amazonaws.com/116576783/09ae2a00-f1be-11e9-9887-8cb5e818dc9b?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20191121%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20191121T034844Z&amp;X-Amz-Expires=300&amp;X-Amz-Signature=622884cd807d933374563a875deaf3f0c5dd00788d6324e5b4fc5e07cc724198&amp;X-Amz-SignedHeaders=host&amp;actor_id=0&amp;response-content-disposition=attachment%3B%20filename%3Dbettercap_linux_amd64_v2.26.zip&amp;response-content-type=application%2Foctet-stream</span><br><span class="line">Resolving github-production-release-asset-2e65be.s3.amazonaws.com (github-production-release-asset-2e65be.s3.amazonaws.com)... 52.216.25.140</span><br><span class="line">Connecting to github-production-release-asset-2e65be.s3.amazonaws.com (github-production-release-asset-2e65be.s3.amazonaws.com)|52.216.25.140|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 14037021 (13M) [application/octet-stream]</span><br><span class="line">Saving to: ‘bettercap_linux_amd64_v2.26.zip’</span><br><span class="line"></span><br><span class="line">bettercap_linux_amd64_v2.26.zip     100%[=================================================================&gt;]  13.39M  1.39MB/s    in 9.9s    </span><br><span class="line"></span><br><span class="line">2019-11-20 19:48:55 (1.35 MB/s) - ‘bettercap_linux_amd64_v2.26.zip’ saved [14037021/14037021]</span><br><span class="line"></span><br><span class="line">Archive:  bettercap_linux_amd64_v2.26.zip</span><br><span class="line">  inflating: bettercap               </span><br><span class="line">  inflating: bettercap_linux_amd64_v2.26.sha256</span><br><span class="line">[sudo] password for anna: </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">bettercap: error while loading shared libraries: libnetfilter_queue.so.1: cannot open shared object file: No such file or directory</span><br></pre></td></tr></table></figure>
<p>It shows something wrong during installation, so I try the last command</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">anna@ubuntu1804:~$ sudo bettercap -eval &quot;caplets.update; ui.update; quit&quot;</span><br><span class="line">bettercap: error while loading shared libraries: libnetfilter_queue.so.1: cannot open shared object file: No such file or directory</span><br></pre></td></tr></table></figure>

<p>It shows I need to install libnetfilter-queue1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">anna@ubuntu1804:~$ sudo apt install libnetfilter-queue1</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree       </span><br><span class="line">Reading state information... Done</span><br><span class="line">The following NEW packages will be installed:</span><br><span class="line">  libnetfilter-queue1</span><br><span class="line">0 upgraded, 1 newly installed, 0 to remove and 35 not upgraded.</span><br><span class="line">Need to get 11.4 kB of archives.</span><br><span class="line">After this operation, 61.4 kB of additional disk space will be used.</span><br><span class="line">Get:1 http://us.archive.ubuntu.com/ubuntu bionic/universe amd64 libnetfilter-queue1 amd64 1.0.2-2 [11.4 kB]</span><br><span class="line">Fetched 11.4 kB in 0s (42.2 kB/s)             </span><br><span class="line">Selecting previously unselected package libnetfilter-queue1.</span><br><span class="line">(Reading database ... 219919 files and directories currently installed.)</span><br><span class="line">Preparing to unpack .../libnetfilter-queue1_1.0.2-2_amd64.deb ...</span><br><span class="line">Unpacking libnetfilter-queue1 (1.0.2-2) ...</span><br><span class="line">Setting up libnetfilter-queue1 (1.0.2-2) ...</span><br><span class="line">Processing triggers for libc-bin (2.27-3ubuntu1) ...</span><br></pre></td></tr></table></figure>
          <!--noindex-->
          
            <div class="post-button">
              <a class="btn" href="/2019/11/22/Bettercap-project_install_Ubuntu/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://vmnet8.github.io/2019/11/22/Pwnagotchi-using-docker-image/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anna X">
      <meta itemprop="description" content="Happy coding ...">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/34552097">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anna X">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/11/22/Pwnagotchi-using-docker-image/" class="post-title-link" itemprop="url">Pwnagotchi: using docker image to install bettercap</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-11-22 11:24:11" itemprop="dateCreated datePublished" datetime="2019-11-22T11:24:11-08:00">2019-11-22</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-06-03 17:28:58" itemprop="dateModified" datetime="2020-06-03T17:28:58-07:00">2020-06-03</time>
              </span>
            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2019/11/22/Pwnagotchi-using-docker-image/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/11/22/Pwnagotchi-using-docker-image/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>This time, I try to install bettercap docker image on raspberry Pi3B+.</p>
<h2 id="Install-dependency-package-first"><a href="#Install-dependency-package-first" class="headerlink" title="Install dependency package first"></a>Install dependency package first</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">root@treehouses:~# apt install libnetfilter-queue1</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree       </span><br><span class="line">Reading state information... Done</span><br><span class="line">The following package was automatically installed and is no longer required:</span><br><span class="line">  point-rpi</span><br><span class="line">Use &apos;apt autoremove&apos; to remove it.</span><br><span class="line">The following NEW packages will be installed:</span><br><span class="line">  libnetfilter-queue1</span><br><span class="line">0 upgraded, 1 newly installed, 0 to remove and 1 not upgraded.</span><br><span class="line">Need to get 10.7 kB of archives.</span><br><span class="line">After this operation, 36.9 kB of additional disk space will be used.</span><br><span class="line">Get:1 http://mirrors.ocf.berkeley.edu/raspbian/raspbian buster/main armhf libnetfilter-queue1 armhf 1.0.3-1 [10.7 kB]</span><br><span class="line">Fetched 10.7 kB in 1s (12.1 kB/s)               </span><br><span class="line">Selecting previously unselected package libnetfilter-queue1.</span><br><span class="line">(Reading database ... 154638 files and directories currently installed.)</span><br><span class="line">Preparing to unpack .../libnetfilter-queue1_1.0.3-1_armhf.deb ...</span><br><span class="line">Unpacking libnetfilter-queue1 (1.0.3-1) ...</span><br><span class="line">Setting up libnetfilter-queue1 (1.0.3-1) ...</span><br><span class="line">Processing triggers for libc-bin (2.28-10+rpi1) ...</span><br><span class="line">root@treehouses:~# apt show libnetfilter-queue1</span><br><span class="line"></span><br><span class="line">Package: libnetfilter-queue1</span><br><span class="line">Version: 1.0.3-1</span><br><span class="line">Priority: optional</span><br><span class="line">Section: libs</span><br><span class="line">Source: libnetfilter-queue</span><br><span class="line">Maintainer: Debian Netfilter Packaging Team &lt;pkg-netfilter-team@lists.alioth.debian.org&gt;</span><br><span class="line">Installed-Size: 36.9 kB</span><br><span class="line">Depends: libc6 (&gt;= 2.4), libmnl0 (&gt;= 1.0.3-4~), libnfnetlink0</span><br><span class="line">Homepage: http://www.netfilter.org/projects/libnetfilter_queue/</span><br><span class="line">Download-Size: 10.7 kB</span><br><span class="line">APT-Manual-Installed: yes</span><br><span class="line">APT-Sources: http://raspbian.raspberrypi.org/raspbian buster/main armhf Packages</span><br><span class="line">Description: Netfilter netlink-queue library</span><br><span class="line"> libnetfilter_queue is a userspace library providing an API to packets</span><br><span class="line"> that have been queued by the kernel packet filter. It is part of a</span><br><span class="line"> system that deprecates the old ip_queue / libipq mechanism.</span><br></pre></td></tr></table></figure>


<h2 id="Install-bettercap-docker-image"><a href="#Install-bettercap-docker-image" class="headerlink" title="Install bettercap docker image"></a>Install bettercap docker image</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">root@treehouses:~# docker pull bettercap/bettercap</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from bettercap/bettercap</span><br><span class="line">bdf0201b3a05: Pull complete </span><br><span class="line">1465d5cbc6a8: Pull complete </span><br><span class="line">59da5739fafc: Pull complete </span><br><span class="line">86a51d61314d: Pull complete </span><br><span class="line">544433dabf48: Pull complete </span><br><span class="line">Digest: sha256:c7497e0839238a0a0d4920e583e765d7b53f794dea70f85882baa42c06ad8cbd</span><br><span class="line">Status: Downloaded newer image for bettercap/bettercap:latest</span><br><span class="line">docker.io/bettercap/bettercap:latest</span><br><span class="line">root@treehouses:~# docker image ls</span><br><span class="line">REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">bettercap/bettercap   latest              c921a193dd94        6 months ago        51.1MB</span><br></pre></td></tr></table></figure>
          <!--noindex-->
          
            <div class="post-button">
              <a class="btn" href="/2019/11/22/Pwnagotchi-using-docker-image/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://vmnet8.github.io/2019/11/19/Pwnagotchi-project/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anna X">
      <meta itemprop="description" content="Happy coding ...">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/34552097">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anna X">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/11/19/Pwnagotchi-project/" class="post-title-link" itemprop="url">Pwnagotchi project: Using Pwnagotchi image</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-11-19 21:17:29" itemprop="dateCreated datePublished" datetime="2019-11-19T21:17:29-08:00">2019-11-19</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-11-23 00:28:30" itemprop="dateModified" datetime="2019-11-23T00:28:30-08:00">2019-11-23</time>
              </span>
            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2019/11/19/Pwnagotchi-project/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/11/19/Pwnagotchi-project/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="what-is-Pwnagotchi"><a href="#what-is-Pwnagotchi" class="headerlink" title="what is Pwnagotchi"></a>what is Pwnagotchi</h2><p>Pwnagotchi is an A2C-based “AI” powered by bettercap that learns from its surrounding WiFi environment in order to maximize the crackable WPA key material it captures (either through passive sniffing or by performing deauthentication and association attacks). This material is collected on disk as PCAP files containing any form of crackable handshake supported by hashcat, including full and half WPA handshakes as well as PMKIDs.</p>
<h2 id="falshing-an-image"><a href="#falshing-an-image" class="headerlink" title="falshing an image"></a>falshing an image</h2><p>download the <a href="https://github.com/evilsocket/pwnagotchi/releases" target="_blank" rel="noopener">the latest image</a><br>then unzip it into present directory</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anna@ubuntu1804:~/Downloads$ dd if=pwnagotchi-raspbian-lite-v1.3.0.img of=/dev/sdcard</span><br></pre></td></tr></table></figure>
<h2 id="config-file"><a href="#config-file" class="headerlink" title="config file"></a>config file</h2><p>before boot this image on RPI 3B+, I need to config it first. I mount this device to /mnt/1.<br>then add config.yml to it.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">main:</span><br><span class="line">  name: &apos;pwnagotchi&apos;</span><br><span class="line">  whitelist:</span><br><span class="line">    - &apos;YourHomeNetworkMaybe&apos;</span><br><span class="line">  plugins:</span><br><span class="line">    grid:</span><br><span class="line">      enabled: true</span><br><span class="line">      report: true</span><br><span class="line">      exclude:</span><br><span class="line">        - &apos;YourHomeNetworkMaybe&apos;</span><br></pre></td></tr></table></figure>
<p>Because I dont have RPi 0w, so I try to use web UI (instead of an e-ink display attached to RPi0W) to see your Pwnagotchi’s face.</p>
<p>I add these to my config.yml file</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ui:</span><br><span class="line">    web:</span><br><span class="line">        username: my_new_username</span><br><span class="line">        password: my_new_password</span><br></pre></td></tr></table></figure>
<p>In order to reduce power requirements I can lower cpu frequency (underclocking). Edit my /boot/config.txt and uncomment the arm_freq=800.</p>
<h2 id="First-boot"><a href="#First-boot" class="headerlink" title="First boot"></a>First boot</h2><p>It shows like following.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Linux pwnagotchi 4.19.81-Re4son-v7+ #1 SMP Wed Nov 6 10:16:47 AEDT 2019 armv7l</span><br><span class="line">(◕‿‿◕) pwnagotchi</span><br><span class="line"></span><br><span class="line">Hi! I&apos;m a pwnagotchi, please take good care of me!</span><br><span class="line">Here are some basic things you need to know to raise me properly!</span><br><span class="line"></span><br><span class="line">If you want to change my configuration, use /etc/pwnagotchi/config.yml</span><br><span class="line"></span><br><span class="line">All the configuration options can be found on /etc/pwnagotchi/default.yml,</span><br><span class="line">but don&apos;t change this file because I will recreate it every time I&apos;m restarted!</span><br><span class="line"></span><br><span class="line">I&apos;m managed by systemd. Here are some basic commands.</span><br><span class="line"></span><br><span class="line">If you want to know what I&apos;m doing, you can check my logs with the command</span><br><span class="line">journalctl -fu pwnagotchi</span><br><span class="line"></span><br><span class="line">If you want to know if I&apos;m running, you can use</span><br><span class="line">systemctl status pwnagotchi</span><br><span class="line"></span><br><span class="line">You can restart me using</span><br><span class="line">systemctl restart pwnagotchi</span><br><span class="line"></span><br><span class="line">But be aware I will go into MANUAL mode when restarted!</span><br><span class="line">You can put me back into AUTO mode using</span><br><span class="line">touch /root/.pwnagotchi-auto &amp;&amp; systemctl restart pwnagotchi</span><br><span class="line"></span><br><span class="line">You learn more about me at https://pwnagotchi.ai/</span><br><span class="line">Last login: Wed Jul 10 01:30:38 2019 from 192.168.0.26</span><br><span class="line"></span><br><span class="line">SSH is enabled and the default password for the &apos;pi&apos; user has not been changed.</span><br><span class="line">This is a security risk - please login as the &apos;pi&apos; user and type &apos;passwd&apos; to set a new password.</span><br></pre></td></tr></table></figure>

<p>check the service </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">pi@pwnagotchi:~ $ systemctl status pwnagotchi.service </span><br><span class="line">● pwnagotchi.service - pwnagotchi Deep Reinforcement Learning instrumenting bettercap for WiFI pwning.</span><br><span class="line">   Loaded: loaded (/etc/systemd/system/pwnagotchi.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: active (running) since Wed 2019-07-10 02:17:04 BST; 2min 45s ago</span><br><span class="line">     Docs: https://pwnagotchi.ai</span><br><span class="line"> Main PID: 406 (bash)</span><br><span class="line">    Tasks: 24 (limit: 2319)</span><br><span class="line">   CGroup: /system.slice/pwnagotchi.service</span><br><span class="line">           ├─406 bash /usr/bin/pwnagotchi-launcher</span><br><span class="line">           ├─468 /usr/bin/python3 /usr/local/bin/pwnagotchi</span><br><span class="line">           └─811 orted --hnp --set-sid --report-uri 14 --singleton-died-pipe 15 -mca state_novm_select 1 -mca ess hnp -mca pmix ^s1,s2,cray,is</span><br><span class="line"></span><br><span class="line">Jul 10 02:18:06 pwnagotchi pwnagotchi-launcher[406]: Instructions for updating:</span><br><span class="line">Jul 10 02:18:06 pwnagotchi pwnagotchi-launcher[406]: Please use `layer.__call__` method instead.</span><br><span class="line">Jul 10 02:18:06 pwnagotchi pwnagotchi-launcher[406]: [2019-07-10 02:18:06,735] [WARNING] From /usr/local/lib/python3.7/dist-packages/tensorflo</span><br><span class="line">Jul 10 02:19:33 pwnagotchi pwnagotchi-launcher[406]: [2019-07-10 02:19:33,331] [WARNING] From /usr/local/lib/python3.7/dist-packages/stable_ba</span><br><span class="line">Jul 10 02:19:36 pwnagotchi pwnagotchi-launcher[406]: [2019-07-10 02:19:36,093] [ERROR] got data on channel 149, we can store 140 channels</span><br><span class="line">Jul 10 02:19:36 pwnagotchi pwnagotchi-launcher[406]: [2019-07-10 02:19:36,112] [ERROR] got data on channel 149, we can store 140 channels</span><br><span class="line">Jul 10 02:19:36 pwnagotchi pwnagotchi-launcher[406]: [2019-07-10 02:19:36,116] [ERROR] got data on channel 149, we can store 140 channels</span><br><span class="line">Jul 10 02:19:36 pwnagotchi pwnagotchi-launcher[406]: [2019-07-10 02:19:36,118] [ERROR] got data on channel 149, we can store 140 channels</span><br><span class="line">Jul 10 02:19:36 pwnagotchi pwnagotchi-launcher[406]: [2019-07-10 02:19:36,129] [ERROR] got data on channel 149, we can store 140 channels</span><br><span class="line">Jul 10 02:19:41 pwnagotchi pwnagotchi-launcher[406]: [2019-07-10 02:19:41,825] [INFO] sending association frame to clarkwifi (b0:2a:43:e6:6f:f</span><br></pre></td></tr></table></figure>


<p>all the handshake eaten by pwnagotchi can be found under /root/handshake</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">root@pwnagotchi:~/handshakes# ls -al</span><br><span class="line">total 52</span><br><span class="line">drwxr-xr-x 2 root root 4096 Jul 10 02:28 .</span><br><span class="line">drwx------ 9 root root 4096 Jul 10 02:17 ..</span><br><span class="line">-rw-r--r-- 1 root root 1780 Jul 10 02:28 abfguest_d66e0e3131a4.pcap</span><br><span class="line">-rw-r--r-- 1 root root 4824 Jul 10 02:20 ATTtpcaygs_f82dc0d869e0.pcap</span><br><span class="line">-rw-r--r-- 1 root root 6264 Jul 10 02:21 ATTvmtPDGs_2c9569519550.pcap</span><br><span class="line">-rw-r--r-- 1 root root 2544 Jul 10 02:22 DIRECT19HPOfficeJet3830_10e7c694ba1a.pcap</span><br><span class="line">-rw-r--r-- 1 root root 1892 Jul 10 02:25 Hailey716_b02a43ec8ab0.pcap</span><br><span class="line">-rw-r--r-- 1 root root 2812 Jul 10 02:23 hidden_963badcbb2be.pcap</span><br><span class="line">-rw-r--r-- 1 root root 2476 Jul 10 02:23 NETGEARORBIhidden86_963badcbb2be.pcap</span><br><span class="line">-rw-r--r-- 1 root root 2283 Jul 10 02:27 ngHub319444NG01912_dcef09d5a816.pcap</span><br><span class="line">-rw-r--r-- 1 root root 2484 Jul 10 02:21 PeakyBlinders24G_9c3dcf98b8b3.pcap</span><br></pre></td></tr></table></figure>
<img src="/2019/11/19/Pwnagotchi-project/image_login.png" class="">



<img src="/2019/11/19/Pwnagotchi-project/make_0_friend.png" class="">
<img src="/2019/11/19/Pwnagotchi-project/bettercap.png" class="">


        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </article>
  
  
  

    
  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="https://avatars0.githubusercontent.com/u/34552097"
      alt="Anna X">
  <p class="site-author-name" itemprop="name">Anna X</p>
  <div class="site-description" itemprop="description">Happy coding ...</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/%20%7C%7C%20archive">
        
          <span class="site-state-item-count">49</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/%20%7C%7C%20tags">
          
        
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">tags</span>
        </a>
      </div>
    
  </nav>
</div>
  <div class="feed-link motion-element">
    <a href="/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/vmnet8" title="GitHub &amp;rarr; https:&#x2F;&#x2F;github.com&#x2F;vmnet8" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://www.linkedin.com/in/anna-x/" title="Linkedin &amp;rarr; https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;anna-x&#x2F;" rel="noopener" target="_blank"><i class="fa fa-fw fa-linkedin"></i>Linkedin</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="mailto:vmnet8@gmail.com" title="E-Mail &amp;rarr; mailto:vmnet8@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
    
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Anna X</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.0.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.4.1</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
  
    <span class="post-meta-divider">|</span>
  
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
  
</div>












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.1"></script><script src="/js/motion.js?v=7.4.1"></script>
<script src="/js/schemes/pisces.js?v=7.4.1"></script>
<script src="/js/next-boot.js?v=7.4.1"></script>



  








  <script src="/js/local-search.js?v=7.4.1"></script>














  

  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://annax.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
